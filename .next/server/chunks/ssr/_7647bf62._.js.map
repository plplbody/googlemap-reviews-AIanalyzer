{"version":3,"sources":["../../../../node_modules/next/src/build/webpack/loaders/next-flight-loader/server-reference.ts","../../../../node_modules/%40google-cloud/vertexai/node_modules/gcp-metadata/src/gcp-residency.ts","../../../../node_modules/webidl-conversions/lib/index.js","../../../../node_modules/whatwg-url/lib/utils.js","../../../../node_modules/tr46/index.js","../../../../node_modules/whatwg-url/lib/url-state-machine.js","../../../../node_modules/whatwg-url/lib/URL-impl.js","../../../../node_modules/whatwg-url/lib/URL.js","../../../../node_modules/whatwg-url/lib/public-api.js","../../../../node_modules/node-fetch/lib/index.mjs","../../../../node_modules/is-stream/index.js","../../../../node_modules/gaxios/src/util.ts","../../../../node_modules/gaxios/src/common.ts","../../../../node_modules/gaxios/src/retry.ts","../../../../node_modules/gaxios/node_modules/uuid/dist/esm-node/rng.js","../../../../node_modules/gaxios/node_modules/uuid/dist/esm-node/regex.js","../../../../node_modules/gaxios/node_modules/uuid/dist/esm-node/validate.js","../../../../node_modules/gaxios/node_modules/uuid/dist/esm-node/stringify.js","../../../../node_modules/gaxios/node_modules/uuid/dist/esm-node/v1.js","../../../../node_modules/gaxios/node_modules/uuid/dist/esm-node/parse.js","../../../../node_modules/gaxios/node_modules/uuid/dist/esm-node/v35.js","../../../../node_modules/gaxios/node_modules/uuid/dist/esm-node/md5.js","../../../../node_modules/gaxios/node_modules/uuid/dist/esm-node/v3.js","../../../../node_modules/gaxios/node_modules/uuid/dist/esm-node/native.js","../../../../node_modules/gaxios/node_modules/uuid/dist/esm-node/v4.js","../../../../node_modules/gaxios/node_modules/uuid/dist/esm-node/sha1.js","../../../../node_modules/gaxios/node_modules/uuid/dist/esm-node/v5.js","../../../../node_modules/gaxios/node_modules/uuid/dist/esm-node/nil.js","../../../../node_modules/gaxios/node_modules/uuid/dist/esm-node/version.js","../../../../node_modules/gaxios/src/interceptor.ts","../../../../node_modules/gaxios/src/gaxios.ts","../../../../node_modules/gaxios/src/index.ts","../../../../node_modules/%40google-cloud/vertexai/node_modules/google-logging-utils/src/colours.ts","../../../../node_modules/%40google-cloud/vertexai/node_modules/google-logging-utils/src/logging-utils.ts","../../../../node_modules/%40google-cloud/vertexai/node_modules/google-logging-utils/src/index.ts","../../../../node_modules/%40google-cloud/vertexai/node_modules/gcp-metadata/src/index.ts","../../../../node_modules/%40google-cloud/vertexai/node_modules/google-auth-library/build/src/crypto/browser/crypto.js","../../../../node_modules/%40google-cloud/vertexai/node_modules/google-auth-library/build/src/crypto/node/crypto.js","../../../../node_modules/%40google-cloud/vertexai/node_modules/google-auth-library/build/src/crypto/crypto.js","../../../../node_modules/%40google-cloud/vertexai/node_modules/google-auth-library/build/src/options.js","../../../../node_modules/%40google-cloud/vertexai/node_modules/google-auth-library/build/src/transporters.js","../../../../node_modules/%40google-cloud/vertexai/node_modules/google-auth-library/build/src/util.js","../../../../node_modules/%40google-cloud/vertexai/node_modules/google-auth-library/build/src/auth/authclient.js","../../../../node_modules/%40google-cloud/vertexai/node_modules/google-auth-library/build/src/auth/loginticket.js","../../../../node_modules/%40google-cloud/vertexai/node_modules/google-auth-library/build/src/auth/oauth2client.js","../../../../node_modules/%40google-cloud/vertexai/node_modules/google-auth-library/build/src/auth/computeclient.js","../../../../node_modules/%40google-cloud/vertexai/node_modules/google-auth-library/build/src/auth/idtokenclient.js","../../../../node_modules/%40google-cloud/vertexai/node_modules/google-auth-library/build/src/auth/envDetect.js","../../../../node_modules/%40google-cloud/vertexai/node_modules/gtoken/build/src/index.js","../../../../node_modules/%40google-cloud/vertexai/node_modules/google-auth-library/build/src/auth/jwtaccess.js","../../../../node_modules/%40google-cloud/vertexai/node_modules/google-auth-library/build/src/auth/jwtclient.js","../../../../node_modules/%40google-cloud/vertexai/node_modules/google-auth-library/build/src/auth/refreshclient.js","../../../../node_modules/%40google-cloud/vertexai/node_modules/google-auth-library/build/src/auth/impersonated.js","../../../../node_modules/%40google-cloud/vertexai/node_modules/google-auth-library/build/src/auth/oauth2common.js","../../../../node_modules/%40google-cloud/vertexai/node_modules/google-auth-library/build/src/auth/stscredentials.js","../../../../node_modules/%40google-cloud/vertexai/node_modules/google-auth-library/build/src/auth/baseexternalclient.js","../../../../node_modules/%40google-cloud/vertexai/node_modules/google-auth-library/build/src/auth/filesubjecttokensupplier.js","../../../../node_modules/%40google-cloud/vertexai/node_modules/google-auth-library/build/src/auth/urlsubjecttokensupplier.js","../../../../node_modules/%40google-cloud/vertexai/node_modules/google-auth-library/build/src/auth/identitypoolclient.js","../../../../node_modules/%40google-cloud/vertexai/node_modules/google-auth-library/build/src/auth/awsrequestsigner.js","../../../../node_modules/%40google-cloud/vertexai/node_modules/google-auth-library/build/src/auth/defaultawssecuritycredentialssupplier.js","../../../../node_modules/%40google-cloud/vertexai/node_modules/google-auth-library/build/src/auth/awsclient.js","../../../../node_modules/%40google-cloud/vertexai/node_modules/google-auth-library/build/src/auth/executable-response.js","../../../../node_modules/%40google-cloud/vertexai/node_modules/google-auth-library/build/src/auth/pluggable-auth-handler.js","../../../../node_modules/%40google-cloud/vertexai/node_modules/google-auth-library/build/src/auth/pluggable-auth-client.js","../../../../node_modules/%40google-cloud/vertexai/node_modules/google-auth-library/build/src/auth/externalclient.js","../../../../node_modules/%40google-cloud/vertexai/node_modules/google-auth-library/build/src/auth/externalAccountAuthorizedUserClient.js","../../../../node_modules/%40google-cloud/vertexai/node_modules/google-auth-library/build/src/auth/googleauth.js","../../../../node_modules/%40google-cloud/vertexai/node_modules/google-auth-library/build/src/auth/iam.js","../../../../node_modules/%40google-cloud/vertexai/node_modules/google-auth-library/build/src/auth/downscopedclient.js","../../../../node_modules/%40google-cloud/vertexai/node_modules/google-auth-library/build/src/auth/passthrough.js","../../../../node_modules/%40google-cloud/vertexai/node_modules/google-auth-library/build/src/index.js","../../../../node_modules/%40google-cloud/vertexai/src/util/constants.ts","../../../../node_modules/%40google-cloud/vertexai/src/util/index.ts","../../../../node_modules/%40google-cloud/vertexai/src/functions/util.ts","../../../../node_modules/%40google-cloud/vertexai/src/types/errors.ts","../../../../node_modules/%40google-cloud/vertexai/src/functions/post_fetch_processing.ts","../../../../node_modules/%40google-cloud/vertexai/src/functions/post_request.ts","../../../../node_modules/%40google-cloud/vertexai/src/functions/pre_fetch_processing.ts","../../../../node_modules/%40google-cloud/vertexai/src/functions/generate_content.ts","../../../../node_modules/%40google-cloud/vertexai/src/models/chat_session.ts","../../../../node_modules/%40google-cloud/vertexai/src/functions/count_tokens.ts","../../../../node_modules/%40google-cloud/vertexai/src/models/generative_models.ts","../../../../node_modules/%40google-cloud/vertexai/src/models/index.ts","../../../../node_modules/%40google-cloud/vertexai/src/types/common.ts","../../../../node_modules/%40google-cloud/vertexai/src/types/content.ts","../../../../node_modules/%40google-cloud/vertexai/src/types/tool.ts","../../../../node_modules/%40google-cloud/vertexai/src/types/generate_content_response_handler.ts","../../../../node_modules/%40google-cloud/vertexai/src/types/index.ts","../../../../node_modules/%40google-cloud/vertexai/src/resources/cached_contents.ts","../../../../node_modules/%40google-cloud/vertexai/src/resources/shared/api_client.ts","../../../../node_modules/%40google-cloud/vertexai/src/resources/index.ts","../../../../node_modules/%40google-cloud/vertexai/src/vertex_ai.ts","../../../../node_modules/%40google-cloud/vertexai/src/index.ts","../../../../node_modules/next/src/build/webpack/loaders/next-flight-loader/action-validate.ts","../../../../src/server/actions/place.ts","../../../../src/lib/firebase/admin.ts","../../../../src/server/services/analyzer.service.ts","../../../../src/lib/queue/client.ts","../../../../src/server/actions/config.ts"],"sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\nexport { registerServerReference } from 'react-server-dom-webpack/server'\n","unable to read source [project]/node_modules/@google-cloud/vertexai/node_modules/gcp-metadata/src/gcp-residency.ts","\"use strict\";\n\nvar conversions = {};\nmodule.exports = conversions;\n\nfunction sign(x) {\n    return x < 0 ? -1 : 1;\n}\n\nfunction evenRound(x) {\n    // Round x to the nearest integer, choosing the even integer if it lies halfway between two.\n    if ((x % 1) === 0.5 && (x & 1) === 0) { // [even number].5; round down (i.e. floor)\n        return Math.floor(x);\n    } else {\n        return Math.round(x);\n    }\n}\n\nfunction createNumberConversion(bitLength, typeOpts) {\n    if (!typeOpts.unsigned) {\n        --bitLength;\n    }\n    const lowerBound = typeOpts.unsigned ? 0 : -Math.pow(2, bitLength);\n    const upperBound = Math.pow(2, bitLength) - 1;\n\n    const moduloVal = typeOpts.moduloBitLength ? Math.pow(2, typeOpts.moduloBitLength) : Math.pow(2, bitLength);\n    const moduloBound = typeOpts.moduloBitLength ? Math.pow(2, typeOpts.moduloBitLength - 1) : Math.pow(2, bitLength - 1);\n\n    return function(V, opts) {\n        if (!opts) opts = {};\n\n        let x = +V;\n\n        if (opts.enforceRange) {\n            if (!Number.isFinite(x)) {\n                throw new TypeError(\"Argument is not a finite number\");\n            }\n\n            x = sign(x) * Math.floor(Math.abs(x));\n            if (x < lowerBound || x > upperBound) {\n                throw new TypeError(\"Argument is not in byte range\");\n            }\n\n            return x;\n        }\n\n        if (!isNaN(x) && opts.clamp) {\n            x = evenRound(x);\n\n            if (x < lowerBound) x = lowerBound;\n            if (x > upperBound) x = upperBound;\n            return x;\n        }\n\n        if (!Number.isFinite(x) || x === 0) {\n            return 0;\n        }\n\n        x = sign(x) * Math.floor(Math.abs(x));\n        x = x % moduloVal;\n\n        if (!typeOpts.unsigned && x >= moduloBound) {\n            return x - moduloVal;\n        } else if (typeOpts.unsigned) {\n            if (x < 0) {\n              x += moduloVal;\n            } else if (x === -0) { // don't return negative zero\n              return 0;\n            }\n        }\n\n        return x;\n    }\n}\n\nconversions[\"void\"] = function () {\n    return undefined;\n};\n\nconversions[\"boolean\"] = function (val) {\n    return !!val;\n};\n\nconversions[\"byte\"] = createNumberConversion(8, { unsigned: false });\nconversions[\"octet\"] = createNumberConversion(8, { unsigned: true });\n\nconversions[\"short\"] = createNumberConversion(16, { unsigned: false });\nconversions[\"unsigned short\"] = createNumberConversion(16, { unsigned: true });\n\nconversions[\"long\"] = createNumberConversion(32, { unsigned: false });\nconversions[\"unsigned long\"] = createNumberConversion(32, { unsigned: true });\n\nconversions[\"long long\"] = createNumberConversion(32, { unsigned: false, moduloBitLength: 64 });\nconversions[\"unsigned long long\"] = createNumberConversion(32, { unsigned: true, moduloBitLength: 64 });\n\nconversions[\"double\"] = function (V) {\n    const x = +V;\n\n    if (!Number.isFinite(x)) {\n        throw new TypeError(\"Argument is not a finite floating-point value\");\n    }\n\n    return x;\n};\n\nconversions[\"unrestricted double\"] = function (V) {\n    const x = +V;\n\n    if (isNaN(x)) {\n        throw new TypeError(\"Argument is NaN\");\n    }\n\n    return x;\n};\n\n// not quite valid, but good enough for JS\nconversions[\"float\"] = conversions[\"double\"];\nconversions[\"unrestricted float\"] = conversions[\"unrestricted double\"];\n\nconversions[\"DOMString\"] = function (V, opts) {\n    if (!opts) opts = {};\n\n    if (opts.treatNullAsEmptyString && V === null) {\n        return \"\";\n    }\n\n    return String(V);\n};\n\nconversions[\"ByteString\"] = function (V, opts) {\n    const x = String(V);\n    let c = undefined;\n    for (let i = 0; (c = x.codePointAt(i)) !== undefined; ++i) {\n        if (c > 255) {\n            throw new TypeError(\"Argument is not a valid bytestring\");\n        }\n    }\n\n    return x;\n};\n\nconversions[\"USVString\"] = function (V) {\n    const S = String(V);\n    const n = S.length;\n    const U = [];\n    for (let i = 0; i < n; ++i) {\n        const c = S.charCodeAt(i);\n        if (c < 0xD800 || c > 0xDFFF) {\n            U.push(String.fromCodePoint(c));\n        } else if (0xDC00 <= c && c <= 0xDFFF) {\n            U.push(String.fromCodePoint(0xFFFD));\n        } else {\n            if (i === n - 1) {\n                U.push(String.fromCodePoint(0xFFFD));\n            } else {\n                const d = S.charCodeAt(i + 1);\n                if (0xDC00 <= d && d <= 0xDFFF) {\n                    const a = c & 0x3FF;\n                    const b = d & 0x3FF;\n                    U.push(String.fromCodePoint((2 << 15) + (2 << 9) * a + b));\n                    ++i;\n                } else {\n                    U.push(String.fromCodePoint(0xFFFD));\n                }\n            }\n        }\n    }\n\n    return U.join('');\n};\n\nconversions[\"Date\"] = function (V, opts) {\n    if (!(V instanceof Date)) {\n        throw new TypeError(\"Argument is not a Date object\");\n    }\n    if (isNaN(V)) {\n        return undefined;\n    }\n\n    return V;\n};\n\nconversions[\"RegExp\"] = function (V, opts) {\n    if (!(V instanceof RegExp)) {\n        V = new RegExp(V);\n    }\n\n    return V;\n};\n","\"use strict\";\n\nmodule.exports.mixin = function mixin(target, source) {\n  const keys = Object.getOwnPropertyNames(source);\n  for (let i = 0; i < keys.length; ++i) {\n    Object.defineProperty(target, keys[i], Object.getOwnPropertyDescriptor(source, keys[i]));\n  }\n};\n\nmodule.exports.wrapperSymbol = Symbol(\"wrapper\");\nmodule.exports.implSymbol = Symbol(\"impl\");\n\nmodule.exports.wrapperForImpl = function (impl) {\n  return impl[module.exports.wrapperSymbol];\n};\n\nmodule.exports.implForWrapper = function (wrapper) {\n  return wrapper[module.exports.implSymbol];\n};\n\n","\"use strict\";\n\nvar punycode = require(\"punycode\");\nvar mappingTable = require(\"./lib/mappingTable.json\");\n\nvar PROCESSING_OPTIONS = {\n  TRANSITIONAL: 0,\n  NONTRANSITIONAL: 1\n};\n\nfunction normalize(str) { // fix bug in v8\n  return str.split('\\u0000').map(function (s) { return s.normalize('NFC'); }).join('\\u0000');\n}\n\nfunction findStatus(val) {\n  var start = 0;\n  var end = mappingTable.length - 1;\n\n  while (start <= end) {\n    var mid = Math.floor((start + end) / 2);\n\n    var target = mappingTable[mid];\n    if (target[0][0] <= val && target[0][1] >= val) {\n      return target;\n    } else if (target[0][0] > val) {\n      end = mid - 1;\n    } else {\n      start = mid + 1;\n    }\n  }\n\n  return null;\n}\n\nvar regexAstralSymbols = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n\nfunction countSymbols(string) {\n  return string\n    // replace every surrogate pair with a BMP symbol\n    .replace(regexAstralSymbols, '_')\n    // then get the length\n    .length;\n}\n\nfunction mapChars(domain_name, useSTD3, processing_option) {\n  var hasError = false;\n  var processed = \"\";\n\n  var len = countSymbols(domain_name);\n  for (var i = 0; i < len; ++i) {\n    var codePoint = domain_name.codePointAt(i);\n    var status = findStatus(codePoint);\n\n    switch (status[1]) {\n      case \"disallowed\":\n        hasError = true;\n        processed += String.fromCodePoint(codePoint);\n        break;\n      case \"ignored\":\n        break;\n      case \"mapped\":\n        processed += String.fromCodePoint.apply(String, status[2]);\n        break;\n      case \"deviation\":\n        if (processing_option === PROCESSING_OPTIONS.TRANSITIONAL) {\n          processed += String.fromCodePoint.apply(String, status[2]);\n        } else {\n          processed += String.fromCodePoint(codePoint);\n        }\n        break;\n      case \"valid\":\n        processed += String.fromCodePoint(codePoint);\n        break;\n      case \"disallowed_STD3_mapped\":\n        if (useSTD3) {\n          hasError = true;\n          processed += String.fromCodePoint(codePoint);\n        } else {\n          processed += String.fromCodePoint.apply(String, status[2]);\n        }\n        break;\n      case \"disallowed_STD3_valid\":\n        if (useSTD3) {\n          hasError = true;\n        }\n\n        processed += String.fromCodePoint(codePoint);\n        break;\n    }\n  }\n\n  return {\n    string: processed,\n    error: hasError\n  };\n}\n\nvar combiningMarksRegex = /[\\u0300-\\u036F\\u0483-\\u0489\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065F\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0859-\\u085B\\u08E4-\\u0903\\u093A-\\u093C\\u093E-\\u094F\\u0951-\\u0957\\u0962\\u0963\\u0981-\\u0983\\u09BC\\u09BE-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CD\\u09D7\\u09E2\\u09E3\\u0A01-\\u0A03\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81-\\u0A83\\u0ABC\\u0ABE-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AE2\\u0AE3\\u0B01-\\u0B03\\u0B3C\\u0B3E-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B62\\u0B63\\u0B82\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD7\\u0C00-\\u0C03\\u0C3E-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0C81-\\u0C83\\u0CBC\\u0CBE-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CE2\\u0CE3\\u0D01-\\u0D03\\u0D3E-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4D\\u0D57\\u0D62\\u0D63\\u0D82\\u0D83\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DF2\\u0DF3\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EB9\\u0EBB\\u0EBC\\u0EC8-\\u0ECD\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F3E\\u0F3F\\u0F71-\\u0F84\\u0F86\\u0F87\\u0F8D-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102B-\\u103E\\u1056-\\u1059\\u105E-\\u1060\\u1062-\\u1064\\u1067-\\u106D\\u1071-\\u1074\\u1082-\\u108D\\u108F\\u109A-\\u109D\\u135D-\\u135F\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17B4-\\u17D3\\u17DD\\u180B-\\u180D\\u18A9\\u1920-\\u192B\\u1930-\\u193B\\u19B0-\\u19C0\\u19C8\\u19C9\\u1A17-\\u1A1B\\u1A55-\\u1A5E\\u1A60-\\u1A7C\\u1A7F\\u1AB0-\\u1ABE\\u1B00-\\u1B04\\u1B34-\\u1B44\\u1B6B-\\u1B73\\u1B80-\\u1B82\\u1BA1-\\u1BAD\\u1BE6-\\u1BF3\\u1C24-\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE8\\u1CED\\u1CF2-\\u1CF4\\u1CF8\\u1CF9\\u1DC0-\\u1DF5\\u1DFC-\\u1DFF\\u20D0-\\u20F0\\u2CEF-\\u2CF1\\u2D7F\\u2DE0-\\u2DFF\\u302A-\\u302F\\u3099\\u309A\\uA66F-\\uA672\\uA674-\\uA67D\\uA69F\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA823-\\uA827\\uA880\\uA881\\uA8B4-\\uA8C4\\uA8E0-\\uA8F1\\uA926-\\uA92D\\uA947-\\uA953\\uA980-\\uA983\\uA9B3-\\uA9C0\\uA9E5\\uAA29-\\uAA36\\uAA43\\uAA4C\\uAA4D\\uAA7B-\\uAA7D\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uAAEB-\\uAAEF\\uAAF5\\uAAF6\\uABE3-\\uABEA\\uABEC\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE2D]|\\uD800[\\uDDFD\\uDEE0\\uDF76-\\uDF7A]|\\uD802[\\uDE01-\\uDE03\\uDE05\\uDE06\\uDE0C-\\uDE0F\\uDE38-\\uDE3A\\uDE3F\\uDEE5\\uDEE6]|\\uD804[\\uDC00-\\uDC02\\uDC38-\\uDC46\\uDC7F-\\uDC82\\uDCB0-\\uDCBA\\uDD00-\\uDD02\\uDD27-\\uDD34\\uDD73\\uDD80-\\uDD82\\uDDB3-\\uDDC0\\uDE2C-\\uDE37\\uDEDF-\\uDEEA\\uDF01-\\uDF03\\uDF3C\\uDF3E-\\uDF44\\uDF47\\uDF48\\uDF4B-\\uDF4D\\uDF57\\uDF62\\uDF63\\uDF66-\\uDF6C\\uDF70-\\uDF74]|\\uD805[\\uDCB0-\\uDCC3\\uDDAF-\\uDDB5\\uDDB8-\\uDDC0\\uDE30-\\uDE40\\uDEAB-\\uDEB7]|\\uD81A[\\uDEF0-\\uDEF4\\uDF30-\\uDF36]|\\uD81B[\\uDF51-\\uDF7E\\uDF8F-\\uDF92]|\\uD82F[\\uDC9D\\uDC9E]|\\uD834[\\uDD65-\\uDD69\\uDD6D-\\uDD72\\uDD7B-\\uDD82\\uDD85-\\uDD8B\\uDDAA-\\uDDAD\\uDE42-\\uDE44]|\\uD83A[\\uDCD0-\\uDCD6]|\\uDB40[\\uDD00-\\uDDEF]/;\n\nfunction validateLabel(label, processing_option) {\n  if (label.substr(0, 4) === \"xn--\") {\n    label = punycode.toUnicode(label);\n    processing_option = PROCESSING_OPTIONS.NONTRANSITIONAL;\n  }\n\n  var error = false;\n\n  if (normalize(label) !== label ||\n      (label[3] === \"-\" && label[4] === \"-\") ||\n      label[0] === \"-\" || label[label.length - 1] === \"-\" ||\n      label.indexOf(\".\") !== -1 ||\n      label.search(combiningMarksRegex) === 0) {\n    error = true;\n  }\n\n  var len = countSymbols(label);\n  for (var i = 0; i < len; ++i) {\n    var status = findStatus(label.codePointAt(i));\n    if ((processing === PROCESSING_OPTIONS.TRANSITIONAL && status[1] !== \"valid\") ||\n        (processing === PROCESSING_OPTIONS.NONTRANSITIONAL &&\n         status[1] !== \"valid\" && status[1] !== \"deviation\")) {\n      error = true;\n      break;\n    }\n  }\n\n  return {\n    label: label,\n    error: error\n  };\n}\n\nfunction processing(domain_name, useSTD3, processing_option) {\n  var result = mapChars(domain_name, useSTD3, processing_option);\n  result.string = normalize(result.string);\n\n  var labels = result.string.split(\".\");\n  for (var i = 0; i < labels.length; ++i) {\n    try {\n      var validation = validateLabel(labels[i]);\n      labels[i] = validation.label;\n      result.error = result.error || validation.error;\n    } catch(e) {\n      result.error = true;\n    }\n  }\n\n  return {\n    string: labels.join(\".\"),\n    error: result.error\n  };\n}\n\nmodule.exports.toASCII = function(domain_name, useSTD3, processing_option, verifyDnsLength) {\n  var result = processing(domain_name, useSTD3, processing_option);\n  var labels = result.string.split(\".\");\n  labels = labels.map(function(l) {\n    try {\n      return punycode.toASCII(l);\n    } catch(e) {\n      result.error = true;\n      return l;\n    }\n  });\n\n  if (verifyDnsLength) {\n    var total = labels.slice(0, labels.length - 1).join(\".\").length;\n    if (total.length > 253 || total.length === 0) {\n      result.error = true;\n    }\n\n    for (var i=0; i < labels.length; ++i) {\n      if (labels.length > 63 || labels.length === 0) {\n        result.error = true;\n        break;\n      }\n    }\n  }\n\n  if (result.error) return null;\n  return labels.join(\".\");\n};\n\nmodule.exports.toUnicode = function(domain_name, useSTD3) {\n  var result = processing(domain_name, useSTD3, PROCESSING_OPTIONS.NONTRANSITIONAL);\n\n  return {\n    domain: result.string,\n    error: result.error\n  };\n};\n\nmodule.exports.PROCESSING_OPTIONS = PROCESSING_OPTIONS;\n","\"use strict\";\r\nconst punycode = require(\"punycode\");\r\nconst tr46 = require(\"tr46\");\r\n\r\nconst specialSchemes = {\r\n  ftp: 21,\r\n  file: null,\r\n  gopher: 70,\r\n  http: 80,\r\n  https: 443,\r\n  ws: 80,\r\n  wss: 443\r\n};\r\n\r\nconst failure = Symbol(\"failure\");\r\n\r\nfunction countSymbols(str) {\r\n  return punycode.ucs2.decode(str).length;\r\n}\r\n\r\nfunction at(input, idx) {\r\n  const c = input[idx];\r\n  return isNaN(c) ? undefined : String.fromCodePoint(c);\r\n}\r\n\r\nfunction isASCIIDigit(c) {\r\n  return c >= 0x30 && c <= 0x39;\r\n}\r\n\r\nfunction isASCIIAlpha(c) {\r\n  return (c >= 0x41 && c <= 0x5A) || (c >= 0x61 && c <= 0x7A);\r\n}\r\n\r\nfunction isASCIIAlphanumeric(c) {\r\n  return isASCIIAlpha(c) || isASCIIDigit(c);\r\n}\r\n\r\nfunction isASCIIHex(c) {\r\n  return isASCIIDigit(c) || (c >= 0x41 && c <= 0x46) || (c >= 0x61 && c <= 0x66);\r\n}\r\n\r\nfunction isSingleDot(buffer) {\r\n  return buffer === \".\" || buffer.toLowerCase() === \"%2e\";\r\n}\r\n\r\nfunction isDoubleDot(buffer) {\r\n  buffer = buffer.toLowerCase();\r\n  return buffer === \"..\" || buffer === \"%2e.\" || buffer === \".%2e\" || buffer === \"%2e%2e\";\r\n}\r\n\r\nfunction isWindowsDriveLetterCodePoints(cp1, cp2) {\r\n  return isASCIIAlpha(cp1) && (cp2 === 58 || cp2 === 124);\r\n}\r\n\r\nfunction isWindowsDriveLetterString(string) {\r\n  return string.length === 2 && isASCIIAlpha(string.codePointAt(0)) && (string[1] === \":\" || string[1] === \"|\");\r\n}\r\n\r\nfunction isNormalizedWindowsDriveLetterString(string) {\r\n  return string.length === 2 && isASCIIAlpha(string.codePointAt(0)) && string[1] === \":\";\r\n}\r\n\r\nfunction containsForbiddenHostCodePoint(string) {\r\n  return string.search(/\\u0000|\\u0009|\\u000A|\\u000D|\\u0020|#|%|\\/|:|\\?|@|\\[|\\\\|\\]/) !== -1;\r\n}\r\n\r\nfunction containsForbiddenHostCodePointExcludingPercent(string) {\r\n  return string.search(/\\u0000|\\u0009|\\u000A|\\u000D|\\u0020|#|\\/|:|\\?|@|\\[|\\\\|\\]/) !== -1;\r\n}\r\n\r\nfunction isSpecialScheme(scheme) {\r\n  return specialSchemes[scheme] !== undefined;\r\n}\r\n\r\nfunction isSpecial(url) {\r\n  return isSpecialScheme(url.scheme);\r\n}\r\n\r\nfunction defaultPort(scheme) {\r\n  return specialSchemes[scheme];\r\n}\r\n\r\nfunction percentEncode(c) {\r\n  let hex = c.toString(16).toUpperCase();\r\n  if (hex.length === 1) {\r\n    hex = \"0\" + hex;\r\n  }\r\n\r\n  return \"%\" + hex;\r\n}\r\n\r\nfunction utf8PercentEncode(c) {\r\n  const buf = new Buffer(c);\r\n\r\n  let str = \"\";\r\n\r\n  for (let i = 0; i < buf.length; ++i) {\r\n    str += percentEncode(buf[i]);\r\n  }\r\n\r\n  return str;\r\n}\r\n\r\nfunction utf8PercentDecode(str) {\r\n  const input = new Buffer(str);\r\n  const output = [];\r\n  for (let i = 0; i < input.length; ++i) {\r\n    if (input[i] !== 37) {\r\n      output.push(input[i]);\r\n    } else if (input[i] === 37 && isASCIIHex(input[i + 1]) && isASCIIHex(input[i + 2])) {\r\n      output.push(parseInt(input.slice(i + 1, i + 3).toString(), 16));\r\n      i += 2;\r\n    } else {\r\n      output.push(input[i]);\r\n    }\r\n  }\r\n  return new Buffer(output).toString();\r\n}\r\n\r\nfunction isC0ControlPercentEncode(c) {\r\n  return c <= 0x1F || c > 0x7E;\r\n}\r\n\r\nconst extraPathPercentEncodeSet = new Set([32, 34, 35, 60, 62, 63, 96, 123, 125]);\r\nfunction isPathPercentEncode(c) {\r\n  return isC0ControlPercentEncode(c) || extraPathPercentEncodeSet.has(c);\r\n}\r\n\r\nconst extraUserinfoPercentEncodeSet =\r\n  new Set([47, 58, 59, 61, 64, 91, 92, 93, 94, 124]);\r\nfunction isUserinfoPercentEncode(c) {\r\n  return isPathPercentEncode(c) || extraUserinfoPercentEncodeSet.has(c);\r\n}\r\n\r\nfunction percentEncodeChar(c, encodeSetPredicate) {\r\n  const cStr = String.fromCodePoint(c);\r\n\r\n  if (encodeSetPredicate(c)) {\r\n    return utf8PercentEncode(cStr);\r\n  }\r\n\r\n  return cStr;\r\n}\r\n\r\nfunction parseIPv4Number(input) {\r\n  let R = 10;\r\n\r\n  if (input.length >= 2 && input.charAt(0) === \"0\" && input.charAt(1).toLowerCase() === \"x\") {\r\n    input = input.substring(2);\r\n    R = 16;\r\n  } else if (input.length >= 2 && input.charAt(0) === \"0\") {\r\n    input = input.substring(1);\r\n    R = 8;\r\n  }\r\n\r\n  if (input === \"\") {\r\n    return 0;\r\n  }\r\n\r\n  const regex = R === 10 ? /[^0-9]/ : (R === 16 ? /[^0-9A-Fa-f]/ : /[^0-7]/);\r\n  if (regex.test(input)) {\r\n    return failure;\r\n  }\r\n\r\n  return parseInt(input, R);\r\n}\r\n\r\nfunction parseIPv4(input) {\r\n  const parts = input.split(\".\");\r\n  if (parts[parts.length - 1] === \"\") {\r\n    if (parts.length > 1) {\r\n      parts.pop();\r\n    }\r\n  }\r\n\r\n  if (parts.length > 4) {\r\n    return input;\r\n  }\r\n\r\n  const numbers = [];\r\n  for (const part of parts) {\r\n    if (part === \"\") {\r\n      return input;\r\n    }\r\n    const n = parseIPv4Number(part);\r\n    if (n === failure) {\r\n      return input;\r\n    }\r\n\r\n    numbers.push(n);\r\n  }\r\n\r\n  for (let i = 0; i < numbers.length - 1; ++i) {\r\n    if (numbers[i] > 255) {\r\n      return failure;\r\n    }\r\n  }\r\n  if (numbers[numbers.length - 1] >= Math.pow(256, 5 - numbers.length)) {\r\n    return failure;\r\n  }\r\n\r\n  let ipv4 = numbers.pop();\r\n  let counter = 0;\r\n\r\n  for (const n of numbers) {\r\n    ipv4 += n * Math.pow(256, 3 - counter);\r\n    ++counter;\r\n  }\r\n\r\n  return ipv4;\r\n}\r\n\r\nfunction serializeIPv4(address) {\r\n  let output = \"\";\r\n  let n = address;\r\n\r\n  for (let i = 1; i <= 4; ++i) {\r\n    output = String(n % 256) + output;\r\n    if (i !== 4) {\r\n      output = \".\" + output;\r\n    }\r\n    n = Math.floor(n / 256);\r\n  }\r\n\r\n  return output;\r\n}\r\n\r\nfunction parseIPv6(input) {\r\n  const address = [0, 0, 0, 0, 0, 0, 0, 0];\r\n  let pieceIndex = 0;\r\n  let compress = null;\r\n  let pointer = 0;\r\n\r\n  input = punycode.ucs2.decode(input);\r\n\r\n  if (input[pointer] === 58) {\r\n    if (input[pointer + 1] !== 58) {\r\n      return failure;\r\n    }\r\n\r\n    pointer += 2;\r\n    ++pieceIndex;\r\n    compress = pieceIndex;\r\n  }\r\n\r\n  while (pointer < input.length) {\r\n    if (pieceIndex === 8) {\r\n      return failure;\r\n    }\r\n\r\n    if (input[pointer] === 58) {\r\n      if (compress !== null) {\r\n        return failure;\r\n      }\r\n      ++pointer;\r\n      ++pieceIndex;\r\n      compress = pieceIndex;\r\n      continue;\r\n    }\r\n\r\n    let value = 0;\r\n    let length = 0;\r\n\r\n    while (length < 4 && isASCIIHex(input[pointer])) {\r\n      value = value * 0x10 + parseInt(at(input, pointer), 16);\r\n      ++pointer;\r\n      ++length;\r\n    }\r\n\r\n    if (input[pointer] === 46) {\r\n      if (length === 0) {\r\n        return failure;\r\n      }\r\n\r\n      pointer -= length;\r\n\r\n      if (pieceIndex > 6) {\r\n        return failure;\r\n      }\r\n\r\n      let numbersSeen = 0;\r\n\r\n      while (input[pointer] !== undefined) {\r\n        let ipv4Piece = null;\r\n\r\n        if (numbersSeen > 0) {\r\n          if (input[pointer] === 46 && numbersSeen < 4) {\r\n            ++pointer;\r\n          } else {\r\n            return failure;\r\n          }\r\n        }\r\n\r\n        if (!isASCIIDigit(input[pointer])) {\r\n          return failure;\r\n        }\r\n\r\n        while (isASCIIDigit(input[pointer])) {\r\n          const number = parseInt(at(input, pointer));\r\n          if (ipv4Piece === null) {\r\n            ipv4Piece = number;\r\n          } else if (ipv4Piece === 0) {\r\n            return failure;\r\n          } else {\r\n            ipv4Piece = ipv4Piece * 10 + number;\r\n          }\r\n          if (ipv4Piece > 255) {\r\n            return failure;\r\n          }\r\n          ++pointer;\r\n        }\r\n\r\n        address[pieceIndex] = address[pieceIndex] * 0x100 + ipv4Piece;\r\n\r\n        ++numbersSeen;\r\n\r\n        if (numbersSeen === 2 || numbersSeen === 4) {\r\n          ++pieceIndex;\r\n        }\r\n      }\r\n\r\n      if (numbersSeen !== 4) {\r\n        return failure;\r\n      }\r\n\r\n      break;\r\n    } else if (input[pointer] === 58) {\r\n      ++pointer;\r\n      if (input[pointer] === undefined) {\r\n        return failure;\r\n      }\r\n    } else if (input[pointer] !== undefined) {\r\n      return failure;\r\n    }\r\n\r\n    address[pieceIndex] = value;\r\n    ++pieceIndex;\r\n  }\r\n\r\n  if (compress !== null) {\r\n    let swaps = pieceIndex - compress;\r\n    pieceIndex = 7;\r\n    while (pieceIndex !== 0 && swaps > 0) {\r\n      const temp = address[compress + swaps - 1];\r\n      address[compress + swaps - 1] = address[pieceIndex];\r\n      address[pieceIndex] = temp;\r\n      --pieceIndex;\r\n      --swaps;\r\n    }\r\n  } else if (compress === null && pieceIndex !== 8) {\r\n    return failure;\r\n  }\r\n\r\n  return address;\r\n}\r\n\r\nfunction serializeIPv6(address) {\r\n  let output = \"\";\r\n  const seqResult = findLongestZeroSequence(address);\r\n  const compress = seqResult.idx;\r\n  let ignore0 = false;\r\n\r\n  for (let pieceIndex = 0; pieceIndex <= 7; ++pieceIndex) {\r\n    if (ignore0 && address[pieceIndex] === 0) {\r\n      continue;\r\n    } else if (ignore0) {\r\n      ignore0 = false;\r\n    }\r\n\r\n    if (compress === pieceIndex) {\r\n      const separator = pieceIndex === 0 ? \"::\" : \":\";\r\n      output += separator;\r\n      ignore0 = true;\r\n      continue;\r\n    }\r\n\r\n    output += address[pieceIndex].toString(16);\r\n\r\n    if (pieceIndex !== 7) {\r\n      output += \":\";\r\n    }\r\n  }\r\n\r\n  return output;\r\n}\r\n\r\nfunction parseHost(input, isSpecialArg) {\r\n  if (input[0] === \"[\") {\r\n    if (input[input.length - 1] !== \"]\") {\r\n      return failure;\r\n    }\r\n\r\n    return parseIPv6(input.substring(1, input.length - 1));\r\n  }\r\n\r\n  if (!isSpecialArg) {\r\n    return parseOpaqueHost(input);\r\n  }\r\n\r\n  const domain = utf8PercentDecode(input);\r\n  const asciiDomain = tr46.toASCII(domain, false, tr46.PROCESSING_OPTIONS.NONTRANSITIONAL, false);\r\n  if (asciiDomain === null) {\r\n    return failure;\r\n  }\r\n\r\n  if (containsForbiddenHostCodePoint(asciiDomain)) {\r\n    return failure;\r\n  }\r\n\r\n  const ipv4Host = parseIPv4(asciiDomain);\r\n  if (typeof ipv4Host === \"number\" || ipv4Host === failure) {\r\n    return ipv4Host;\r\n  }\r\n\r\n  return asciiDomain;\r\n}\r\n\r\nfunction parseOpaqueHost(input) {\r\n  if (containsForbiddenHostCodePointExcludingPercent(input)) {\r\n    return failure;\r\n  }\r\n\r\n  let output = \"\";\r\n  const decoded = punycode.ucs2.decode(input);\r\n  for (let i = 0; i < decoded.length; ++i) {\r\n    output += percentEncodeChar(decoded[i], isC0ControlPercentEncode);\r\n  }\r\n  return output;\r\n}\r\n\r\nfunction findLongestZeroSequence(arr) {\r\n  let maxIdx = null;\r\n  let maxLen = 1; // only find elements > 1\r\n  let currStart = null;\r\n  let currLen = 0;\r\n\r\n  for (let i = 0; i < arr.length; ++i) {\r\n    if (arr[i] !== 0) {\r\n      if (currLen > maxLen) {\r\n        maxIdx = currStart;\r\n        maxLen = currLen;\r\n      }\r\n\r\n      currStart = null;\r\n      currLen = 0;\r\n    } else {\r\n      if (currStart === null) {\r\n        currStart = i;\r\n      }\r\n      ++currLen;\r\n    }\r\n  }\r\n\r\n  // if trailing zeros\r\n  if (currLen > maxLen) {\r\n    maxIdx = currStart;\r\n    maxLen = currLen;\r\n  }\r\n\r\n  return {\r\n    idx: maxIdx,\r\n    len: maxLen\r\n  };\r\n}\r\n\r\nfunction serializeHost(host) {\r\n  if (typeof host === \"number\") {\r\n    return serializeIPv4(host);\r\n  }\r\n\r\n  // IPv6 serializer\r\n  if (host instanceof Array) {\r\n    return \"[\" + serializeIPv6(host) + \"]\";\r\n  }\r\n\r\n  return host;\r\n}\r\n\r\nfunction trimControlChars(url) {\r\n  return url.replace(/^[\\u0000-\\u001F\\u0020]+|[\\u0000-\\u001F\\u0020]+$/g, \"\");\r\n}\r\n\r\nfunction trimTabAndNewline(url) {\r\n  return url.replace(/\\u0009|\\u000A|\\u000D/g, \"\");\r\n}\r\n\r\nfunction shortenPath(url) {\r\n  const path = url.path;\r\n  if (path.length === 0) {\r\n    return;\r\n  }\r\n  if (url.scheme === \"file\" && path.length === 1 && isNormalizedWindowsDriveLetter(path[0])) {\r\n    return;\r\n  }\r\n\r\n  path.pop();\r\n}\r\n\r\nfunction includesCredentials(url) {\r\n  return url.username !== \"\" || url.password !== \"\";\r\n}\r\n\r\nfunction cannotHaveAUsernamePasswordPort(url) {\r\n  return url.host === null || url.host === \"\" || url.cannotBeABaseURL || url.scheme === \"file\";\r\n}\r\n\r\nfunction isNormalizedWindowsDriveLetter(string) {\r\n  return /^[A-Za-z]:$/.test(string);\r\n}\r\n\r\nfunction URLStateMachine(input, base, encodingOverride, url, stateOverride) {\r\n  this.pointer = 0;\r\n  this.input = input;\r\n  this.base = base || null;\r\n  this.encodingOverride = encodingOverride || \"utf-8\";\r\n  this.stateOverride = stateOverride;\r\n  this.url = url;\r\n  this.failure = false;\r\n  this.parseError = false;\r\n\r\n  if (!this.url) {\r\n    this.url = {\r\n      scheme: \"\",\r\n      username: \"\",\r\n      password: \"\",\r\n      host: null,\r\n      port: null,\r\n      path: [],\r\n      query: null,\r\n      fragment: null,\r\n\r\n      cannotBeABaseURL: false\r\n    };\r\n\r\n    const res = trimControlChars(this.input);\r\n    if (res !== this.input) {\r\n      this.parseError = true;\r\n    }\r\n    this.input = res;\r\n  }\r\n\r\n  const res = trimTabAndNewline(this.input);\r\n  if (res !== this.input) {\r\n    this.parseError = true;\r\n  }\r\n  this.input = res;\r\n\r\n  this.state = stateOverride || \"scheme start\";\r\n\r\n  this.buffer = \"\";\r\n  this.atFlag = false;\r\n  this.arrFlag = false;\r\n  this.passwordTokenSeenFlag = false;\r\n\r\n  this.input = punycode.ucs2.decode(this.input);\r\n\r\n  for (; this.pointer <= this.input.length; ++this.pointer) {\r\n    const c = this.input[this.pointer];\r\n    const cStr = isNaN(c) ? undefined : String.fromCodePoint(c);\r\n\r\n    // exec state machine\r\n    const ret = this[\"parse \" + this.state](c, cStr);\r\n    if (!ret) {\r\n      break; // terminate algorithm\r\n    } else if (ret === failure) {\r\n      this.failure = true;\r\n      break;\r\n    }\r\n  }\r\n}\r\n\r\nURLStateMachine.prototype[\"parse scheme start\"] = function parseSchemeStart(c, cStr) {\r\n  if (isASCIIAlpha(c)) {\r\n    this.buffer += cStr.toLowerCase();\r\n    this.state = \"scheme\";\r\n  } else if (!this.stateOverride) {\r\n    this.state = \"no scheme\";\r\n    --this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    return failure;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse scheme\"] = function parseScheme(c, cStr) {\r\n  if (isASCIIAlphanumeric(c) || c === 43 || c === 45 || c === 46) {\r\n    this.buffer += cStr.toLowerCase();\r\n  } else if (c === 58) {\r\n    if (this.stateOverride) {\r\n      if (isSpecial(this.url) && !isSpecialScheme(this.buffer)) {\r\n        return false;\r\n      }\r\n\r\n      if (!isSpecial(this.url) && isSpecialScheme(this.buffer)) {\r\n        return false;\r\n      }\r\n\r\n      if ((includesCredentials(this.url) || this.url.port !== null) && this.buffer === \"file\") {\r\n        return false;\r\n      }\r\n\r\n      if (this.url.scheme === \"file\" && (this.url.host === \"\" || this.url.host === null)) {\r\n        return false;\r\n      }\r\n    }\r\n    this.url.scheme = this.buffer;\r\n    this.buffer = \"\";\r\n    if (this.stateOverride) {\r\n      return false;\r\n    }\r\n    if (this.url.scheme === \"file\") {\r\n      if (this.input[this.pointer + 1] !== 47 || this.input[this.pointer + 2] !== 47) {\r\n        this.parseError = true;\r\n      }\r\n      this.state = \"file\";\r\n    } else if (isSpecial(this.url) && this.base !== null && this.base.scheme === this.url.scheme) {\r\n      this.state = \"special relative or authority\";\r\n    } else if (isSpecial(this.url)) {\r\n      this.state = \"special authority slashes\";\r\n    } else if (this.input[this.pointer + 1] === 47) {\r\n      this.state = \"path or authority\";\r\n      ++this.pointer;\r\n    } else {\r\n      this.url.cannotBeABaseURL = true;\r\n      this.url.path.push(\"\");\r\n      this.state = \"cannot-be-a-base-URL path\";\r\n    }\r\n  } else if (!this.stateOverride) {\r\n    this.buffer = \"\";\r\n    this.state = \"no scheme\";\r\n    this.pointer = -1;\r\n  } else {\r\n    this.parseError = true;\r\n    return failure;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse no scheme\"] = function parseNoScheme(c) {\r\n  if (this.base === null || (this.base.cannotBeABaseURL && c !== 35)) {\r\n    return failure;\r\n  } else if (this.base.cannotBeABaseURL && c === 35) {\r\n    this.url.scheme = this.base.scheme;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = this.base.query;\r\n    this.url.fragment = \"\";\r\n    this.url.cannotBeABaseURL = true;\r\n    this.state = \"fragment\";\r\n  } else if (this.base.scheme === \"file\") {\r\n    this.state = \"file\";\r\n    --this.pointer;\r\n  } else {\r\n    this.state = \"relative\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse special relative or authority\"] = function parseSpecialRelativeOrAuthority(c) {\r\n  if (c === 47 && this.input[this.pointer + 1] === 47) {\r\n    this.state = \"special authority ignore slashes\";\r\n    ++this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    this.state = \"relative\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse path or authority\"] = function parsePathOrAuthority(c) {\r\n  if (c === 47) {\r\n    this.state = \"authority\";\r\n  } else {\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse relative\"] = function parseRelative(c) {\r\n  this.url.scheme = this.base.scheme;\r\n  if (isNaN(c)) {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = this.base.query;\r\n  } else if (c === 47) {\r\n    this.state = \"relative slash\";\r\n  } else if (c === 63) {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = \"\";\r\n    this.state = \"query\";\r\n  } else if (c === 35) {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = this.base.query;\r\n    this.url.fragment = \"\";\r\n    this.state = \"fragment\";\r\n  } else if (isSpecial(this.url) && c === 92) {\r\n    this.parseError = true;\r\n    this.state = \"relative slash\";\r\n  } else {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice(0, this.base.path.length - 1);\r\n\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse relative slash\"] = function parseRelativeSlash(c) {\r\n  if (isSpecial(this.url) && (c === 47 || c === 92)) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"special authority ignore slashes\";\r\n  } else if (c === 47) {\r\n    this.state = \"authority\";\r\n  } else {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse special authority slashes\"] = function parseSpecialAuthoritySlashes(c) {\r\n  if (c === 47 && this.input[this.pointer + 1] === 47) {\r\n    this.state = \"special authority ignore slashes\";\r\n    ++this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    this.state = \"special authority ignore slashes\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse special authority ignore slashes\"] = function parseSpecialAuthorityIgnoreSlashes(c) {\r\n  if (c !== 47 && c !== 92) {\r\n    this.state = \"authority\";\r\n    --this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse authority\"] = function parseAuthority(c, cStr) {\r\n  if (c === 64) {\r\n    this.parseError = true;\r\n    if (this.atFlag) {\r\n      this.buffer = \"%40\" + this.buffer;\r\n    }\r\n    this.atFlag = true;\r\n\r\n    // careful, this is based on buffer and has its own pointer (this.pointer != pointer) and inner chars\r\n    const len = countSymbols(this.buffer);\r\n    for (let pointer = 0; pointer < len; ++pointer) {\r\n      const codePoint = this.buffer.codePointAt(pointer);\r\n\r\n      if (codePoint === 58 && !this.passwordTokenSeenFlag) {\r\n        this.passwordTokenSeenFlag = true;\r\n        continue;\r\n      }\r\n      const encodedCodePoints = percentEncodeChar(codePoint, isUserinfoPercentEncode);\r\n      if (this.passwordTokenSeenFlag) {\r\n        this.url.password += encodedCodePoints;\r\n      } else {\r\n        this.url.username += encodedCodePoints;\r\n      }\r\n    }\r\n    this.buffer = \"\";\r\n  } else if (isNaN(c) || c === 47 || c === 63 || c === 35 ||\r\n             (isSpecial(this.url) && c === 92)) {\r\n    if (this.atFlag && this.buffer === \"\") {\r\n      this.parseError = true;\r\n      return failure;\r\n    }\r\n    this.pointer -= countSymbols(this.buffer) + 1;\r\n    this.buffer = \"\";\r\n    this.state = \"host\";\r\n  } else {\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse hostname\"] =\r\nURLStateMachine.prototype[\"parse host\"] = function parseHostName(c, cStr) {\r\n  if (this.stateOverride && this.url.scheme === \"file\") {\r\n    --this.pointer;\r\n    this.state = \"file host\";\r\n  } else if (c === 58 && !this.arrFlag) {\r\n    if (this.buffer === \"\") {\r\n      this.parseError = true;\r\n      return failure;\r\n    }\r\n\r\n    const host = parseHost(this.buffer, isSpecial(this.url));\r\n    if (host === failure) {\r\n      return failure;\r\n    }\r\n\r\n    this.url.host = host;\r\n    this.buffer = \"\";\r\n    this.state = \"port\";\r\n    if (this.stateOverride === \"hostname\") {\r\n      return false;\r\n    }\r\n  } else if (isNaN(c) || c === 47 || c === 63 || c === 35 ||\r\n             (isSpecial(this.url) && c === 92)) {\r\n    --this.pointer;\r\n    if (isSpecial(this.url) && this.buffer === \"\") {\r\n      this.parseError = true;\r\n      return failure;\r\n    } else if (this.stateOverride && this.buffer === \"\" &&\r\n               (includesCredentials(this.url) || this.url.port !== null)) {\r\n      this.parseError = true;\r\n      return false;\r\n    }\r\n\r\n    const host = parseHost(this.buffer, isSpecial(this.url));\r\n    if (host === failure) {\r\n      return failure;\r\n    }\r\n\r\n    this.url.host = host;\r\n    this.buffer = \"\";\r\n    this.state = \"path start\";\r\n    if (this.stateOverride) {\r\n      return false;\r\n    }\r\n  } else {\r\n    if (c === 91) {\r\n      this.arrFlag = true;\r\n    } else if (c === 93) {\r\n      this.arrFlag = false;\r\n    }\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse port\"] = function parsePort(c, cStr) {\r\n  if (isASCIIDigit(c)) {\r\n    this.buffer += cStr;\r\n  } else if (isNaN(c) || c === 47 || c === 63 || c === 35 ||\r\n             (isSpecial(this.url) && c === 92) ||\r\n             this.stateOverride) {\r\n    if (this.buffer !== \"\") {\r\n      const port = parseInt(this.buffer);\r\n      if (port > Math.pow(2, 16) - 1) {\r\n        this.parseError = true;\r\n        return failure;\r\n      }\r\n      this.url.port = port === defaultPort(this.url.scheme) ? null : port;\r\n      this.buffer = \"\";\r\n    }\r\n    if (this.stateOverride) {\r\n      return false;\r\n    }\r\n    this.state = \"path start\";\r\n    --this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    return failure;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nconst fileOtherwiseCodePoints = new Set([47, 92, 63, 35]);\r\n\r\nURLStateMachine.prototype[\"parse file\"] = function parseFile(c) {\r\n  this.url.scheme = \"file\";\r\n\r\n  if (c === 47 || c === 92) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"file slash\";\r\n  } else if (this.base !== null && this.base.scheme === \"file\") {\r\n    if (isNaN(c)) {\r\n      this.url.host = this.base.host;\r\n      this.url.path = this.base.path.slice();\r\n      this.url.query = this.base.query;\r\n    } else if (c === 63) {\r\n      this.url.host = this.base.host;\r\n      this.url.path = this.base.path.slice();\r\n      this.url.query = \"\";\r\n      this.state = \"query\";\r\n    } else if (c === 35) {\r\n      this.url.host = this.base.host;\r\n      this.url.path = this.base.path.slice();\r\n      this.url.query = this.base.query;\r\n      this.url.fragment = \"\";\r\n      this.state = \"fragment\";\r\n    } else {\r\n      if (this.input.length - this.pointer - 1 === 0 || // remaining consists of 0 code points\r\n          !isWindowsDriveLetterCodePoints(c, this.input[this.pointer + 1]) ||\r\n          (this.input.length - this.pointer - 1 >= 2 && // remaining has at least 2 code points\r\n           !fileOtherwiseCodePoints.has(this.input[this.pointer + 2]))) {\r\n        this.url.host = this.base.host;\r\n        this.url.path = this.base.path.slice();\r\n        shortenPath(this.url);\r\n      } else {\r\n        this.parseError = true;\r\n      }\r\n\r\n      this.state = \"path\";\r\n      --this.pointer;\r\n    }\r\n  } else {\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse file slash\"] = function parseFileSlash(c) {\r\n  if (c === 47 || c === 92) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"file host\";\r\n  } else {\r\n    if (this.base !== null && this.base.scheme === \"file\") {\r\n      if (isNormalizedWindowsDriveLetterString(this.base.path[0])) {\r\n        this.url.path.push(this.base.path[0]);\r\n      } else {\r\n        this.url.host = this.base.host;\r\n      }\r\n    }\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse file host\"] = function parseFileHost(c, cStr) {\r\n  if (isNaN(c) || c === 47 || c === 92 || c === 63 || c === 35) {\r\n    --this.pointer;\r\n    if (!this.stateOverride && isWindowsDriveLetterString(this.buffer)) {\r\n      this.parseError = true;\r\n      this.state = \"path\";\r\n    } else if (this.buffer === \"\") {\r\n      this.url.host = \"\";\r\n      if (this.stateOverride) {\r\n        return false;\r\n      }\r\n      this.state = \"path start\";\r\n    } else {\r\n      let host = parseHost(this.buffer, isSpecial(this.url));\r\n      if (host === failure) {\r\n        return failure;\r\n      }\r\n      if (host === \"localhost\") {\r\n        host = \"\";\r\n      }\r\n      this.url.host = host;\r\n\r\n      if (this.stateOverride) {\r\n        return false;\r\n      }\r\n\r\n      this.buffer = \"\";\r\n      this.state = \"path start\";\r\n    }\r\n  } else {\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse path start\"] = function parsePathStart(c) {\r\n  if (isSpecial(this.url)) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"path\";\r\n\r\n    if (c !== 47 && c !== 92) {\r\n      --this.pointer;\r\n    }\r\n  } else if (!this.stateOverride && c === 63) {\r\n    this.url.query = \"\";\r\n    this.state = \"query\";\r\n  } else if (!this.stateOverride && c === 35) {\r\n    this.url.fragment = \"\";\r\n    this.state = \"fragment\";\r\n  } else if (c !== undefined) {\r\n    this.state = \"path\";\r\n    if (c !== 47) {\r\n      --this.pointer;\r\n    }\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse path\"] = function parsePath(c) {\r\n  if (isNaN(c) || c === 47 || (isSpecial(this.url) && c === 92) ||\r\n      (!this.stateOverride && (c === 63 || c === 35))) {\r\n    if (isSpecial(this.url) && c === 92) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    if (isDoubleDot(this.buffer)) {\r\n      shortenPath(this.url);\r\n      if (c !== 47 && !(isSpecial(this.url) && c === 92)) {\r\n        this.url.path.push(\"\");\r\n      }\r\n    } else if (isSingleDot(this.buffer) && c !== 47 &&\r\n               !(isSpecial(this.url) && c === 92)) {\r\n      this.url.path.push(\"\");\r\n    } else if (!isSingleDot(this.buffer)) {\r\n      if (this.url.scheme === \"file\" && this.url.path.length === 0 && isWindowsDriveLetterString(this.buffer)) {\r\n        if (this.url.host !== \"\" && this.url.host !== null) {\r\n          this.parseError = true;\r\n          this.url.host = \"\";\r\n        }\r\n        this.buffer = this.buffer[0] + \":\";\r\n      }\r\n      this.url.path.push(this.buffer);\r\n    }\r\n    this.buffer = \"\";\r\n    if (this.url.scheme === \"file\" && (c === undefined || c === 63 || c === 35)) {\r\n      while (this.url.path.length > 1 && this.url.path[0] === \"\") {\r\n        this.parseError = true;\r\n        this.url.path.shift();\r\n      }\r\n    }\r\n    if (c === 63) {\r\n      this.url.query = \"\";\r\n      this.state = \"query\";\r\n    }\r\n    if (c === 35) {\r\n      this.url.fragment = \"\";\r\n      this.state = \"fragment\";\r\n    }\r\n  } else {\r\n    // TODO: If c is not a URL code point and not \"%\", parse error.\r\n\r\n    if (c === 37 &&\r\n      (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n        !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    this.buffer += percentEncodeChar(c, isPathPercentEncode);\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse cannot-be-a-base-URL path\"] = function parseCannotBeABaseURLPath(c) {\r\n  if (c === 63) {\r\n    this.url.query = \"\";\r\n    this.state = \"query\";\r\n  } else if (c === 35) {\r\n    this.url.fragment = \"\";\r\n    this.state = \"fragment\";\r\n  } else {\r\n    // TODO: Add: not a URL code point\r\n    if (!isNaN(c) && c !== 37) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    if (c === 37 &&\r\n        (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n         !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    if (!isNaN(c)) {\r\n      this.url.path[0] = this.url.path[0] + percentEncodeChar(c, isC0ControlPercentEncode);\r\n    }\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse query\"] = function parseQuery(c, cStr) {\r\n  if (isNaN(c) || (!this.stateOverride && c === 35)) {\r\n    if (!isSpecial(this.url) || this.url.scheme === \"ws\" || this.url.scheme === \"wss\") {\r\n      this.encodingOverride = \"utf-8\";\r\n    }\r\n\r\n    const buffer = new Buffer(this.buffer); // TODO: Use encoding override instead\r\n    for (let i = 0; i < buffer.length; ++i) {\r\n      if (buffer[i] < 0x21 || buffer[i] > 0x7E || buffer[i] === 0x22 || buffer[i] === 0x23 ||\r\n          buffer[i] === 0x3C || buffer[i] === 0x3E) {\r\n        this.url.query += percentEncode(buffer[i]);\r\n      } else {\r\n        this.url.query += String.fromCodePoint(buffer[i]);\r\n      }\r\n    }\r\n\r\n    this.buffer = \"\";\r\n    if (c === 35) {\r\n      this.url.fragment = \"\";\r\n      this.state = \"fragment\";\r\n    }\r\n  } else {\r\n    // TODO: If c is not a URL code point and not \"%\", parse error.\r\n    if (c === 37 &&\r\n      (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n        !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse fragment\"] = function parseFragment(c) {\r\n  if (isNaN(c)) { // do nothing\r\n  } else if (c === 0x0) {\r\n    this.parseError = true;\r\n  } else {\r\n    // TODO: If c is not a URL code point and not \"%\", parse error.\r\n    if (c === 37 &&\r\n      (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n        !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    this.url.fragment += percentEncodeChar(c, isC0ControlPercentEncode);\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nfunction serializeURL(url, excludeFragment) {\r\n  let output = url.scheme + \":\";\r\n  if (url.host !== null) {\r\n    output += \"//\";\r\n\r\n    if (url.username !== \"\" || url.password !== \"\") {\r\n      output += url.username;\r\n      if (url.password !== \"\") {\r\n        output += \":\" + url.password;\r\n      }\r\n      output += \"@\";\r\n    }\r\n\r\n    output += serializeHost(url.host);\r\n\r\n    if (url.port !== null) {\r\n      output += \":\" + url.port;\r\n    }\r\n  } else if (url.host === null && url.scheme === \"file\") {\r\n    output += \"//\";\r\n  }\r\n\r\n  if (url.cannotBeABaseURL) {\r\n    output += url.path[0];\r\n  } else {\r\n    for (const string of url.path) {\r\n      output += \"/\" + string;\r\n    }\r\n  }\r\n\r\n  if (url.query !== null) {\r\n    output += \"?\" + url.query;\r\n  }\r\n\r\n  if (!excludeFragment && url.fragment !== null) {\r\n    output += \"#\" + url.fragment;\r\n  }\r\n\r\n  return output;\r\n}\r\n\r\nfunction serializeOrigin(tuple) {\r\n  let result = tuple.scheme + \"://\";\r\n  result += serializeHost(tuple.host);\r\n\r\n  if (tuple.port !== null) {\r\n    result += \":\" + tuple.port;\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nmodule.exports.serializeURL = serializeURL;\r\n\r\nmodule.exports.serializeURLOrigin = function (url) {\r\n  // https://url.spec.whatwg.org/#concept-url-origin\r\n  switch (url.scheme) {\r\n    case \"blob\":\r\n      try {\r\n        return module.exports.serializeURLOrigin(module.exports.parseURL(url.path[0]));\r\n      } catch (e) {\r\n        // serializing an opaque origin returns \"null\"\r\n        return \"null\";\r\n      }\r\n    case \"ftp\":\r\n    case \"gopher\":\r\n    case \"http\":\r\n    case \"https\":\r\n    case \"ws\":\r\n    case \"wss\":\r\n      return serializeOrigin({\r\n        scheme: url.scheme,\r\n        host: url.host,\r\n        port: url.port\r\n      });\r\n    case \"file\":\r\n      // spec says \"exercise to the reader\", chrome says \"file://\"\r\n      return \"file://\";\r\n    default:\r\n      // serializing an opaque origin returns \"null\"\r\n      return \"null\";\r\n  }\r\n};\r\n\r\nmodule.exports.basicURLParse = function (input, options) {\r\n  if (options === undefined) {\r\n    options = {};\r\n  }\r\n\r\n  const usm = new URLStateMachine(input, options.baseURL, options.encodingOverride, options.url, options.stateOverride);\r\n  if (usm.failure) {\r\n    return \"failure\";\r\n  }\r\n\r\n  return usm.url;\r\n};\r\n\r\nmodule.exports.setTheUsername = function (url, username) {\r\n  url.username = \"\";\r\n  const decoded = punycode.ucs2.decode(username);\r\n  for (let i = 0; i < decoded.length; ++i) {\r\n    url.username += percentEncodeChar(decoded[i], isUserinfoPercentEncode);\r\n  }\r\n};\r\n\r\nmodule.exports.setThePassword = function (url, password) {\r\n  url.password = \"\";\r\n  const decoded = punycode.ucs2.decode(password);\r\n  for (let i = 0; i < decoded.length; ++i) {\r\n    url.password += percentEncodeChar(decoded[i], isUserinfoPercentEncode);\r\n  }\r\n};\r\n\r\nmodule.exports.serializeHost = serializeHost;\r\n\r\nmodule.exports.cannotHaveAUsernamePasswordPort = cannotHaveAUsernamePasswordPort;\r\n\r\nmodule.exports.serializeInteger = function (integer) {\r\n  return String(integer);\r\n};\r\n\r\nmodule.exports.parseURL = function (input, options) {\r\n  if (options === undefined) {\r\n    options = {};\r\n  }\r\n\r\n  // We don't handle blobs, so this just delegates:\r\n  return module.exports.basicURLParse(input, { baseURL: options.baseURL, encodingOverride: options.encodingOverride });\r\n};\r\n","\"use strict\";\nconst usm = require(\"./url-state-machine\");\n\nexports.implementation = class URLImpl {\n  constructor(constructorArgs) {\n    const url = constructorArgs[0];\n    const base = constructorArgs[1];\n\n    let parsedBase = null;\n    if (base !== undefined) {\n      parsedBase = usm.basicURLParse(base);\n      if (parsedBase === \"failure\") {\n        throw new TypeError(\"Invalid base URL\");\n      }\n    }\n\n    const parsedURL = usm.basicURLParse(url, { baseURL: parsedBase });\n    if (parsedURL === \"failure\") {\n      throw new TypeError(\"Invalid URL\");\n    }\n\n    this._url = parsedURL;\n\n    // TODO: query stuff\n  }\n\n  get href() {\n    return usm.serializeURL(this._url);\n  }\n\n  set href(v) {\n    const parsedURL = usm.basicURLParse(v);\n    if (parsedURL === \"failure\") {\n      throw new TypeError(\"Invalid URL\");\n    }\n\n    this._url = parsedURL;\n  }\n\n  get origin() {\n    return usm.serializeURLOrigin(this._url);\n  }\n\n  get protocol() {\n    return this._url.scheme + \":\";\n  }\n\n  set protocol(v) {\n    usm.basicURLParse(v + \":\", { url: this._url, stateOverride: \"scheme start\" });\n  }\n\n  get username() {\n    return this._url.username;\n  }\n\n  set username(v) {\n    if (usm.cannotHaveAUsernamePasswordPort(this._url)) {\n      return;\n    }\n\n    usm.setTheUsername(this._url, v);\n  }\n\n  get password() {\n    return this._url.password;\n  }\n\n  set password(v) {\n    if (usm.cannotHaveAUsernamePasswordPort(this._url)) {\n      return;\n    }\n\n    usm.setThePassword(this._url, v);\n  }\n\n  get host() {\n    const url = this._url;\n\n    if (url.host === null) {\n      return \"\";\n    }\n\n    if (url.port === null) {\n      return usm.serializeHost(url.host);\n    }\n\n    return usm.serializeHost(url.host) + \":\" + usm.serializeInteger(url.port);\n  }\n\n  set host(v) {\n    if (this._url.cannotBeABaseURL) {\n      return;\n    }\n\n    usm.basicURLParse(v, { url: this._url, stateOverride: \"host\" });\n  }\n\n  get hostname() {\n    if (this._url.host === null) {\n      return \"\";\n    }\n\n    return usm.serializeHost(this._url.host);\n  }\n\n  set hostname(v) {\n    if (this._url.cannotBeABaseURL) {\n      return;\n    }\n\n    usm.basicURLParse(v, { url: this._url, stateOverride: \"hostname\" });\n  }\n\n  get port() {\n    if (this._url.port === null) {\n      return \"\";\n    }\n\n    return usm.serializeInteger(this._url.port);\n  }\n\n  set port(v) {\n    if (usm.cannotHaveAUsernamePasswordPort(this._url)) {\n      return;\n    }\n\n    if (v === \"\") {\n      this._url.port = null;\n    } else {\n      usm.basicURLParse(v, { url: this._url, stateOverride: \"port\" });\n    }\n  }\n\n  get pathname() {\n    if (this._url.cannotBeABaseURL) {\n      return this._url.path[0];\n    }\n\n    if (this._url.path.length === 0) {\n      return \"\";\n    }\n\n    return \"/\" + this._url.path.join(\"/\");\n  }\n\n  set pathname(v) {\n    if (this._url.cannotBeABaseURL) {\n      return;\n    }\n\n    this._url.path = [];\n    usm.basicURLParse(v, { url: this._url, stateOverride: \"path start\" });\n  }\n\n  get search() {\n    if (this._url.query === null || this._url.query === \"\") {\n      return \"\";\n    }\n\n    return \"?\" + this._url.query;\n  }\n\n  set search(v) {\n    // TODO: query stuff\n\n    const url = this._url;\n\n    if (v === \"\") {\n      url.query = null;\n      return;\n    }\n\n    const input = v[0] === \"?\" ? v.substring(1) : v;\n    url.query = \"\";\n    usm.basicURLParse(input, { url, stateOverride: \"query\" });\n  }\n\n  get hash() {\n    if (this._url.fragment === null || this._url.fragment === \"\") {\n      return \"\";\n    }\n\n    return \"#\" + this._url.fragment;\n  }\n\n  set hash(v) {\n    if (v === \"\") {\n      this._url.fragment = null;\n      return;\n    }\n\n    const input = v[0] === \"#\" ? v.substring(1) : v;\n    this._url.fragment = \"\";\n    usm.basicURLParse(input, { url: this._url, stateOverride: \"fragment\" });\n  }\n\n  toJSON() {\n    return this.href;\n  }\n};\n","\"use strict\";\n\nconst conversions = require(\"webidl-conversions\");\nconst utils = require(\"./utils.js\");\nconst Impl = require(\".//URL-impl.js\");\n\nconst impl = utils.implSymbol;\n\nfunction URL(url) {\n  if (!this || this[impl] || !(this instanceof URL)) {\n    throw new TypeError(\"Failed to construct 'URL': Please use the 'new' operator, this DOM object constructor cannot be called as a function.\");\n  }\n  if (arguments.length < 1) {\n    throw new TypeError(\"Failed to construct 'URL': 1 argument required, but only \" + arguments.length + \" present.\");\n  }\n  const args = [];\n  for (let i = 0; i < arguments.length && i < 2; ++i) {\n    args[i] = arguments[i];\n  }\n  args[0] = conversions[\"USVString\"](args[0]);\n  if (args[1] !== undefined) {\n  args[1] = conversions[\"USVString\"](args[1]);\n  }\n\n  module.exports.setup(this, args);\n}\n\nURL.prototype.toJSON = function toJSON() {\n  if (!this || !module.exports.is(this)) {\n    throw new TypeError(\"Illegal invocation\");\n  }\n  const args = [];\n  for (let i = 0; i < arguments.length && i < 0; ++i) {\n    args[i] = arguments[i];\n  }\n  return this[impl].toJSON.apply(this[impl], args);\n};\nObject.defineProperty(URL.prototype, \"href\", {\n  get() {\n    return this[impl].href;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].href = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nURL.prototype.toString = function () {\n  if (!this || !module.exports.is(this)) {\n    throw new TypeError(\"Illegal invocation\");\n  }\n  return this.href;\n};\n\nObject.defineProperty(URL.prototype, \"origin\", {\n  get() {\n    return this[impl].origin;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"protocol\", {\n  get() {\n    return this[impl].protocol;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].protocol = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"username\", {\n  get() {\n    return this[impl].username;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].username = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"password\", {\n  get() {\n    return this[impl].password;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].password = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"host\", {\n  get() {\n    return this[impl].host;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].host = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"hostname\", {\n  get() {\n    return this[impl].hostname;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].hostname = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"port\", {\n  get() {\n    return this[impl].port;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].port = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"pathname\", {\n  get() {\n    return this[impl].pathname;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].pathname = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"search\", {\n  get() {\n    return this[impl].search;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].search = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"hash\", {\n  get() {\n    return this[impl].hash;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].hash = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\n\nmodule.exports = {\n  is(obj) {\n    return !!obj && obj[impl] instanceof Impl.implementation;\n  },\n  create(constructorArgs, privateData) {\n    let obj = Object.create(URL.prototype);\n    this.setup(obj, constructorArgs, privateData);\n    return obj;\n  },\n  setup(obj, constructorArgs, privateData) {\n    if (!privateData) privateData = {};\n    privateData.wrapper = obj;\n\n    obj[impl] = new Impl.implementation(constructorArgs, privateData);\n    obj[impl][utils.wrapperSymbol] = obj;\n  },\n  interface: URL,\n  expose: {\n    Window: { URL: URL },\n    Worker: { URL: URL }\n  }\n};\n\n","\"use strict\";\n\nexports.URL = require(\"./URL\").interface;\nexports.serializeURL = require(\"./url-state-machine\").serializeURL;\nexports.serializeURLOrigin = require(\"./url-state-machine\").serializeURLOrigin;\nexports.basicURLParse = require(\"./url-state-machine\").basicURLParse;\nexports.setTheUsername = require(\"./url-state-machine\").setTheUsername;\nexports.setThePassword = require(\"./url-state-machine\").setThePassword;\nexports.serializeHost = require(\"./url-state-machine\").serializeHost;\nexports.serializeInteger = require(\"./url-state-machine\").serializeInteger;\nexports.parseURL = require(\"./url-state-machine\").parseURL;\n","import Stream from 'stream';\nimport http from 'http';\nimport Url from 'url';\nimport whatwgUrl from 'whatwg-url';\nimport https from 'https';\nimport zlib from 'zlib';\n\n// Based on https://github.com/tmpvar/jsdom/blob/aa85b2abf07766ff7bf5c1f6daafb3726f2f2db5/lib/jsdom/living/blob.js\n\n// fix for \"Readable\" isn't a named export issue\nconst Readable = Stream.Readable;\n\nconst BUFFER = Symbol('buffer');\nconst TYPE = Symbol('type');\n\nclass Blob {\n\tconstructor() {\n\t\tthis[TYPE] = '';\n\n\t\tconst blobParts = arguments[0];\n\t\tconst options = arguments[1];\n\n\t\tconst buffers = [];\n\t\tlet size = 0;\n\n\t\tif (blobParts) {\n\t\t\tconst a = blobParts;\n\t\t\tconst length = Number(a.length);\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tconst element = a[i];\n\t\t\t\tlet buffer;\n\t\t\t\tif (element instanceof Buffer) {\n\t\t\t\t\tbuffer = element;\n\t\t\t\t} else if (ArrayBuffer.isView(element)) {\n\t\t\t\t\tbuffer = Buffer.from(element.buffer, element.byteOffset, element.byteLength);\n\t\t\t\t} else if (element instanceof ArrayBuffer) {\n\t\t\t\t\tbuffer = Buffer.from(element);\n\t\t\t\t} else if (element instanceof Blob) {\n\t\t\t\t\tbuffer = element[BUFFER];\n\t\t\t\t} else {\n\t\t\t\t\tbuffer = Buffer.from(typeof element === 'string' ? element : String(element));\n\t\t\t\t}\n\t\t\t\tsize += buffer.length;\n\t\t\t\tbuffers.push(buffer);\n\t\t\t}\n\t\t}\n\n\t\tthis[BUFFER] = Buffer.concat(buffers);\n\n\t\tlet type = options && options.type !== undefined && String(options.type).toLowerCase();\n\t\tif (type && !/[^\\u0020-\\u007E]/.test(type)) {\n\t\t\tthis[TYPE] = type;\n\t\t}\n\t}\n\tget size() {\n\t\treturn this[BUFFER].length;\n\t}\n\tget type() {\n\t\treturn this[TYPE];\n\t}\n\ttext() {\n\t\treturn Promise.resolve(this[BUFFER].toString());\n\t}\n\tarrayBuffer() {\n\t\tconst buf = this[BUFFER];\n\t\tconst ab = buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\treturn Promise.resolve(ab);\n\t}\n\tstream() {\n\t\tconst readable = new Readable();\n\t\treadable._read = function () {};\n\t\treadable.push(this[BUFFER]);\n\t\treadable.push(null);\n\t\treturn readable;\n\t}\n\ttoString() {\n\t\treturn '[object Blob]';\n\t}\n\tslice() {\n\t\tconst size = this.size;\n\n\t\tconst start = arguments[0];\n\t\tconst end = arguments[1];\n\t\tlet relativeStart, relativeEnd;\n\t\tif (start === undefined) {\n\t\t\trelativeStart = 0;\n\t\t} else if (start < 0) {\n\t\t\trelativeStart = Math.max(size + start, 0);\n\t\t} else {\n\t\t\trelativeStart = Math.min(start, size);\n\t\t}\n\t\tif (end === undefined) {\n\t\t\trelativeEnd = size;\n\t\t} else if (end < 0) {\n\t\t\trelativeEnd = Math.max(size + end, 0);\n\t\t} else {\n\t\t\trelativeEnd = Math.min(end, size);\n\t\t}\n\t\tconst span = Math.max(relativeEnd - relativeStart, 0);\n\n\t\tconst buffer = this[BUFFER];\n\t\tconst slicedBuffer = buffer.slice(relativeStart, relativeStart + span);\n\t\tconst blob = new Blob([], { type: arguments[2] });\n\t\tblob[BUFFER] = slicedBuffer;\n\t\treturn blob;\n\t}\n}\n\nObject.defineProperties(Blob.prototype, {\n\tsize: { enumerable: true },\n\ttype: { enumerable: true },\n\tslice: { enumerable: true }\n});\n\nObject.defineProperty(Blob.prototype, Symbol.toStringTag, {\n\tvalue: 'Blob',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * fetch-error.js\n *\n * FetchError interface for operational errors\n */\n\n/**\n * Create FetchError instance\n *\n * @param   String      message      Error message for human\n * @param   String      type         Error type for machine\n * @param   String      systemError  For Node.js system error\n * @return  FetchError\n */\nfunction FetchError(message, type, systemError) {\n  Error.call(this, message);\n\n  this.message = message;\n  this.type = type;\n\n  // when err.type is `system`, err.code contains system error code\n  if (systemError) {\n    this.code = this.errno = systemError.code;\n  }\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nFetchError.prototype = Object.create(Error.prototype);\nFetchError.prototype.constructor = FetchError;\nFetchError.prototype.name = 'FetchError';\n\nlet convert;\ntry {\n\tconvert = require('encoding').convert;\n} catch (e) {}\n\nconst INTERNALS = Symbol('Body internals');\n\n// fix an issue where \"PassThrough\" isn't a named export for node <10\nconst PassThrough = Stream.PassThrough;\n\n/**\n * Body mixin\n *\n * Ref: https://fetch.spec.whatwg.org/#body\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nfunction Body(body) {\n\tvar _this = this;\n\n\tvar _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n\t    _ref$size = _ref.size;\n\n\tlet size = _ref$size === undefined ? 0 : _ref$size;\n\tvar _ref$timeout = _ref.timeout;\n\tlet timeout = _ref$timeout === undefined ? 0 : _ref$timeout;\n\n\tif (body == null) {\n\t\t// body is undefined or null\n\t\tbody = null;\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\tbody = Buffer.from(body.toString());\n\t} else if (isBlob(body)) ; else if (Buffer.isBuffer(body)) ; else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\tbody = Buffer.from(body);\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\tbody = Buffer.from(body.buffer, body.byteOffset, body.byteLength);\n\t} else if (body instanceof Stream) ; else {\n\t\t// none of the above\n\t\t// coerce to string then buffer\n\t\tbody = Buffer.from(String(body));\n\t}\n\tthis[INTERNALS] = {\n\t\tbody,\n\t\tdisturbed: false,\n\t\terror: null\n\t};\n\tthis.size = size;\n\tthis.timeout = timeout;\n\n\tif (body instanceof Stream) {\n\t\tbody.on('error', function (err) {\n\t\t\tconst error = err.name === 'AbortError' ? err : new FetchError(`Invalid response body while trying to fetch ${_this.url}: ${err.message}`, 'system', err);\n\t\t\t_this[INTERNALS].error = error;\n\t\t});\n\t}\n}\n\nBody.prototype = {\n\tget body() {\n\t\treturn this[INTERNALS].body;\n\t},\n\n\tget bodyUsed() {\n\t\treturn this[INTERNALS].disturbed;\n\t},\n\n\t/**\n  * Decode response as ArrayBuffer\n  *\n  * @return  Promise\n  */\n\tarrayBuffer() {\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\t});\n\t},\n\n\t/**\n  * Return raw response as Blob\n  *\n  * @return Promise\n  */\n\tblob() {\n\t\tlet ct = this.headers && this.headers.get('content-type') || '';\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn Object.assign(\n\t\t\t// Prevent copying\n\t\t\tnew Blob([], {\n\t\t\t\ttype: ct.toLowerCase()\n\t\t\t}), {\n\t\t\t\t[BUFFER]: buf\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n  * Decode response as json\n  *\n  * @return  Promise\n  */\n\tjson() {\n\t\tvar _this2 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(buffer.toString());\n\t\t\t} catch (err) {\n\t\t\t\treturn Body.Promise.reject(new FetchError(`invalid json response body at ${_this2.url} reason: ${err.message}`, 'invalid-json'));\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n  * Decode response as text\n  *\n  * @return  Promise\n  */\n\ttext() {\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn buffer.toString();\n\t\t});\n\t},\n\n\t/**\n  * Decode response as buffer (non-spec api)\n  *\n  * @return  Promise\n  */\n\tbuffer() {\n\t\treturn consumeBody.call(this);\n\t},\n\n\t/**\n  * Decode response as text, while automatically detecting the encoding and\n  * trying to decode to UTF-8 (non-spec api)\n  *\n  * @return  Promise\n  */\n\ttextConverted() {\n\t\tvar _this3 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn convertBody(buffer, _this3.headers);\n\t\t});\n\t}\n};\n\n// In browsers, all properties are enumerable.\nObject.defineProperties(Body.prototype, {\n\tbody: { enumerable: true },\n\tbodyUsed: { enumerable: true },\n\tarrayBuffer: { enumerable: true },\n\tblob: { enumerable: true },\n\tjson: { enumerable: true },\n\ttext: { enumerable: true }\n});\n\nBody.mixIn = function (proto) {\n\tfor (const name of Object.getOwnPropertyNames(Body.prototype)) {\n\t\t// istanbul ignore else: future proof\n\t\tif (!(name in proto)) {\n\t\t\tconst desc = Object.getOwnPropertyDescriptor(Body.prototype, name);\n\t\t\tObject.defineProperty(proto, name, desc);\n\t\t}\n\t}\n};\n\n/**\n * Consume and convert an entire Body to a Buffer.\n *\n * Ref: https://fetch.spec.whatwg.org/#concept-body-consume-body\n *\n * @return  Promise\n */\nfunction consumeBody() {\n\tvar _this4 = this;\n\n\tif (this[INTERNALS].disturbed) {\n\t\treturn Body.Promise.reject(new TypeError(`body used already for: ${this.url}`));\n\t}\n\n\tthis[INTERNALS].disturbed = true;\n\n\tif (this[INTERNALS].error) {\n\t\treturn Body.Promise.reject(this[INTERNALS].error);\n\t}\n\n\tlet body = this.body;\n\n\t// body is null\n\tif (body === null) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is blob\n\tif (isBlob(body)) {\n\t\tbody = body.stream();\n\t}\n\n\t// body is buffer\n\tif (Buffer.isBuffer(body)) {\n\t\treturn Body.Promise.resolve(body);\n\t}\n\n\t// istanbul ignore if: should never happen\n\tif (!(body instanceof Stream)) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is stream\n\t// get ready to actually consume the body\n\tlet accum = [];\n\tlet accumBytes = 0;\n\tlet abort = false;\n\n\treturn new Body.Promise(function (resolve, reject) {\n\t\tlet resTimeout;\n\n\t\t// allow timeout on slow response body\n\t\tif (_this4.timeout) {\n\t\t\tresTimeout = setTimeout(function () {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`Response timeout while trying to fetch ${_this4.url} (over ${_this4.timeout}ms)`, 'body-timeout'));\n\t\t\t}, _this4.timeout);\n\t\t}\n\n\t\t// handle stream errors\n\t\tbody.on('error', function (err) {\n\t\t\tif (err.name === 'AbortError') {\n\t\t\t\t// if the request was aborted, reject with this Error\n\t\t\t\tabort = true;\n\t\t\t\treject(err);\n\t\t\t} else {\n\t\t\t\t// other errors, such as incorrect content-encoding\n\t\t\t\treject(new FetchError(`Invalid response body while trying to fetch ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\n\t\tbody.on('data', function (chunk) {\n\t\t\tif (abort || chunk === null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (_this4.size && accumBytes + chunk.length > _this4.size) {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`content size at ${_this4.url} over limit: ${_this4.size}`, 'max-size'));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\taccumBytes += chunk.length;\n\t\t\taccum.push(chunk);\n\t\t});\n\n\t\tbody.on('end', function () {\n\t\t\tif (abort) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tclearTimeout(resTimeout);\n\n\t\t\ttry {\n\t\t\t\tresolve(Buffer.concat(accum, accumBytes));\n\t\t\t} catch (err) {\n\t\t\t\t// handle streams that have accumulated too much data (issue #414)\n\t\t\t\treject(new FetchError(`Could not create Buffer from response body for ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Detect buffer encoding and convert to target encoding\n * ref: http://www.w3.org/TR/2011/WD-html5-20110113/parsing.html#determining-the-character-encoding\n *\n * @param   Buffer  buffer    Incoming buffer\n * @param   String  encoding  Target encoding\n * @return  String\n */\nfunction convertBody(buffer, headers) {\n\tif (typeof convert !== 'function') {\n\t\tthrow new Error('The package `encoding` must be installed to use the textConverted() function');\n\t}\n\n\tconst ct = headers.get('content-type');\n\tlet charset = 'utf-8';\n\tlet res, str;\n\n\t// header\n\tif (ct) {\n\t\tres = /charset=([^;]*)/i.exec(ct);\n\t}\n\n\t// no charset in content type, peek at response body for at most 1024 bytes\n\tstr = buffer.slice(0, 1024).toString();\n\n\t// html5\n\tif (!res && str) {\n\t\tres = /<meta.+?charset=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// html4\n\tif (!res && str) {\n\t\tres = /<meta[\\s]+?http-equiv=(['\"])content-type\\1[\\s]+?content=(['\"])(.+?)\\2/i.exec(str);\n\t\tif (!res) {\n\t\t\tres = /<meta[\\s]+?content=(['\"])(.+?)\\1[\\s]+?http-equiv=(['\"])content-type\\3/i.exec(str);\n\t\t\tif (res) {\n\t\t\t\tres.pop(); // drop last quote\n\t\t\t}\n\t\t}\n\n\t\tif (res) {\n\t\t\tres = /charset=(.*)/i.exec(res.pop());\n\t\t}\n\t}\n\n\t// xml\n\tif (!res && str) {\n\t\tres = /<\\?xml.+?encoding=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// found charset\n\tif (res) {\n\t\tcharset = res.pop();\n\n\t\t// prevent decode issues when sites use incorrect encoding\n\t\t// ref: https://hsivonen.fi/encoding-menu/\n\t\tif (charset === 'gb2312' || charset === 'gbk') {\n\t\t\tcharset = 'gb18030';\n\t\t}\n\t}\n\n\t// turn raw buffers into a single utf-8 buffer\n\treturn convert(buffer, 'UTF-8', charset).toString();\n}\n\n/**\n * Detect a URLSearchParams object\n * ref: https://github.com/bitinn/node-fetch/issues/296#issuecomment-307598143\n *\n * @param   Object  obj     Object to detect by type or brand\n * @return  String\n */\nfunction isURLSearchParams(obj) {\n\t// Duck-typing as a necessary condition.\n\tif (typeof obj !== 'object' || typeof obj.append !== 'function' || typeof obj.delete !== 'function' || typeof obj.get !== 'function' || typeof obj.getAll !== 'function' || typeof obj.has !== 'function' || typeof obj.set !== 'function') {\n\t\treturn false;\n\t}\n\n\t// Brand-checking and more duck-typing as optional condition.\n\treturn obj.constructor.name === 'URLSearchParams' || Object.prototype.toString.call(obj) === '[object URLSearchParams]' || typeof obj.sort === 'function';\n}\n\n/**\n * Check if `obj` is a W3C `Blob` object (which `File` inherits from)\n * @param  {*} obj\n * @return {boolean}\n */\nfunction isBlob(obj) {\n\treturn typeof obj === 'object' && typeof obj.arrayBuffer === 'function' && typeof obj.type === 'string' && typeof obj.stream === 'function' && typeof obj.constructor === 'function' && typeof obj.constructor.name === 'string' && /^(Blob|File)$/.test(obj.constructor.name) && /^(Blob|File)$/.test(obj[Symbol.toStringTag]);\n}\n\n/**\n * Clone body given Res/Req instance\n *\n * @param   Mixed  instance  Response or Request instance\n * @return  Mixed\n */\nfunction clone(instance) {\n\tlet p1, p2;\n\tlet body = instance.body;\n\n\t// don't allow cloning a used body\n\tif (instance.bodyUsed) {\n\t\tthrow new Error('cannot clone body after it is used');\n\t}\n\n\t// check that body is a stream and not form-data object\n\t// note: we can't clone the form-data object without having it as a dependency\n\tif (body instanceof Stream && typeof body.getBoundary !== 'function') {\n\t\t// tee instance body\n\t\tp1 = new PassThrough();\n\t\tp2 = new PassThrough();\n\t\tbody.pipe(p1);\n\t\tbody.pipe(p2);\n\t\t// set instance body to teed body and return the other teed body\n\t\tinstance[INTERNALS].body = p1;\n\t\tbody = p2;\n\t}\n\n\treturn body;\n}\n\n/**\n * Performs the operation \"extract a `Content-Type` value from |object|\" as\n * specified in the specification:\n * https://fetch.spec.whatwg.org/#concept-bodyinit-extract\n *\n * This function assumes that instance.body is present.\n *\n * @param   Mixed  instance  Any options.body input\n */\nfunction extractContentType(body) {\n\tif (body === null) {\n\t\t// body is null\n\t\treturn null;\n\t} else if (typeof body === 'string') {\n\t\t// body is string\n\t\treturn 'text/plain;charset=UTF-8';\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\treturn 'application/x-www-form-urlencoded;charset=UTF-8';\n\t} else if (isBlob(body)) {\n\t\t// body is blob\n\t\treturn body.type || null;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn null;\n\t} else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\treturn null;\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\treturn null;\n\t} else if (typeof body.getBoundary === 'function') {\n\t\t// detect form data input from form-data module\n\t\treturn `multipart/form-data;boundary=${body.getBoundary()}`;\n\t} else if (body instanceof Stream) {\n\t\t// body is stream\n\t\t// can't really do much about this\n\t\treturn null;\n\t} else {\n\t\t// Body constructor defaults other things to string\n\t\treturn 'text/plain;charset=UTF-8';\n\t}\n}\n\n/**\n * The Fetch Standard treats this as if \"total bytes\" is a property on the body.\n * For us, we have to explicitly get it with a function.\n *\n * ref: https://fetch.spec.whatwg.org/#concept-body-total-bytes\n *\n * @param   Body    instance   Instance of Body\n * @return  Number?            Number of bytes, or null if not possible\n */\nfunction getTotalBytes(instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\treturn 0;\n\t} else if (isBlob(body)) {\n\t\treturn body.size;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn body.length;\n\t} else if (body && typeof body.getLengthSync === 'function') {\n\t\t// detect form data input from form-data module\n\t\tif (body._lengthRetrievers && body._lengthRetrievers.length == 0 || // 1.x\n\t\tbody.hasKnownLength && body.hasKnownLength()) {\n\t\t\t// 2.x\n\t\t\treturn body.getLengthSync();\n\t\t}\n\t\treturn null;\n\t} else {\n\t\t// body is stream\n\t\treturn null;\n\t}\n}\n\n/**\n * Write a Body to a Node.js WritableStream (e.g. http.Request) object.\n *\n * @param   Body    instance   Instance of Body\n * @return  Void\n */\nfunction writeToStream(dest, instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\tdest.end();\n\t} else if (isBlob(body)) {\n\t\tbody.stream().pipe(dest);\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\tdest.write(body);\n\t\tdest.end();\n\t} else {\n\t\t// body is stream\n\t\tbody.pipe(dest);\n\t}\n}\n\n// expose Promise\nBody.Promise = global.Promise;\n\n/**\n * headers.js\n *\n * Headers class offers convenient helpers\n */\n\nconst invalidTokenRegex = /[^\\^_`a-zA-Z\\-0-9!#$%&'*+.|~]/;\nconst invalidHeaderCharRegex = /[^\\t\\x20-\\x7e\\x80-\\xff]/;\n\nfunction validateName(name) {\n\tname = `${name}`;\n\tif (invalidTokenRegex.test(name) || name === '') {\n\t\tthrow new TypeError(`${name} is not a legal HTTP header name`);\n\t}\n}\n\nfunction validateValue(value) {\n\tvalue = `${value}`;\n\tif (invalidHeaderCharRegex.test(value)) {\n\t\tthrow new TypeError(`${value} is not a legal HTTP header value`);\n\t}\n}\n\n/**\n * Find the key in the map object given a header name.\n *\n * Returns undefined if not found.\n *\n * @param   String  name  Header name\n * @return  String|Undefined\n */\nfunction find(map, name) {\n\tname = name.toLowerCase();\n\tfor (const key in map) {\n\t\tif (key.toLowerCase() === name) {\n\t\t\treturn key;\n\t\t}\n\t}\n\treturn undefined;\n}\n\nconst MAP = Symbol('map');\nclass Headers {\n\t/**\n  * Headers class\n  *\n  * @param   Object  headers  Response headers\n  * @return  Void\n  */\n\tconstructor() {\n\t\tlet init = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n\n\t\tthis[MAP] = Object.create(null);\n\n\t\tif (init instanceof Headers) {\n\t\t\tconst rawHeaders = init.raw();\n\t\t\tconst headerNames = Object.keys(rawHeaders);\n\n\t\t\tfor (const headerName of headerNames) {\n\t\t\t\tfor (const value of rawHeaders[headerName]) {\n\t\t\t\t\tthis.append(headerName, value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// We don't worry about converting prop to ByteString here as append()\n\t\t// will handle it.\n\t\tif (init == null) ; else if (typeof init === 'object') {\n\t\t\tconst method = init[Symbol.iterator];\n\t\t\tif (method != null) {\n\t\t\t\tif (typeof method !== 'function') {\n\t\t\t\t\tthrow new TypeError('Header pairs must be iterable');\n\t\t\t\t}\n\n\t\t\t\t// sequence<sequence<ByteString>>\n\t\t\t\t// Note: per spec we have to first exhaust the lists then process them\n\t\t\t\tconst pairs = [];\n\t\t\t\tfor (const pair of init) {\n\t\t\t\t\tif (typeof pair !== 'object' || typeof pair[Symbol.iterator] !== 'function') {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be iterable');\n\t\t\t\t\t}\n\t\t\t\t\tpairs.push(Array.from(pair));\n\t\t\t\t}\n\n\t\t\t\tfor (const pair of pairs) {\n\t\t\t\t\tif (pair.length !== 2) {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be a name/value tuple');\n\t\t\t\t\t}\n\t\t\t\t\tthis.append(pair[0], pair[1]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// record<ByteString, ByteString>\n\t\t\t\tfor (const key of Object.keys(init)) {\n\t\t\t\t\tconst value = init[key];\n\t\t\t\t\tthis.append(key, value);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new TypeError('Provided initializer must be an object');\n\t\t}\n\t}\n\n\t/**\n  * Return combined header value given name\n  *\n  * @param   String  name  Header name\n  * @return  Mixed\n  */\n\tget(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key === undefined) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this[MAP][key].join(', ');\n\t}\n\n\t/**\n  * Iterate over all headers\n  *\n  * @param   Function  callback  Executed for each item with parameters (value, name, thisArg)\n  * @param   Boolean   thisArg   `this` context for callback function\n  * @return  Void\n  */\n\tforEach(callback) {\n\t\tlet thisArg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n\t\tlet pairs = getHeaders(this);\n\t\tlet i = 0;\n\t\twhile (i < pairs.length) {\n\t\t\tvar _pairs$i = pairs[i];\n\t\t\tconst name = _pairs$i[0],\n\t\t\t      value = _pairs$i[1];\n\n\t\t\tcallback.call(thisArg, value, name, this);\n\t\t\tpairs = getHeaders(this);\n\t\t\ti++;\n\t\t}\n\t}\n\n\t/**\n  * Overwrite header values given name\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tset(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tthis[MAP][key !== undefined ? key : name] = [value];\n\t}\n\n\t/**\n  * Append a value onto existing header\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tappend(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tthis[MAP][key].push(value);\n\t\t} else {\n\t\t\tthis[MAP][name] = [value];\n\t\t}\n\t}\n\n\t/**\n  * Check for header name existence\n  *\n  * @param   String   name  Header name\n  * @return  Boolean\n  */\n\thas(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\treturn find(this[MAP], name) !== undefined;\n\t}\n\n\t/**\n  * Delete all header values given name\n  *\n  * @param   String  name  Header name\n  * @return  Void\n  */\n\tdelete(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tdelete this[MAP][key];\n\t\t}\n\t}\n\n\t/**\n  * Return raw headers (non-spec api)\n  *\n  * @return  Object\n  */\n\traw() {\n\t\treturn this[MAP];\n\t}\n\n\t/**\n  * Get an iterator on keys.\n  *\n  * @return  Iterator\n  */\n\tkeys() {\n\t\treturn createHeadersIterator(this, 'key');\n\t}\n\n\t/**\n  * Get an iterator on values.\n  *\n  * @return  Iterator\n  */\n\tvalues() {\n\t\treturn createHeadersIterator(this, 'value');\n\t}\n\n\t/**\n  * Get an iterator on entries.\n  *\n  * This is the default iterator of the Headers object.\n  *\n  * @return  Iterator\n  */\n\t[Symbol.iterator]() {\n\t\treturn createHeadersIterator(this, 'key+value');\n\t}\n}\nHeaders.prototype.entries = Headers.prototype[Symbol.iterator];\n\nObject.defineProperty(Headers.prototype, Symbol.toStringTag, {\n\tvalue: 'Headers',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Headers.prototype, {\n\tget: { enumerable: true },\n\tforEach: { enumerable: true },\n\tset: { enumerable: true },\n\tappend: { enumerable: true },\n\thas: { enumerable: true },\n\tdelete: { enumerable: true },\n\tkeys: { enumerable: true },\n\tvalues: { enumerable: true },\n\tentries: { enumerable: true }\n});\n\nfunction getHeaders(headers) {\n\tlet kind = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'key+value';\n\n\tconst keys = Object.keys(headers[MAP]).sort();\n\treturn keys.map(kind === 'key' ? function (k) {\n\t\treturn k.toLowerCase();\n\t} : kind === 'value' ? function (k) {\n\t\treturn headers[MAP][k].join(', ');\n\t} : function (k) {\n\t\treturn [k.toLowerCase(), headers[MAP][k].join(', ')];\n\t});\n}\n\nconst INTERNAL = Symbol('internal');\n\nfunction createHeadersIterator(target, kind) {\n\tconst iterator = Object.create(HeadersIteratorPrototype);\n\titerator[INTERNAL] = {\n\t\ttarget,\n\t\tkind,\n\t\tindex: 0\n\t};\n\treturn iterator;\n}\n\nconst HeadersIteratorPrototype = Object.setPrototypeOf({\n\tnext() {\n\t\t// istanbul ignore if\n\t\tif (!this || Object.getPrototypeOf(this) !== HeadersIteratorPrototype) {\n\t\t\tthrow new TypeError('Value of `this` is not a HeadersIterator');\n\t\t}\n\n\t\tvar _INTERNAL = this[INTERNAL];\n\t\tconst target = _INTERNAL.target,\n\t\t      kind = _INTERNAL.kind,\n\t\t      index = _INTERNAL.index;\n\n\t\tconst values = getHeaders(target, kind);\n\t\tconst len = values.length;\n\t\tif (index >= len) {\n\t\t\treturn {\n\t\t\t\tvalue: undefined,\n\t\t\t\tdone: true\n\t\t\t};\n\t\t}\n\n\t\tthis[INTERNAL].index = index + 1;\n\n\t\treturn {\n\t\t\tvalue: values[index],\n\t\t\tdone: false\n\t\t};\n\t}\n}, Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));\n\nObject.defineProperty(HeadersIteratorPrototype, Symbol.toStringTag, {\n\tvalue: 'HeadersIterator',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * Export the Headers object in a form that Node.js can consume.\n *\n * @param   Headers  headers\n * @return  Object\n */\nfunction exportNodeCompatibleHeaders(headers) {\n\tconst obj = Object.assign({ __proto__: null }, headers[MAP]);\n\n\t// http.request() only supports string as Host header. This hack makes\n\t// specifying custom Host header possible.\n\tconst hostHeaderKey = find(headers[MAP], 'Host');\n\tif (hostHeaderKey !== undefined) {\n\t\tobj[hostHeaderKey] = obj[hostHeaderKey][0];\n\t}\n\n\treturn obj;\n}\n\n/**\n * Create a Headers object from an object of headers, ignoring those that do\n * not conform to HTTP grammar productions.\n *\n * @param   Object  obj  Object of headers\n * @return  Headers\n */\nfunction createHeadersLenient(obj) {\n\tconst headers = new Headers();\n\tfor (const name of Object.keys(obj)) {\n\t\tif (invalidTokenRegex.test(name)) {\n\t\t\tcontinue;\n\t\t}\n\t\tif (Array.isArray(obj[name])) {\n\t\t\tfor (const val of obj[name]) {\n\t\t\t\tif (invalidHeaderCharRegex.test(val)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (headers[MAP][name] === undefined) {\n\t\t\t\t\theaders[MAP][name] = [val];\n\t\t\t\t} else {\n\t\t\t\t\theaders[MAP][name].push(val);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (!invalidHeaderCharRegex.test(obj[name])) {\n\t\t\theaders[MAP][name] = [obj[name]];\n\t\t}\n\t}\n\treturn headers;\n}\n\nconst INTERNALS$1 = Symbol('Response internals');\n\n// fix an issue where \"STATUS_CODES\" aren't a named export for node <10\nconst STATUS_CODES = http.STATUS_CODES;\n\n/**\n * Response class\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nclass Response {\n\tconstructor() {\n\t\tlet body = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\t\tlet opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tBody.call(this, body, opts);\n\n\t\tconst status = opts.status || 200;\n\t\tconst headers = new Headers(opts.headers);\n\n\t\tif (body != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(body);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tthis[INTERNALS$1] = {\n\t\t\turl: opts.url,\n\t\t\tstatus,\n\t\t\tstatusText: opts.statusText || STATUS_CODES[status],\n\t\t\theaders,\n\t\t\tcounter: opts.counter\n\t\t};\n\t}\n\n\tget url() {\n\t\treturn this[INTERNALS$1].url || '';\n\t}\n\n\tget status() {\n\t\treturn this[INTERNALS$1].status;\n\t}\n\n\t/**\n  * Convenience property representing if the request ended normally\n  */\n\tget ok() {\n\t\treturn this[INTERNALS$1].status >= 200 && this[INTERNALS$1].status < 300;\n\t}\n\n\tget redirected() {\n\t\treturn this[INTERNALS$1].counter > 0;\n\t}\n\n\tget statusText() {\n\t\treturn this[INTERNALS$1].statusText;\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$1].headers;\n\t}\n\n\t/**\n  * Clone this response\n  *\n  * @return  Response\n  */\n\tclone() {\n\t\treturn new Response(clone(this), {\n\t\t\turl: this.url,\n\t\t\tstatus: this.status,\n\t\t\tstatusText: this.statusText,\n\t\t\theaders: this.headers,\n\t\t\tok: this.ok,\n\t\t\tredirected: this.redirected\n\t\t});\n\t}\n}\n\nBody.mixIn(Response.prototype);\n\nObject.defineProperties(Response.prototype, {\n\turl: { enumerable: true },\n\tstatus: { enumerable: true },\n\tok: { enumerable: true },\n\tredirected: { enumerable: true },\n\tstatusText: { enumerable: true },\n\theaders: { enumerable: true },\n\tclone: { enumerable: true }\n});\n\nObject.defineProperty(Response.prototype, Symbol.toStringTag, {\n\tvalue: 'Response',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nconst INTERNALS$2 = Symbol('Request internals');\nconst URL = Url.URL || whatwgUrl.URL;\n\n// fix an issue where \"format\", \"parse\" aren't a named export for node <10\nconst parse_url = Url.parse;\nconst format_url = Url.format;\n\n/**\n * Wrapper around `new URL` to handle arbitrary URLs\n *\n * @param  {string} urlStr\n * @return {void}\n */\nfunction parseURL(urlStr) {\n\t/*\n \tCheck whether the URL is absolute or not\n \t\tScheme: https://tools.ietf.org/html/rfc3986#section-3.1\n \tAbsolute URL: https://tools.ietf.org/html/rfc3986#section-4.3\n */\n\tif (/^[a-zA-Z][a-zA-Z\\d+\\-.]*:/.exec(urlStr)) {\n\t\turlStr = new URL(urlStr).toString();\n\t}\n\n\t// Fallback to old implementation for arbitrary URLs\n\treturn parse_url(urlStr);\n}\n\nconst streamDestructionSupported = 'destroy' in Stream.Readable.prototype;\n\n/**\n * Check if a value is an instance of Request.\n *\n * @param   Mixed   input\n * @return  Boolean\n */\nfunction isRequest(input) {\n\treturn typeof input === 'object' && typeof input[INTERNALS$2] === 'object';\n}\n\nfunction isAbortSignal(signal) {\n\tconst proto = signal && typeof signal === 'object' && Object.getPrototypeOf(signal);\n\treturn !!(proto && proto.constructor.name === 'AbortSignal');\n}\n\n/**\n * Request class\n *\n * @param   Mixed   input  Url or Request instance\n * @param   Object  init   Custom options\n * @return  Void\n */\nclass Request {\n\tconstructor(input) {\n\t\tlet init = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tlet parsedURL;\n\n\t\t// normalize input\n\t\tif (!isRequest(input)) {\n\t\t\tif (input && input.href) {\n\t\t\t\t// in order to support Node.js' Url objects; though WHATWG's URL objects\n\t\t\t\t// will fall into this branch also (since their `toString()` will return\n\t\t\t\t// `href` property anyway)\n\t\t\t\tparsedURL = parseURL(input.href);\n\t\t\t} else {\n\t\t\t\t// coerce input to a string before attempting to parse\n\t\t\t\tparsedURL = parseURL(`${input}`);\n\t\t\t}\n\t\t\tinput = {};\n\t\t} else {\n\t\t\tparsedURL = parseURL(input.url);\n\t\t}\n\n\t\tlet method = init.method || input.method || 'GET';\n\t\tmethod = method.toUpperCase();\n\n\t\tif ((init.body != null || isRequest(input) && input.body !== null) && (method === 'GET' || method === 'HEAD')) {\n\t\t\tthrow new TypeError('Request with GET/HEAD method cannot have body');\n\t\t}\n\n\t\tlet inputBody = init.body != null ? init.body : isRequest(input) && input.body !== null ? clone(input) : null;\n\n\t\tBody.call(this, inputBody, {\n\t\t\ttimeout: init.timeout || input.timeout || 0,\n\t\t\tsize: init.size || input.size || 0\n\t\t});\n\n\t\tconst headers = new Headers(init.headers || input.headers || {});\n\n\t\tif (inputBody != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(inputBody);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tlet signal = isRequest(input) ? input.signal : null;\n\t\tif ('signal' in init) signal = init.signal;\n\n\t\tif (signal != null && !isAbortSignal(signal)) {\n\t\t\tthrow new TypeError('Expected signal to be an instanceof AbortSignal');\n\t\t}\n\n\t\tthis[INTERNALS$2] = {\n\t\t\tmethod,\n\t\t\tredirect: init.redirect || input.redirect || 'follow',\n\t\t\theaders,\n\t\t\tparsedURL,\n\t\t\tsignal\n\t\t};\n\n\t\t// node-fetch-only options\n\t\tthis.follow = init.follow !== undefined ? init.follow : input.follow !== undefined ? input.follow : 20;\n\t\tthis.compress = init.compress !== undefined ? init.compress : input.compress !== undefined ? input.compress : true;\n\t\tthis.counter = init.counter || input.counter || 0;\n\t\tthis.agent = init.agent || input.agent;\n\t}\n\n\tget method() {\n\t\treturn this[INTERNALS$2].method;\n\t}\n\n\tget url() {\n\t\treturn format_url(this[INTERNALS$2].parsedURL);\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$2].headers;\n\t}\n\n\tget redirect() {\n\t\treturn this[INTERNALS$2].redirect;\n\t}\n\n\tget signal() {\n\t\treturn this[INTERNALS$2].signal;\n\t}\n\n\t/**\n  * Clone this request\n  *\n  * @return  Request\n  */\n\tclone() {\n\t\treturn new Request(this);\n\t}\n}\n\nBody.mixIn(Request.prototype);\n\nObject.defineProperty(Request.prototype, Symbol.toStringTag, {\n\tvalue: 'Request',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Request.prototype, {\n\tmethod: { enumerable: true },\n\turl: { enumerable: true },\n\theaders: { enumerable: true },\n\tredirect: { enumerable: true },\n\tclone: { enumerable: true },\n\tsignal: { enumerable: true }\n});\n\n/**\n * Convert a Request to Node.js http request options.\n *\n * @param   Request  A Request instance\n * @return  Object   The options object to be passed to http.request\n */\nfunction getNodeRequestOptions(request) {\n\tconst parsedURL = request[INTERNALS$2].parsedURL;\n\tconst headers = new Headers(request[INTERNALS$2].headers);\n\n\t// fetch step 1.3\n\tif (!headers.has('Accept')) {\n\t\theaders.set('Accept', '*/*');\n\t}\n\n\t// Basic fetch\n\tif (!parsedURL.protocol || !parsedURL.hostname) {\n\t\tthrow new TypeError('Only absolute URLs are supported');\n\t}\n\n\tif (!/^https?:$/.test(parsedURL.protocol)) {\n\t\tthrow new TypeError('Only HTTP(S) protocols are supported');\n\t}\n\n\tif (request.signal && request.body instanceof Stream.Readable && !streamDestructionSupported) {\n\t\tthrow new Error('Cancellation of streamed requests with AbortSignal is not supported in node < 8');\n\t}\n\n\t// HTTP-network-or-cache fetch steps 2.4-2.7\n\tlet contentLengthValue = null;\n\tif (request.body == null && /^(POST|PUT)$/i.test(request.method)) {\n\t\tcontentLengthValue = '0';\n\t}\n\tif (request.body != null) {\n\t\tconst totalBytes = getTotalBytes(request);\n\t\tif (typeof totalBytes === 'number') {\n\t\t\tcontentLengthValue = String(totalBytes);\n\t\t}\n\t}\n\tif (contentLengthValue) {\n\t\theaders.set('Content-Length', contentLengthValue);\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.11\n\tif (!headers.has('User-Agent')) {\n\t\theaders.set('User-Agent', 'node-fetch/1.0 (+https://github.com/bitinn/node-fetch)');\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.15\n\tif (request.compress && !headers.has('Accept-Encoding')) {\n\t\theaders.set('Accept-Encoding', 'gzip,deflate');\n\t}\n\n\tlet agent = request.agent;\n\tif (typeof agent === 'function') {\n\t\tagent = agent(parsedURL);\n\t}\n\n\t// HTTP-network fetch step 4.2\n\t// chunked encoding is handled by Node.js\n\n\treturn Object.assign({}, parsedURL, {\n\t\tmethod: request.method,\n\t\theaders: exportNodeCompatibleHeaders(headers),\n\t\tagent\n\t});\n}\n\n/**\n * abort-error.js\n *\n * AbortError interface for cancelled requests\n */\n\n/**\n * Create AbortError instance\n *\n * @param   String      message      Error message for human\n * @return  AbortError\n */\nfunction AbortError(message) {\n  Error.call(this, message);\n\n  this.type = 'aborted';\n  this.message = message;\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nAbortError.prototype = Object.create(Error.prototype);\nAbortError.prototype.constructor = AbortError;\nAbortError.prototype.name = 'AbortError';\n\nconst URL$1 = Url.URL || whatwgUrl.URL;\n\n// fix an issue where \"PassThrough\", \"resolve\" aren't a named export for node <10\nconst PassThrough$1 = Stream.PassThrough;\n\nconst isDomainOrSubdomain = function isDomainOrSubdomain(destination, original) {\n\tconst orig = new URL$1(original).hostname;\n\tconst dest = new URL$1(destination).hostname;\n\n\treturn orig === dest || orig[orig.length - dest.length - 1] === '.' && orig.endsWith(dest);\n};\n\n/**\n * isSameProtocol reports whether the two provided URLs use the same protocol.\n *\n * Both domains must already be in canonical form.\n * @param {string|URL} original\n * @param {string|URL} destination\n */\nconst isSameProtocol = function isSameProtocol(destination, original) {\n\tconst orig = new URL$1(original).protocol;\n\tconst dest = new URL$1(destination).protocol;\n\n\treturn orig === dest;\n};\n\n/**\n * Fetch function\n *\n * @param   Mixed    url   Absolute url or Request instance\n * @param   Object   opts  Fetch options\n * @return  Promise\n */\nfunction fetch(url, opts) {\n\n\t// allow custom promise\n\tif (!fetch.Promise) {\n\t\tthrow new Error('native promise missing, set fetch.Promise to your favorite alternative');\n\t}\n\n\tBody.Promise = fetch.Promise;\n\n\t// wrap http.request into fetch\n\treturn new fetch.Promise(function (resolve, reject) {\n\t\t// build request object\n\t\tconst request = new Request(url, opts);\n\t\tconst options = getNodeRequestOptions(request);\n\n\t\tconst send = (options.protocol === 'https:' ? https : http).request;\n\t\tconst signal = request.signal;\n\n\t\tlet response = null;\n\n\t\tconst abort = function abort() {\n\t\t\tlet error = new AbortError('The user aborted a request.');\n\t\t\treject(error);\n\t\t\tif (request.body && request.body instanceof Stream.Readable) {\n\t\t\t\tdestroyStream(request.body, error);\n\t\t\t}\n\t\t\tif (!response || !response.body) return;\n\t\t\tresponse.body.emit('error', error);\n\t\t};\n\n\t\tif (signal && signal.aborted) {\n\t\t\tabort();\n\t\t\treturn;\n\t\t}\n\n\t\tconst abortAndFinalize = function abortAndFinalize() {\n\t\t\tabort();\n\t\t\tfinalize();\n\t\t};\n\n\t\t// send request\n\t\tconst req = send(options);\n\t\tlet reqTimeout;\n\n\t\tif (signal) {\n\t\t\tsignal.addEventListener('abort', abortAndFinalize);\n\t\t}\n\n\t\tfunction finalize() {\n\t\t\treq.abort();\n\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\tclearTimeout(reqTimeout);\n\t\t}\n\n\t\tif (request.timeout) {\n\t\t\treq.once('socket', function (socket) {\n\t\t\t\treqTimeout = setTimeout(function () {\n\t\t\t\t\treject(new FetchError(`network timeout at: ${request.url}`, 'request-timeout'));\n\t\t\t\t\tfinalize();\n\t\t\t\t}, request.timeout);\n\t\t\t});\n\t\t}\n\n\t\treq.on('error', function (err) {\n\t\t\treject(new FetchError(`request to ${request.url} failed, reason: ${err.message}`, 'system', err));\n\n\t\t\tif (response && response.body) {\n\t\t\t\tdestroyStream(response.body, err);\n\t\t\t}\n\n\t\t\tfinalize();\n\t\t});\n\n\t\tfixResponseChunkedTransferBadEnding(req, function (err) {\n\t\t\tif (signal && signal.aborted) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (response && response.body) {\n\t\t\t\tdestroyStream(response.body, err);\n\t\t\t}\n\t\t});\n\n\t\t/* c8 ignore next 18 */\n\t\tif (parseInt(process.version.substring(1)) < 14) {\n\t\t\t// Before Node.js 14, pipeline() does not fully support async iterators and does not always\n\t\t\t// properly handle when the socket close/end events are out of order.\n\t\t\treq.on('socket', function (s) {\n\t\t\t\ts.addListener('close', function (hadError) {\n\t\t\t\t\t// if a data listener is still present we didn't end cleanly\n\t\t\t\t\tconst hasDataListener = s.listenerCount('data') > 0;\n\n\t\t\t\t\t// if end happened before close but the socket didn't emit an error, do it now\n\t\t\t\t\tif (response && hasDataListener && !hadError && !(signal && signal.aborted)) {\n\t\t\t\t\t\tconst err = new Error('Premature close');\n\t\t\t\t\t\terr.code = 'ERR_STREAM_PREMATURE_CLOSE';\n\t\t\t\t\t\tresponse.body.emit('error', err);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\treq.on('response', function (res) {\n\t\t\tclearTimeout(reqTimeout);\n\n\t\t\tconst headers = createHeadersLenient(res.headers);\n\n\t\t\t// HTTP fetch step 5\n\t\t\tif (fetch.isRedirect(res.statusCode)) {\n\t\t\t\t// HTTP fetch step 5.2\n\t\t\t\tconst location = headers.get('Location');\n\n\t\t\t\t// HTTP fetch step 5.3\n\t\t\t\tlet locationURL = null;\n\t\t\t\ttry {\n\t\t\t\t\tlocationURL = location === null ? null : new URL$1(location, request.url).toString();\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// error here can only be invalid URL in Location: header\n\t\t\t\t\t// do not throw when options.redirect == manual\n\t\t\t\t\t// let the user extract the errorneous redirect URL\n\t\t\t\t\tif (request.redirect !== 'manual') {\n\t\t\t\t\t\treject(new FetchError(`uri requested responds with an invalid redirect URL: ${location}`, 'invalid-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// HTTP fetch step 5.5\n\t\t\t\tswitch (request.redirect) {\n\t\t\t\t\tcase 'error':\n\t\t\t\t\t\treject(new FetchError(`uri requested responds with a redirect, redirect mode is set to error: ${request.url}`, 'no-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\tcase 'manual':\n\t\t\t\t\t\t// node-fetch-specific step: make manual redirect a bit easier to use by setting the Location header value to the resolved URL.\n\t\t\t\t\t\tif (locationURL !== null) {\n\t\t\t\t\t\t\t// handle corrupted header\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\theaders.set('Location', locationURL);\n\t\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t\t// istanbul ignore next: nodejs server prevent invalid response headers, we can't test this through normal request\n\t\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'follow':\n\t\t\t\t\t\t// HTTP-redirect fetch step 2\n\t\t\t\t\t\tif (locationURL === null) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 5\n\t\t\t\t\t\tif (request.counter >= request.follow) {\n\t\t\t\t\t\t\treject(new FetchError(`maximum redirect reached at: ${request.url}`, 'max-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 6 (counter increment)\n\t\t\t\t\t\t// Create a new Request object.\n\t\t\t\t\t\tconst requestOpts = {\n\t\t\t\t\t\t\theaders: new Headers(request.headers),\n\t\t\t\t\t\t\tfollow: request.follow,\n\t\t\t\t\t\t\tcounter: request.counter + 1,\n\t\t\t\t\t\t\tagent: request.agent,\n\t\t\t\t\t\t\tcompress: request.compress,\n\t\t\t\t\t\t\tmethod: request.method,\n\t\t\t\t\t\t\tbody: request.body,\n\t\t\t\t\t\t\tsignal: request.signal,\n\t\t\t\t\t\t\ttimeout: request.timeout,\n\t\t\t\t\t\t\tsize: request.size\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tif (!isDomainOrSubdomain(request.url, locationURL) || !isSameProtocol(request.url, locationURL)) {\n\t\t\t\t\t\t\tfor (const name of ['authorization', 'www-authenticate', 'cookie', 'cookie2']) {\n\t\t\t\t\t\t\t\trequestOpts.headers.delete(name);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 9\n\t\t\t\t\t\tif (res.statusCode !== 303 && request.body && getTotalBytes(request) === null) {\n\t\t\t\t\t\t\treject(new FetchError('Cannot follow redirect with body being a readable stream', 'unsupported-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 11\n\t\t\t\t\t\tif (res.statusCode === 303 || (res.statusCode === 301 || res.statusCode === 302) && request.method === 'POST') {\n\t\t\t\t\t\t\trequestOpts.method = 'GET';\n\t\t\t\t\t\t\trequestOpts.body = undefined;\n\t\t\t\t\t\t\trequestOpts.headers.delete('content-length');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 15\n\t\t\t\t\t\tresolve(fetch(new Request(locationURL, requestOpts)));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// prepare response\n\t\t\tres.once('end', function () {\n\t\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\t});\n\t\t\tlet body = res.pipe(new PassThrough$1());\n\n\t\t\tconst response_options = {\n\t\t\t\turl: request.url,\n\t\t\t\tstatus: res.statusCode,\n\t\t\t\tstatusText: res.statusMessage,\n\t\t\t\theaders: headers,\n\t\t\t\tsize: request.size,\n\t\t\t\ttimeout: request.timeout,\n\t\t\t\tcounter: request.counter\n\t\t\t};\n\n\t\t\t// HTTP-network fetch step 12.1.1.3\n\t\t\tconst codings = headers.get('Content-Encoding');\n\n\t\t\t// HTTP-network fetch step 12.1.1.4: handle content codings\n\n\t\t\t// in following scenarios we ignore compression support\n\t\t\t// 1. compression support is disabled\n\t\t\t// 2. HEAD request\n\t\t\t// 3. no Content-Encoding header\n\t\t\t// 4. no content response (204)\n\t\t\t// 5. content not modified response (304)\n\t\t\tif (!request.compress || request.method === 'HEAD' || codings === null || res.statusCode === 204 || res.statusCode === 304) {\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For Node v6+\n\t\t\t// Be less strict when decoding compressed responses, since sometimes\n\t\t\t// servers send slightly invalid responses that are still accepted\n\t\t\t// by common browsers.\n\t\t\t// Always using Z_SYNC_FLUSH is what cURL does.\n\t\t\tconst zlibOptions = {\n\t\t\t\tflush: zlib.Z_SYNC_FLUSH,\n\t\t\t\tfinishFlush: zlib.Z_SYNC_FLUSH\n\t\t\t};\n\n\t\t\t// for gzip\n\t\t\tif (codings == 'gzip' || codings == 'x-gzip') {\n\t\t\t\tbody = body.pipe(zlib.createGunzip(zlibOptions));\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for deflate\n\t\t\tif (codings == 'deflate' || codings == 'x-deflate') {\n\t\t\t\t// handle the infamous raw deflate response from old servers\n\t\t\t\t// a hack for old IIS and Apache servers\n\t\t\t\tconst raw = res.pipe(new PassThrough$1());\n\t\t\t\traw.once('data', function (chunk) {\n\t\t\t\t\t// see http://stackoverflow.com/questions/37519828\n\t\t\t\t\tif ((chunk[0] & 0x0F) === 0x08) {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflate());\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflateRaw());\n\t\t\t\t\t}\n\t\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\t\tresolve(response);\n\t\t\t\t});\n\t\t\t\traw.on('end', function () {\n\t\t\t\t\t// some old IIS servers return zero-length OK deflate responses, so 'data' is never emitted.\n\t\t\t\t\tif (!response) {\n\t\t\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for br\n\t\t\tif (codings == 'br' && typeof zlib.createBrotliDecompress === 'function') {\n\t\t\t\tbody = body.pipe(zlib.createBrotliDecompress());\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// otherwise, use response as-is\n\t\t\tresponse = new Response(body, response_options);\n\t\t\tresolve(response);\n\t\t});\n\n\t\twriteToStream(req, request);\n\t});\n}\nfunction fixResponseChunkedTransferBadEnding(request, errorCallback) {\n\tlet socket;\n\n\trequest.on('socket', function (s) {\n\t\tsocket = s;\n\t});\n\n\trequest.on('response', function (response) {\n\t\tconst headers = response.headers;\n\n\t\tif (headers['transfer-encoding'] === 'chunked' && !headers['content-length']) {\n\t\t\tresponse.once('close', function (hadError) {\n\t\t\t\t// tests for socket presence, as in some situations the\n\t\t\t\t// the 'socket' event is not triggered for the request\n\t\t\t\t// (happens in deno), avoids `TypeError`\n\t\t\t\t// if a data listener is still present we didn't end cleanly\n\t\t\t\tconst hasDataListener = socket && socket.listenerCount('data') > 0;\n\n\t\t\t\tif (hasDataListener && !hadError) {\n\t\t\t\t\tconst err = new Error('Premature close');\n\t\t\t\t\terr.code = 'ERR_STREAM_PREMATURE_CLOSE';\n\t\t\t\t\terrorCallback(err);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n}\n\nfunction destroyStream(stream, err) {\n\tif (stream.destroy) {\n\t\tstream.destroy(err);\n\t} else {\n\t\t// node < 8\n\t\tstream.emit('error', err);\n\t\tstream.end();\n\t}\n}\n\n/**\n * Redirect code matching\n *\n * @param   Number   code  Status code\n * @return  Boolean\n */\nfetch.isRedirect = function (code) {\n\treturn code === 301 || code === 302 || code === 303 || code === 307 || code === 308;\n};\n\n// expose Promise\nfetch.Promise = global.Promise;\n\nexport default fetch;\nexport { Headers, Request, Response, FetchError, AbortError };\n","'use strict';\n\nconst isStream = stream =>\n\tstream !== null &&\n\ttypeof stream === 'object' &&\n\ttypeof stream.pipe === 'function';\n\nisStream.writable = stream =>\n\tisStream(stream) &&\n\tstream.writable !== false &&\n\ttypeof stream._write === 'function' &&\n\ttypeof stream._writableState === 'object';\n\nisStream.readable = stream =>\n\tisStream(stream) &&\n\tstream.readable !== false &&\n\ttypeof stream._read === 'function' &&\n\ttypeof stream._readableState === 'object';\n\nisStream.duplex = stream =>\n\tisStream.writable(stream) &&\n\tisStream.readable(stream);\n\nisStream.transform = stream =>\n\tisStream.duplex(stream) &&\n\ttypeof stream._transform === 'function';\n\nmodule.exports = isStream;\n","unable to read source [project]/node_modules/gaxios/src/util.ts","unable to read source [project]/node_modules/gaxios/src/common.ts","unable to read source [project]/node_modules/gaxios/src/retry.ts","import crypto from 'crypto';\nconst rnds8Pool = new Uint8Array(256); // # of random values to pre-allocate\n\nlet poolPtr = rnds8Pool.length;\nexport default function rng() {\n  if (poolPtr > rnds8Pool.length - 16) {\n    crypto.randomFillSync(rnds8Pool);\n    poolPtr = 0;\n  }\n\n  return rnds8Pool.slice(poolPtr, poolPtr += 16);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import rng from './rng.js';\nimport { unsafeStringify } from './stringify.js'; // **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nlet _nodeId;\n\nlet _clockseq; // Previous uuid creation time\n\n\nlet _lastMSecs = 0;\nlet _lastNSecs = 0; // See https://github.com/uuidjs/uuid for API details\n\nfunction v1(options, buf, offset) {\n  let i = buf && offset || 0;\n  const b = buf || new Array(16);\n  options = options || {};\n  let node = options.node || _nodeId;\n  let clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq; // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n\n  if (node == null || clockseq == null) {\n    const seedBytes = options.random || (options.rng || rng)();\n\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [seedBytes[0] | 0x01, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];\n    }\n\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  } // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n\n\n  let msecs = options.msecs !== undefined ? options.msecs : Date.now(); // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n\n  let nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1; // Time since last uuid creation (in msecs)\n\n  const dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000; // Per 4.2.1.2, Bump clockseq on clock regression\n\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  } // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n\n\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  } // Per 4.2.1.2 Throw error if too many uuids are requested\n\n\n  if (nsecs >= 10000) {\n    throw new Error(\"uuid.v1(): Can't create more than 10M uuids/sec\");\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq; // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n\n  msecs += 12219292800000; // `time_low`\n\n  const tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff; // `time_mid`\n\n  const tmh = msecs / 0x100000000 * 10000 & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff; // `time_high_and_version`\n\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n\n  b[i++] = tmh >>> 16 & 0xff; // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n\n  b[i++] = clockseq >>> 8 | 0x80; // `clock_seq_low`\n\n  b[i++] = clockseq & 0xff; // `node`\n\n  for (let n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf || unsafeStringify(b);\n}\n\nexport default v1;","import validate from './validate.js';\n\nfunction parse(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  let v;\n  const arr = new Uint8Array(16); // Parse ########-....-....-....-............\n\n  arr[0] = (v = parseInt(uuid.slice(0, 8), 16)) >>> 24;\n  arr[1] = v >>> 16 & 0xff;\n  arr[2] = v >>> 8 & 0xff;\n  arr[3] = v & 0xff; // Parse ........-####-....-....-............\n\n  arr[4] = (v = parseInt(uuid.slice(9, 13), 16)) >>> 8;\n  arr[5] = v & 0xff; // Parse ........-....-####-....-............\n\n  arr[6] = (v = parseInt(uuid.slice(14, 18), 16)) >>> 8;\n  arr[7] = v & 0xff; // Parse ........-....-....-####-............\n\n  arr[8] = (v = parseInt(uuid.slice(19, 23), 16)) >>> 8;\n  arr[9] = v & 0xff; // Parse ........-....-....-....-############\n  // (Use \"/\" to avoid 32-bit truncation when bit-shifting high-order bytes)\n\n  arr[10] = (v = parseInt(uuid.slice(24, 36), 16)) / 0x10000000000 & 0xff;\n  arr[11] = v / 0x100000000 & 0xff;\n  arr[12] = v >>> 24 & 0xff;\n  arr[13] = v >>> 16 & 0xff;\n  arr[14] = v >>> 8 & 0xff;\n  arr[15] = v & 0xff;\n  return arr;\n}\n\nexport default parse;","import { unsafeStringify } from './stringify.js';\nimport parse from './parse.js';\n\nfunction stringToBytes(str) {\n  str = unescape(encodeURIComponent(str)); // UTF8 escape\n\n  const bytes = [];\n\n  for (let i = 0; i < str.length; ++i) {\n    bytes.push(str.charCodeAt(i));\n  }\n\n  return bytes;\n}\n\nexport const DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';\nexport const URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';\nexport default function v35(name, version, hashfunc) {\n  function generateUUID(value, namespace, buf, offset) {\n    var _namespace;\n\n    if (typeof value === 'string') {\n      value = stringToBytes(value);\n    }\n\n    if (typeof namespace === 'string') {\n      namespace = parse(namespace);\n    }\n\n    if (((_namespace = namespace) === null || _namespace === void 0 ? void 0 : _namespace.length) !== 16) {\n      throw TypeError('Namespace must be array-like (16 iterable integer values, 0-255)');\n    } // Compute hash of namespace and value, Per 4.3\n    // Future: Use spread syntax when supported on all platforms, e.g. `bytes =\n    // hashfunc([...namespace, ... value])`\n\n\n    let bytes = new Uint8Array(16 + value.length);\n    bytes.set(namespace);\n    bytes.set(value, namespace.length);\n    bytes = hashfunc(bytes);\n    bytes[6] = bytes[6] & 0x0f | version;\n    bytes[8] = bytes[8] & 0x3f | 0x80;\n\n    if (buf) {\n      offset = offset || 0;\n\n      for (let i = 0; i < 16; ++i) {\n        buf[offset + i] = bytes[i];\n      }\n\n      return buf;\n    }\n\n    return unsafeStringify(bytes);\n  } // Function#name is not settable on some platforms (#270)\n\n\n  try {\n    generateUUID.name = name; // eslint-disable-next-line no-empty\n  } catch (err) {} // For CommonJS default export support\n\n\n  generateUUID.DNS = DNS;\n  generateUUID.URL = URL;\n  return generateUUID;\n}","import crypto from 'crypto';\n\nfunction md5(bytes) {\n  if (Array.isArray(bytes)) {\n    bytes = Buffer.from(bytes);\n  } else if (typeof bytes === 'string') {\n    bytes = Buffer.from(bytes, 'utf8');\n  }\n\n  return crypto.createHash('md5').update(bytes).digest();\n}\n\nexport default md5;","import v35 from './v35.js';\nimport md5 from './md5.js';\nconst v3 = v35('v3', 0x30, md5);\nexport default v3;","import crypto from 'crypto';\nexport default {\n  randomUUID: crypto.randomUUID\n};","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","import crypto from 'crypto';\n\nfunction sha1(bytes) {\n  if (Array.isArray(bytes)) {\n    bytes = Buffer.from(bytes);\n  } else if (typeof bytes === 'string') {\n    bytes = Buffer.from(bytes, 'utf8');\n  }\n\n  return crypto.createHash('sha1').update(bytes).digest();\n}\n\nexport default sha1;","import v35 from './v35.js';\nimport sha1 from './sha1.js';\nconst v5 = v35('v5', 0x50, sha1);\nexport default v5;","export default '00000000-0000-0000-0000-000000000000';","import validate from './validate.js';\n\nfunction version(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  return parseInt(uuid.slice(14, 15), 16);\n}\n\nexport default version;","unable to read source [project]/node_modules/gaxios/src/interceptor.ts","unable to read source [project]/node_modules/gaxios/src/gaxios.ts","unable to read source [project]/node_modules/gaxios/src/index.ts","unable to read source [project]/node_modules/@google-cloud/vertexai/node_modules/google-logging-utils/src/colours.ts","unable to read source [project]/node_modules/@google-cloud/vertexai/node_modules/google-logging-utils/src/logging-utils.ts","unable to read source [project]/node_modules/@google-cloud/vertexai/node_modules/google-logging-utils/src/index.ts","unable to read source [project]/node_modules/@google-cloud/vertexai/node_modules/gcp-metadata/src/index.ts","\"use strict\";\n// Copyright 2019 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n/* global window */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BrowserCrypto = void 0;\n// This file implements crypto functions we need using in-browser\n// SubtleCrypto interface `window.crypto.subtle`.\nconst base64js = require(\"base64-js\");\nconst crypto_1 = require(\"../crypto\");\nclass BrowserCrypto {\n    constructor() {\n        if (typeof window === 'undefined' ||\n            window.crypto === undefined ||\n            window.crypto.subtle === undefined) {\n            throw new Error(\"SubtleCrypto not found. Make sure it's an https:// website.\");\n        }\n    }\n    async sha256DigestBase64(str) {\n        // SubtleCrypto digest() method is async, so we must make\n        // this method async as well.\n        // To calculate SHA256 digest using SubtleCrypto, we first\n        // need to convert an input string to an ArrayBuffer:\n        const inputBuffer = new TextEncoder().encode(str);\n        // Result is ArrayBuffer as well.\n        const outputBuffer = await window.crypto.subtle.digest('SHA-256', inputBuffer);\n        return base64js.fromByteArray(new Uint8Array(outputBuffer));\n    }\n    randomBytesBase64(count) {\n        const array = new Uint8Array(count);\n        window.crypto.getRandomValues(array);\n        return base64js.fromByteArray(array);\n    }\n    static padBase64(base64) {\n        // base64js requires padding, so let's add some '='\n        while (base64.length % 4 !== 0) {\n            base64 += '=';\n        }\n        return base64;\n    }\n    async verify(pubkey, data, signature) {\n        const algo = {\n            name: 'RSASSA-PKCS1-v1_5',\n            hash: { name: 'SHA-256' },\n        };\n        const dataArray = new TextEncoder().encode(data);\n        const signatureArray = base64js.toByteArray(BrowserCrypto.padBase64(signature));\n        const cryptoKey = await window.crypto.subtle.importKey('jwk', pubkey, algo, true, ['verify']);\n        // SubtleCrypto's verify method is async so we must make\n        // this method async as well.\n        const result = await window.crypto.subtle.verify(algo, cryptoKey, signatureArray, dataArray);\n        return result;\n    }\n    async sign(privateKey, data) {\n        const algo = {\n            name: 'RSASSA-PKCS1-v1_5',\n            hash: { name: 'SHA-256' },\n        };\n        const dataArray = new TextEncoder().encode(data);\n        const cryptoKey = await window.crypto.subtle.importKey('jwk', privateKey, algo, true, ['sign']);\n        // SubtleCrypto's sign method is async so we must make\n        // this method async as well.\n        const result = await window.crypto.subtle.sign(algo, cryptoKey, dataArray);\n        return base64js.fromByteArray(new Uint8Array(result));\n    }\n    decodeBase64StringUtf8(base64) {\n        const uint8array = base64js.toByteArray(BrowserCrypto.padBase64(base64));\n        const result = new TextDecoder().decode(uint8array);\n        return result;\n    }\n    encodeBase64StringUtf8(text) {\n        const uint8array = new TextEncoder().encode(text);\n        const result = base64js.fromByteArray(uint8array);\n        return result;\n    }\n    /**\n     * Computes the SHA-256 hash of the provided string.\n     * @param str The plain text string to hash.\n     * @return A promise that resolves with the SHA-256 hash of the provided\n     *   string in hexadecimal encoding.\n     */\n    async sha256DigestHex(str) {\n        // SubtleCrypto digest() method is async, so we must make\n        // this method async as well.\n        // To calculate SHA256 digest using SubtleCrypto, we first\n        // need to convert an input string to an ArrayBuffer:\n        const inputBuffer = new TextEncoder().encode(str);\n        // Result is ArrayBuffer as well.\n        const outputBuffer = await window.crypto.subtle.digest('SHA-256', inputBuffer);\n        return (0, crypto_1.fromArrayBufferToHex)(outputBuffer);\n    }\n    /**\n     * Computes the HMAC hash of a message using the provided crypto key and the\n     * SHA-256 algorithm.\n     * @param key The secret crypto key in utf-8 or ArrayBuffer format.\n     * @param msg The plain text message.\n     * @return A promise that resolves with the HMAC-SHA256 hash in ArrayBuffer\n     *   format.\n     */\n    async signWithHmacSha256(key, msg) {\n        // Convert key, if provided in ArrayBuffer format, to string.\n        const rawKey = typeof key === 'string'\n            ? key\n            : String.fromCharCode(...new Uint16Array(key));\n        const enc = new TextEncoder();\n        const cryptoKey = await window.crypto.subtle.importKey('raw', enc.encode(rawKey), {\n            name: 'HMAC',\n            hash: {\n                name: 'SHA-256',\n            },\n        }, false, ['sign']);\n        return window.crypto.subtle.sign('HMAC', cryptoKey, enc.encode(msg));\n    }\n}\nexports.BrowserCrypto = BrowserCrypto;\n","\"use strict\";\n// Copyright 2019 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NodeCrypto = void 0;\nconst crypto = require(\"crypto\");\nclass NodeCrypto {\n    async sha256DigestBase64(str) {\n        return crypto.createHash('sha256').update(str).digest('base64');\n    }\n    randomBytesBase64(count) {\n        return crypto.randomBytes(count).toString('base64');\n    }\n    async verify(pubkey, data, signature) {\n        const verifier = crypto.createVerify('RSA-SHA256');\n        verifier.update(data);\n        verifier.end();\n        return verifier.verify(pubkey, signature, 'base64');\n    }\n    async sign(privateKey, data) {\n        const signer = crypto.createSign('RSA-SHA256');\n        signer.update(data);\n        signer.end();\n        return signer.sign(privateKey, 'base64');\n    }\n    decodeBase64StringUtf8(base64) {\n        return Buffer.from(base64, 'base64').toString('utf-8');\n    }\n    encodeBase64StringUtf8(text) {\n        return Buffer.from(text, 'utf-8').toString('base64');\n    }\n    /**\n     * Computes the SHA-256 hash of the provided string.\n     * @param str The plain text string to hash.\n     * @return A promise that resolves with the SHA-256 hash of the provided\n     *   string in hexadecimal encoding.\n     */\n    async sha256DigestHex(str) {\n        return crypto.createHash('sha256').update(str).digest('hex');\n    }\n    /**\n     * Computes the HMAC hash of a message using the provided crypto key and the\n     * SHA-256 algorithm.\n     * @param key The secret crypto key in utf-8 or ArrayBuffer format.\n     * @param msg The plain text message.\n     * @return A promise that resolves with the HMAC-SHA256 hash in ArrayBuffer\n     *   format.\n     */\n    async signWithHmacSha256(key, msg) {\n        const cryptoKey = typeof key === 'string' ? key : toBuffer(key);\n        return toArrayBuffer(crypto.createHmac('sha256', cryptoKey).update(msg).digest());\n    }\n}\nexports.NodeCrypto = NodeCrypto;\n/**\n * Converts a Node.js Buffer to an ArrayBuffer.\n * https://stackoverflow.com/questions/8609289/convert-a-binary-nodejs-buffer-to-javascript-arraybuffer\n * @param buffer The Buffer input to covert.\n * @return The ArrayBuffer representation of the input.\n */\nfunction toArrayBuffer(buffer) {\n    return buffer.buffer.slice(buffer.byteOffset, buffer.byteOffset + buffer.byteLength);\n}\n/**\n * Converts an ArrayBuffer to a Node.js Buffer.\n * @param arrayBuffer The ArrayBuffer input to covert.\n * @return The Buffer representation of the input.\n */\nfunction toBuffer(arrayBuffer) {\n    return Buffer.from(arrayBuffer);\n}\n","\"use strict\";\n// Copyright 2019 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n/* global window */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createCrypto = createCrypto;\nexports.hasBrowserCrypto = hasBrowserCrypto;\nexports.fromArrayBufferToHex = fromArrayBufferToHex;\nconst crypto_1 = require(\"./browser/crypto\");\nconst crypto_2 = require(\"./node/crypto\");\nfunction createCrypto() {\n    if (hasBrowserCrypto()) {\n        return new crypto_1.BrowserCrypto();\n    }\n    return new crypto_2.NodeCrypto();\n}\nfunction hasBrowserCrypto() {\n    return (typeof window !== 'undefined' &&\n        typeof window.crypto !== 'undefined' &&\n        typeof window.crypto.subtle !== 'undefined');\n}\n/**\n * Converts an ArrayBuffer to a hexadecimal string.\n * @param arrayBuffer The ArrayBuffer to convert to hexadecimal string.\n * @return The hexadecimal encoding of the ArrayBuffer.\n */\nfunction fromArrayBufferToHex(arrayBuffer) {\n    // Convert buffer to byte array.\n    const byteArray = Array.from(new Uint8Array(arrayBuffer));\n    // Convert bytes to hex string.\n    return byteArray\n        .map(byte => {\n        return byte.toString(16).padStart(2, '0');\n    })\n        .join('');\n}\n","\"use strict\";\n// Copyright 2017 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validate = validate;\n// Accepts an options object passed from the user to the API.  In the\n// previous version of the API, it referred to a `Request` options object.\n// Now it refers to an Axiox Request Config object.  This is here to help\n// ensure users don't pass invalid options when they upgrade from 0.x to 1.x.\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction validate(options) {\n    const vpairs = [\n        { invalid: 'uri', expected: 'url' },\n        { invalid: 'json', expected: 'data' },\n        { invalid: 'qs', expected: 'params' },\n    ];\n    for (const pair of vpairs) {\n        if (options[pair.invalid]) {\n            const e = `'${pair.invalid}' is not a valid configuration option. Please use '${pair.expected}' instead. This library is using Axios for requests. Please see https://github.com/axios/axios to learn more about the valid request options.`;\n            throw new Error(e);\n        }\n    }\n}\n","\"use strict\";\n// Copyright 2019 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DefaultTransporter = void 0;\nconst gaxios_1 = require(\"gaxios\");\nconst options_1 = require(\"./options\");\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst pkg = require('../../package.json');\nconst PRODUCT_NAME = 'google-api-nodejs-client';\nclass DefaultTransporter {\n    constructor() {\n        /**\n         * A configurable, replacable `Gaxios` instance.\n         */\n        this.instance = new gaxios_1.Gaxios();\n    }\n    /**\n     * Configures request options before making a request.\n     * @param opts GaxiosOptions options.\n     * @return Configured options.\n     */\n    configure(opts = {}) {\n        opts.headers = opts.headers || {};\n        if (typeof window === 'undefined') {\n            // set transporter user agent if not in browser\n            const uaValue = opts.headers['User-Agent'];\n            if (!uaValue) {\n                opts.headers['User-Agent'] = DefaultTransporter.USER_AGENT;\n            }\n            else if (!uaValue.includes(`${PRODUCT_NAME}/`)) {\n                opts.headers['User-Agent'] =\n                    `${uaValue} ${DefaultTransporter.USER_AGENT}`;\n            }\n            // track google-auth-library-nodejs version:\n            if (!opts.headers['x-goog-api-client']) {\n                const nodeVersion = process.version.replace(/^v/, '');\n                opts.headers['x-goog-api-client'] = `gl-node/${nodeVersion}`;\n            }\n        }\n        return opts;\n    }\n    /**\n     * Makes a request using Gaxios with given options.\n     * @param opts GaxiosOptions options.\n     * @param callback optional callback that contains GaxiosResponse object.\n     * @return GaxiosPromise, assuming no callback is passed.\n     */\n    request(opts) {\n        // ensure the user isn't passing in request-style options\n        opts = this.configure(opts);\n        (0, options_1.validate)(opts);\n        return this.instance.request(opts).catch(e => {\n            throw this.processError(e);\n        });\n    }\n    get defaults() {\n        return this.instance.defaults;\n    }\n    set defaults(opts) {\n        this.instance.defaults = opts;\n    }\n    /**\n     * Changes the error to include details from the body.\n     */\n    processError(e) {\n        const res = e.response;\n        const err = e;\n        const body = res ? res.data : null;\n        if (res && body && body.error && res.status !== 200) {\n            if (typeof body.error === 'string') {\n                err.message = body.error;\n                err.status = res.status;\n            }\n            else if (Array.isArray(body.error.errors)) {\n                err.message = body.error.errors\n                    .map((err2) => err2.message)\n                    .join('\\n');\n                err.code = body.error.code;\n                err.errors = body.error.errors;\n            }\n            else {\n                err.message = body.error.message;\n                err.code = body.error.code;\n            }\n        }\n        else if (res && res.status >= 400) {\n            // Consider all 4xx and 5xx responses errors.\n            err.message = body;\n            err.status = res.status;\n        }\n        return err;\n    }\n}\nexports.DefaultTransporter = DefaultTransporter;\n/**\n * Default user agent.\n */\nDefaultTransporter.USER_AGENT = `${PRODUCT_NAME}/${pkg.version}`;\n","\"use strict\";\n// Copyright 2023 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _LRUCache_instances, _LRUCache_cache, _LRUCache_moveToEnd, _LRUCache_evict;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LRUCache = void 0;\nexports.snakeToCamel = snakeToCamel;\nexports.originalOrCamelOptions = originalOrCamelOptions;\n/**\n * Returns the camel case of a provided string.\n *\n * @remarks\n *\n * Match any `_` and not `_` pair, then return the uppercase of the not `_`\n * character.\n *\n * @internal\n *\n * @param str the string to convert\n * @returns the camelCase'd string\n */\nfunction snakeToCamel(str) {\n    return str.replace(/([_][^_])/g, match => match.slice(1).toUpperCase());\n}\n/**\n * Get the value of `obj[key]` or `obj[camelCaseKey]`, with a preference\n * for original, non-camelCase key.\n *\n * @param obj object to lookup a value in\n * @returns a `get` function for getting `obj[key || snakeKey]`, if available\n */\nfunction originalOrCamelOptions(obj) {\n    /**\n     *\n     * @param key an index of object, preferably snake_case\n     * @returns the value `obj[key || snakeKey]`, if available\n     */\n    function get(key) {\n        var _a;\n        const o = (obj || {});\n        return (_a = o[key]) !== null && _a !== void 0 ? _a : o[snakeToCamel(key)];\n    }\n    return { get };\n}\n/**\n * A simple LRU cache utility.\n * Not meant for external usage.\n *\n * @experimental\n * @internal\n */\nclass LRUCache {\n    constructor(options) {\n        _LRUCache_instances.add(this);\n        /**\n         * Maps are in order. Thus, the older item is the first item.\n         *\n         * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map}\n         */\n        _LRUCache_cache.set(this, new Map());\n        this.capacity = options.capacity;\n        this.maxAge = options.maxAge;\n    }\n    /**\n     * Add an item to the cache.\n     *\n     * @param key the key to upsert\n     * @param value the value of the key\n     */\n    set(key, value) {\n        __classPrivateFieldGet(this, _LRUCache_instances, \"m\", _LRUCache_moveToEnd).call(this, key, value);\n        __classPrivateFieldGet(this, _LRUCache_instances, \"m\", _LRUCache_evict).call(this);\n    }\n    /**\n     * Get an item from the cache.\n     *\n     * @param key the key to retrieve\n     */\n    get(key) {\n        const item = __classPrivateFieldGet(this, _LRUCache_cache, \"f\").get(key);\n        if (!item)\n            return;\n        __classPrivateFieldGet(this, _LRUCache_instances, \"m\", _LRUCache_moveToEnd).call(this, key, item.value);\n        __classPrivateFieldGet(this, _LRUCache_instances, \"m\", _LRUCache_evict).call(this);\n        return item.value;\n    }\n}\nexports.LRUCache = LRUCache;\n_LRUCache_cache = new WeakMap(), _LRUCache_instances = new WeakSet(), _LRUCache_moveToEnd = function _LRUCache_moveToEnd(key, value) {\n    __classPrivateFieldGet(this, _LRUCache_cache, \"f\").delete(key);\n    __classPrivateFieldGet(this, _LRUCache_cache, \"f\").set(key, {\n        value,\n        lastAccessed: Date.now(),\n    });\n}, _LRUCache_evict = function _LRUCache_evict() {\n    const cutoffDate = this.maxAge ? Date.now() - this.maxAge : 0;\n    /**\n     * Because we know Maps are in order, this item is both the\n     * last item in the list (capacity) and oldest (maxAge).\n     */\n    let oldestItem = __classPrivateFieldGet(this, _LRUCache_cache, \"f\").entries().next();\n    while (!oldestItem.done &&\n        (__classPrivateFieldGet(this, _LRUCache_cache, \"f\").size > this.capacity || // too many\n            oldestItem.value[1].lastAccessed < cutoffDate) // too old\n    ) {\n        __classPrivateFieldGet(this, _LRUCache_cache, \"f\").delete(oldestItem.value[0]);\n        oldestItem = __classPrivateFieldGet(this, _LRUCache_cache, \"f\").entries().next();\n    }\n};\n","\"use strict\";\n// Copyright 2012 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AuthClient = exports.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS = exports.DEFAULT_UNIVERSE = void 0;\nconst events_1 = require(\"events\");\nconst gaxios_1 = require(\"gaxios\");\nconst transporters_1 = require(\"../transporters\");\nconst util_1 = require(\"../util\");\n/**\n * The default cloud universe\n *\n * @see {@link AuthJSONOptions.universe_domain}\n */\nexports.DEFAULT_UNIVERSE = 'googleapis.com';\n/**\n * The default {@link AuthClientOptions.eagerRefreshThresholdMillis}\n */\nexports.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS = 5 * 60 * 1000;\nclass AuthClient extends events_1.EventEmitter {\n    constructor(opts = {}) {\n        var _a, _b, _c, _d, _e;\n        super();\n        this.credentials = {};\n        this.eagerRefreshThresholdMillis = exports.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS;\n        this.forceRefreshOnFailure = false;\n        this.universeDomain = exports.DEFAULT_UNIVERSE;\n        const options = (0, util_1.originalOrCamelOptions)(opts);\n        // Shared auth options\n        this.apiKey = opts.apiKey;\n        this.projectId = (_a = options.get('project_id')) !== null && _a !== void 0 ? _a : null;\n        this.quotaProjectId = options.get('quota_project_id');\n        this.credentials = (_b = options.get('credentials')) !== null && _b !== void 0 ? _b : {};\n        this.universeDomain = (_c = options.get('universe_domain')) !== null && _c !== void 0 ? _c : exports.DEFAULT_UNIVERSE;\n        // Shared client options\n        this.transporter = (_d = opts.transporter) !== null && _d !== void 0 ? _d : new transporters_1.DefaultTransporter();\n        if (opts.transporterOptions) {\n            this.transporter.defaults = opts.transporterOptions;\n        }\n        if (opts.eagerRefreshThresholdMillis) {\n            this.eagerRefreshThresholdMillis = opts.eagerRefreshThresholdMillis;\n        }\n        this.forceRefreshOnFailure = (_e = opts.forceRefreshOnFailure) !== null && _e !== void 0 ? _e : false;\n    }\n    /**\n     * Return the {@link Gaxios `Gaxios`} instance from the {@link AuthClient.transporter}.\n     *\n     * @expiremental\n     */\n    get gaxios() {\n        if (this.transporter instanceof gaxios_1.Gaxios) {\n            return this.transporter;\n        }\n        else if (this.transporter instanceof transporters_1.DefaultTransporter) {\n            return this.transporter.instance;\n        }\n        else if ('instance' in this.transporter &&\n            this.transporter.instance instanceof gaxios_1.Gaxios) {\n            return this.transporter.instance;\n        }\n        return null;\n    }\n    /**\n     * Sets the auth credentials.\n     */\n    setCredentials(credentials) {\n        this.credentials = credentials;\n    }\n    /**\n     * Append additional headers, e.g., x-goog-user-project, shared across the\n     * classes inheriting AuthClient. This method should be used by any method\n     * that overrides getRequestMetadataAsync(), which is a shared helper for\n     * setting request information in both gRPC and HTTP API calls.\n     *\n     * @param headers object to append additional headers to.\n     */\n    addSharedMetadataHeaders(headers) {\n        // quota_project_id, stored in application_default_credentials.json, is set in\n        // the x-goog-user-project header, to indicate an alternate account for\n        // billing and quota:\n        if (!headers['x-goog-user-project'] && // don't override a value the user sets.\n            this.quotaProjectId) {\n            headers['x-goog-user-project'] = this.quotaProjectId;\n        }\n        return headers;\n    }\n    /**\n     * Retry config for Auth-related requests.\n     *\n     * @remarks\n     *\n     * This is not a part of the default {@link AuthClient.transporter transporter/gaxios}\n     * config as some downstream APIs would prefer if customers explicitly enable retries,\n     * such as GCS.\n     */\n    static get RETRY_CONFIG() {\n        return {\n            retry: true,\n            retryConfig: {\n                httpMethodsToRetry: ['GET', 'PUT', 'POST', 'HEAD', 'OPTIONS', 'DELETE'],\n            },\n        };\n    }\n}\nexports.AuthClient = AuthClient;\n","\"use strict\";\n// Copyright 2014 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LoginTicket = void 0;\nclass LoginTicket {\n    /**\n     * Create a simple class to extract user ID from an ID Token\n     *\n     * @param {string} env Envelope of the jwt\n     * @param {TokenPayload} pay Payload of the jwt\n     * @constructor\n     */\n    constructor(env, pay) {\n        this.envelope = env;\n        this.payload = pay;\n    }\n    getEnvelope() {\n        return this.envelope;\n    }\n    getPayload() {\n        return this.payload;\n    }\n    /**\n     * Create a simple class to extract user ID from an ID Token\n     *\n     * @return The user ID\n     */\n    getUserId() {\n        const payload = this.getPayload();\n        if (payload && payload.sub) {\n            return payload.sub;\n        }\n        return null;\n    }\n    /**\n     * Returns attributes from the login ticket.  This can contain\n     * various information about the user session.\n     *\n     * @return The envelope and payload\n     */\n    getAttributes() {\n        return { envelope: this.getEnvelope(), payload: this.getPayload() };\n    }\n}\nexports.LoginTicket = LoginTicket;\n","\"use strict\";\n// Copyright 2019 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OAuth2Client = exports.ClientAuthentication = exports.CertificateFormat = exports.CodeChallengeMethod = void 0;\nconst gaxios_1 = require(\"gaxios\");\nconst querystring = require(\"querystring\");\nconst stream = require(\"stream\");\nconst formatEcdsa = require(\"ecdsa-sig-formatter\");\nconst crypto_1 = require(\"../crypto/crypto\");\nconst authclient_1 = require(\"./authclient\");\nconst loginticket_1 = require(\"./loginticket\");\nvar CodeChallengeMethod;\n(function (CodeChallengeMethod) {\n    CodeChallengeMethod[\"Plain\"] = \"plain\";\n    CodeChallengeMethod[\"S256\"] = \"S256\";\n})(CodeChallengeMethod || (exports.CodeChallengeMethod = CodeChallengeMethod = {}));\nvar CertificateFormat;\n(function (CertificateFormat) {\n    CertificateFormat[\"PEM\"] = \"PEM\";\n    CertificateFormat[\"JWK\"] = \"JWK\";\n})(CertificateFormat || (exports.CertificateFormat = CertificateFormat = {}));\n/**\n * The client authentication type. Supported values are basic, post, and none.\n * https://datatracker.ietf.org/doc/html/rfc7591#section-2\n */\nvar ClientAuthentication;\n(function (ClientAuthentication) {\n    ClientAuthentication[\"ClientSecretPost\"] = \"ClientSecretPost\";\n    ClientAuthentication[\"ClientSecretBasic\"] = \"ClientSecretBasic\";\n    ClientAuthentication[\"None\"] = \"None\";\n})(ClientAuthentication || (exports.ClientAuthentication = ClientAuthentication = {}));\nclass OAuth2Client extends authclient_1.AuthClient {\n    constructor(optionsOrClientId, clientSecret, redirectUri) {\n        const opts = optionsOrClientId && typeof optionsOrClientId === 'object'\n            ? optionsOrClientId\n            : { clientId: optionsOrClientId, clientSecret, redirectUri };\n        super(opts);\n        this.certificateCache = {};\n        this.certificateExpiry = null;\n        this.certificateCacheFormat = CertificateFormat.PEM;\n        this.refreshTokenPromises = new Map();\n        this._clientId = opts.clientId;\n        this._clientSecret = opts.clientSecret;\n        this.redirectUri = opts.redirectUri;\n        this.endpoints = {\n            tokenInfoUrl: 'https://oauth2.googleapis.com/tokeninfo',\n            oauth2AuthBaseUrl: 'https://accounts.google.com/o/oauth2/v2/auth',\n            oauth2TokenUrl: 'https://oauth2.googleapis.com/token',\n            oauth2RevokeUrl: 'https://oauth2.googleapis.com/revoke',\n            oauth2FederatedSignonPemCertsUrl: 'https://www.googleapis.com/oauth2/v1/certs',\n            oauth2FederatedSignonJwkCertsUrl: 'https://www.googleapis.com/oauth2/v3/certs',\n            oauth2IapPublicKeyUrl: 'https://www.gstatic.com/iap/verify/public_key',\n            ...opts.endpoints,\n        };\n        this.clientAuthentication =\n            opts.clientAuthentication || ClientAuthentication.ClientSecretPost;\n        this.issuers = opts.issuers || [\n            'accounts.google.com',\n            'https://accounts.google.com',\n            this.universeDomain,\n        ];\n    }\n    /**\n     * Generates URL for consent page landing.\n     * @param opts Options.\n     * @return URL to consent page.\n     */\n    generateAuthUrl(opts = {}) {\n        if (opts.code_challenge_method && !opts.code_challenge) {\n            throw new Error('If a code_challenge_method is provided, code_challenge must be included.');\n        }\n        opts.response_type = opts.response_type || 'code';\n        opts.client_id = opts.client_id || this._clientId;\n        opts.redirect_uri = opts.redirect_uri || this.redirectUri;\n        // Allow scopes to be passed either as array or a string\n        if (Array.isArray(opts.scope)) {\n            opts.scope = opts.scope.join(' ');\n        }\n        const rootUrl = this.endpoints.oauth2AuthBaseUrl.toString();\n        return (rootUrl +\n            '?' +\n            querystring.stringify(opts));\n    }\n    generateCodeVerifier() {\n        // To make the code compatible with browser SubtleCrypto we need to make\n        // this method async.\n        throw new Error('generateCodeVerifier is removed, please use generateCodeVerifierAsync instead.');\n    }\n    /**\n     * Convenience method to automatically generate a code_verifier, and its\n     * resulting SHA256. If used, this must be paired with a S256\n     * code_challenge_method.\n     *\n     * For a full example see:\n     * https://github.com/googleapis/google-auth-library-nodejs/blob/main/samples/oauth2-codeVerifier.js\n     */\n    async generateCodeVerifierAsync() {\n        // base64 encoding uses 6 bits per character, and we want to generate128\n        // characters. 6*128/8 = 96.\n        const crypto = (0, crypto_1.createCrypto)();\n        const randomString = crypto.randomBytesBase64(96);\n        // The valid characters in the code_verifier are [A-Z]/[a-z]/[0-9]/\n        // \"-\"/\".\"/\"_\"/\"~\". Base64 encoded strings are pretty close, so we're just\n        // swapping out a few chars.\n        const codeVerifier = randomString\n            .replace(/\\+/g, '~')\n            .replace(/=/g, '_')\n            .replace(/\\//g, '-');\n        // Generate the base64 encoded SHA256\n        const unencodedCodeChallenge = await crypto.sha256DigestBase64(codeVerifier);\n        // We need to use base64UrlEncoding instead of standard base64\n        const codeChallenge = unencodedCodeChallenge\n            .split('=')[0]\n            .replace(/\\+/g, '-')\n            .replace(/\\//g, '_');\n        return { codeVerifier, codeChallenge };\n    }\n    getToken(codeOrOptions, callback) {\n        const options = typeof codeOrOptions === 'string' ? { code: codeOrOptions } : codeOrOptions;\n        if (callback) {\n            this.getTokenAsync(options).then(r => callback(null, r.tokens, r.res), e => callback(e, null, e.response));\n        }\n        else {\n            return this.getTokenAsync(options);\n        }\n    }\n    async getTokenAsync(options) {\n        const url = this.endpoints.oauth2TokenUrl.toString();\n        const headers = {\n            'Content-Type': 'application/x-www-form-urlencoded',\n        };\n        const values = {\n            client_id: options.client_id || this._clientId,\n            code_verifier: options.codeVerifier,\n            code: options.code,\n            grant_type: 'authorization_code',\n            redirect_uri: options.redirect_uri || this.redirectUri,\n        };\n        if (this.clientAuthentication === ClientAuthentication.ClientSecretBasic) {\n            const basic = Buffer.from(`${this._clientId}:${this._clientSecret}`);\n            headers['Authorization'] = `Basic ${basic.toString('base64')}`;\n        }\n        if (this.clientAuthentication === ClientAuthentication.ClientSecretPost) {\n            values.client_secret = this._clientSecret;\n        }\n        const res = await this.transporter.request({\n            ...OAuth2Client.RETRY_CONFIG,\n            method: 'POST',\n            url,\n            data: querystring.stringify(values),\n            headers,\n        });\n        const tokens = res.data;\n        if (res.data && res.data.expires_in) {\n            tokens.expiry_date = new Date().getTime() + res.data.expires_in * 1000;\n            delete tokens.expires_in;\n        }\n        this.emit('tokens', tokens);\n        return { tokens, res };\n    }\n    /**\n     * Refreshes the access token.\n     * @param refresh_token Existing refresh token.\n     * @private\n     */\n    async refreshToken(refreshToken) {\n        if (!refreshToken) {\n            return this.refreshTokenNoCache(refreshToken);\n        }\n        // If a request to refresh using the same token has started,\n        // return the same promise.\n        if (this.refreshTokenPromises.has(refreshToken)) {\n            return this.refreshTokenPromises.get(refreshToken);\n        }\n        const p = this.refreshTokenNoCache(refreshToken).then(r => {\n            this.refreshTokenPromises.delete(refreshToken);\n            return r;\n        }, e => {\n            this.refreshTokenPromises.delete(refreshToken);\n            throw e;\n        });\n        this.refreshTokenPromises.set(refreshToken, p);\n        return p;\n    }\n    async refreshTokenNoCache(refreshToken) {\n        var _a;\n        if (!refreshToken) {\n            throw new Error('No refresh token is set.');\n        }\n        const url = this.endpoints.oauth2TokenUrl.toString();\n        const data = {\n            refresh_token: refreshToken,\n            client_id: this._clientId,\n            client_secret: this._clientSecret,\n            grant_type: 'refresh_token',\n        };\n        let res;\n        try {\n            // request for new token\n            res = await this.transporter.request({\n                ...OAuth2Client.RETRY_CONFIG,\n                method: 'POST',\n                url,\n                data: querystring.stringify(data),\n                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\n            });\n        }\n        catch (e) {\n            if (e instanceof gaxios_1.GaxiosError &&\n                e.message === 'invalid_grant' &&\n                ((_a = e.response) === null || _a === void 0 ? void 0 : _a.data) &&\n                /ReAuth/i.test(e.response.data.error_description)) {\n                e.message = JSON.stringify(e.response.data);\n            }\n            throw e;\n        }\n        const tokens = res.data;\n        // TODO: de-duplicate this code from a few spots\n        if (res.data && res.data.expires_in) {\n            tokens.expiry_date = new Date().getTime() + res.data.expires_in * 1000;\n            delete tokens.expires_in;\n        }\n        this.emit('tokens', tokens);\n        return { tokens, res };\n    }\n    refreshAccessToken(callback) {\n        if (callback) {\n            this.refreshAccessTokenAsync().then(r => callback(null, r.credentials, r.res), callback);\n        }\n        else {\n            return this.refreshAccessTokenAsync();\n        }\n    }\n    async refreshAccessTokenAsync() {\n        const r = await this.refreshToken(this.credentials.refresh_token);\n        const tokens = r.tokens;\n        tokens.refresh_token = this.credentials.refresh_token;\n        this.credentials = tokens;\n        return { credentials: this.credentials, res: r.res };\n    }\n    getAccessToken(callback) {\n        if (callback) {\n            this.getAccessTokenAsync().then(r => callback(null, r.token, r.res), callback);\n        }\n        else {\n            return this.getAccessTokenAsync();\n        }\n    }\n    async getAccessTokenAsync() {\n        const shouldRefresh = !this.credentials.access_token || this.isTokenExpiring();\n        if (shouldRefresh) {\n            if (!this.credentials.refresh_token) {\n                if (this.refreshHandler) {\n                    const refreshedAccessToken = await this.processAndValidateRefreshHandler();\n                    if (refreshedAccessToken === null || refreshedAccessToken === void 0 ? void 0 : refreshedAccessToken.access_token) {\n                        this.setCredentials(refreshedAccessToken);\n                        return { token: this.credentials.access_token };\n                    }\n                }\n                else {\n                    throw new Error('No refresh token or refresh handler callback is set.');\n                }\n            }\n            const r = await this.refreshAccessTokenAsync();\n            if (!r.credentials || (r.credentials && !r.credentials.access_token)) {\n                throw new Error('Could not refresh access token.');\n            }\n            return { token: r.credentials.access_token, res: r.res };\n        }\n        else {\n            return { token: this.credentials.access_token };\n        }\n    }\n    /**\n     * The main authentication interface.  It takes an optional url which when\n     * present is the endpoint being accessed, and returns a Promise which\n     * resolves with authorization header fields.\n     *\n     * In OAuth2Client, the result has the form:\n     * { Authorization: 'Bearer <access_token_value>' }\n     * @param url The optional url being authorized\n     */\n    async getRequestHeaders(url) {\n        const headers = (await this.getRequestMetadataAsync(url)).headers;\n        return headers;\n    }\n    async getRequestMetadataAsync(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    url) {\n        const thisCreds = this.credentials;\n        if (!thisCreds.access_token &&\n            !thisCreds.refresh_token &&\n            !this.apiKey &&\n            !this.refreshHandler) {\n            throw new Error('No access, refresh token, API key or refresh handler callback is set.');\n        }\n        if (thisCreds.access_token && !this.isTokenExpiring()) {\n            thisCreds.token_type = thisCreds.token_type || 'Bearer';\n            const headers = {\n                Authorization: thisCreds.token_type + ' ' + thisCreds.access_token,\n            };\n            return { headers: this.addSharedMetadataHeaders(headers) };\n        }\n        // If refreshHandler exists, call processAndValidateRefreshHandler().\n        if (this.refreshHandler) {\n            const refreshedAccessToken = await this.processAndValidateRefreshHandler();\n            if (refreshedAccessToken === null || refreshedAccessToken === void 0 ? void 0 : refreshedAccessToken.access_token) {\n                this.setCredentials(refreshedAccessToken);\n                const headers = {\n                    Authorization: 'Bearer ' + this.credentials.access_token,\n                };\n                return { headers: this.addSharedMetadataHeaders(headers) };\n            }\n        }\n        if (this.apiKey) {\n            return { headers: { 'X-Goog-Api-Key': this.apiKey } };\n        }\n        let r = null;\n        let tokens = null;\n        try {\n            r = await this.refreshToken(thisCreds.refresh_token);\n            tokens = r.tokens;\n        }\n        catch (err) {\n            const e = err;\n            if (e.response &&\n                (e.response.status === 403 || e.response.status === 404)) {\n                e.message = `Could not refresh access token: ${e.message}`;\n            }\n            throw e;\n        }\n        const credentials = this.credentials;\n        credentials.token_type = credentials.token_type || 'Bearer';\n        tokens.refresh_token = credentials.refresh_token;\n        this.credentials = tokens;\n        const headers = {\n            Authorization: credentials.token_type + ' ' + tokens.access_token,\n        };\n        return { headers: this.addSharedMetadataHeaders(headers), res: r.res };\n    }\n    /**\n     * Generates an URL to revoke the given token.\n     * @param token The existing token to be revoked.\n     *\n     * @deprecated use instance method {@link OAuth2Client.getRevokeTokenURL}\n     */\n    static getRevokeTokenUrl(token) {\n        return new OAuth2Client().getRevokeTokenURL(token).toString();\n    }\n    /**\n     * Generates a URL to revoke the given token.\n     *\n     * @param token The existing token to be revoked.\n     */\n    getRevokeTokenURL(token) {\n        const url = new URL(this.endpoints.oauth2RevokeUrl);\n        url.searchParams.append('token', token);\n        return url;\n    }\n    revokeToken(token, callback) {\n        const opts = {\n            ...OAuth2Client.RETRY_CONFIG,\n            url: this.getRevokeTokenURL(token).toString(),\n            method: 'POST',\n        };\n        if (callback) {\n            this.transporter\n                .request(opts)\n                .then(r => callback(null, r), callback);\n        }\n        else {\n            return this.transporter.request(opts);\n        }\n    }\n    revokeCredentials(callback) {\n        if (callback) {\n            this.revokeCredentialsAsync().then(res => callback(null, res), callback);\n        }\n        else {\n            return this.revokeCredentialsAsync();\n        }\n    }\n    async revokeCredentialsAsync() {\n        const token = this.credentials.access_token;\n        this.credentials = {};\n        if (token) {\n            return this.revokeToken(token);\n        }\n        else {\n            throw new Error('No access token to revoke.');\n        }\n    }\n    request(opts, callback) {\n        if (callback) {\n            this.requestAsync(opts).then(r => callback(null, r), e => {\n                return callback(e, e.response);\n            });\n        }\n        else {\n            return this.requestAsync(opts);\n        }\n    }\n    async requestAsync(opts, reAuthRetried = false) {\n        let r2;\n        try {\n            const r = await this.getRequestMetadataAsync(opts.url);\n            opts.headers = opts.headers || {};\n            if (r.headers && r.headers['x-goog-user-project']) {\n                opts.headers['x-goog-user-project'] = r.headers['x-goog-user-project'];\n            }\n            if (r.headers && r.headers.Authorization) {\n                opts.headers.Authorization = r.headers.Authorization;\n            }\n            if (this.apiKey) {\n                opts.headers['X-Goog-Api-Key'] = this.apiKey;\n            }\n            r2 = await this.transporter.request(opts);\n        }\n        catch (e) {\n            const res = e.response;\n            if (res) {\n                const statusCode = res.status;\n                // Retry the request for metadata if the following criteria are true:\n                // - We haven't already retried.  It only makes sense to retry once.\n                // - The response was a 401 or a 403\n                // - The request didn't send a readableStream\n                // - An access_token and refresh_token were available, but either no\n                //   expiry_date was available or the forceRefreshOnFailure flag is set.\n                //   The absent expiry_date case can happen when developers stash the\n                //   access_token and refresh_token for later use, but the access_token\n                //   fails on the first try because it's expired. Some developers may\n                //   choose to enable forceRefreshOnFailure to mitigate time-related\n                //   errors.\n                // Or the following criteria are true:\n                // - We haven't already retried.  It only makes sense to retry once.\n                // - The response was a 401 or a 403\n                // - The request didn't send a readableStream\n                // - No refresh_token was available\n                // - An access_token and a refreshHandler callback were available, but\n                //   either no expiry_date was available or the forceRefreshOnFailure\n                //   flag is set. The access_token fails on the first try because it's\n                //   expired. Some developers may choose to enable forceRefreshOnFailure\n                //   to mitigate time-related errors.\n                const mayRequireRefresh = this.credentials &&\n                    this.credentials.access_token &&\n                    this.credentials.refresh_token &&\n                    (!this.credentials.expiry_date || this.forceRefreshOnFailure);\n                const mayRequireRefreshWithNoRefreshToken = this.credentials &&\n                    this.credentials.access_token &&\n                    !this.credentials.refresh_token &&\n                    (!this.credentials.expiry_date || this.forceRefreshOnFailure) &&\n                    this.refreshHandler;\n                const isReadableStream = res.config.data instanceof stream.Readable;\n                const isAuthErr = statusCode === 401 || statusCode === 403;\n                if (!reAuthRetried &&\n                    isAuthErr &&\n                    !isReadableStream &&\n                    mayRequireRefresh) {\n                    await this.refreshAccessTokenAsync();\n                    return this.requestAsync(opts, true);\n                }\n                else if (!reAuthRetried &&\n                    isAuthErr &&\n                    !isReadableStream &&\n                    mayRequireRefreshWithNoRefreshToken) {\n                    const refreshedAccessToken = await this.processAndValidateRefreshHandler();\n                    if (refreshedAccessToken === null || refreshedAccessToken === void 0 ? void 0 : refreshedAccessToken.access_token) {\n                        this.setCredentials(refreshedAccessToken);\n                    }\n                    return this.requestAsync(opts, true);\n                }\n            }\n            throw e;\n        }\n        return r2;\n    }\n    verifyIdToken(options, callback) {\n        // This function used to accept two arguments instead of an options object.\n        // Check the types to help users upgrade with less pain.\n        // This check can be removed after a 2.0 release.\n        if (callback && typeof callback !== 'function') {\n            throw new Error('This method accepts an options object as the first parameter, which includes the idToken, audience, and maxExpiry.');\n        }\n        if (callback) {\n            this.verifyIdTokenAsync(options).then(r => callback(null, r), callback);\n        }\n        else {\n            return this.verifyIdTokenAsync(options);\n        }\n    }\n    async verifyIdTokenAsync(options) {\n        if (!options.idToken) {\n            throw new Error('The verifyIdToken method requires an ID Token');\n        }\n        const response = await this.getFederatedSignonCertsAsync();\n        const login = await this.verifySignedJwtWithCertsAsync(options.idToken, response.certs, options.audience, this.issuers, options.maxExpiry);\n        return login;\n    }\n    /**\n     * Obtains information about the provisioned access token.  Especially useful\n     * if you want to check the scopes that were provisioned to a given token.\n     *\n     * @param accessToken Required.  The Access Token for which you want to get\n     * user info.\n     */\n    async getTokenInfo(accessToken) {\n        const { data } = await this.transporter.request({\n            ...OAuth2Client.RETRY_CONFIG,\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/x-www-form-urlencoded',\n                Authorization: `Bearer ${accessToken}`,\n            },\n            url: this.endpoints.tokenInfoUrl.toString(),\n        });\n        const info = Object.assign({\n            expiry_date: new Date().getTime() + data.expires_in * 1000,\n            scopes: data.scope.split(' '),\n        }, data);\n        delete info.expires_in;\n        delete info.scope;\n        return info;\n    }\n    getFederatedSignonCerts(callback) {\n        if (callback) {\n            this.getFederatedSignonCertsAsync().then(r => callback(null, r.certs, r.res), callback);\n        }\n        else {\n            return this.getFederatedSignonCertsAsync();\n        }\n    }\n    async getFederatedSignonCertsAsync() {\n        const nowTime = new Date().getTime();\n        const format = (0, crypto_1.hasBrowserCrypto)()\n            ? CertificateFormat.JWK\n            : CertificateFormat.PEM;\n        if (this.certificateExpiry &&\n            nowTime < this.certificateExpiry.getTime() &&\n            this.certificateCacheFormat === format) {\n            return { certs: this.certificateCache, format };\n        }\n        let res;\n        let url;\n        switch (format) {\n            case CertificateFormat.PEM:\n                url = this.endpoints.oauth2FederatedSignonPemCertsUrl.toString();\n                break;\n            case CertificateFormat.JWK:\n                url = this.endpoints.oauth2FederatedSignonJwkCertsUrl.toString();\n                break;\n            default:\n                throw new Error(`Unsupported certificate format ${format}`);\n        }\n        try {\n            res = await this.transporter.request({\n                ...OAuth2Client.RETRY_CONFIG,\n                url,\n            });\n        }\n        catch (e) {\n            if (e instanceof Error) {\n                e.message = `Failed to retrieve verification certificates: ${e.message}`;\n            }\n            throw e;\n        }\n        const cacheControl = res ? res.headers['cache-control'] : undefined;\n        let cacheAge = -1;\n        if (cacheControl) {\n            const pattern = new RegExp('max-age=([0-9]*)');\n            const regexResult = pattern.exec(cacheControl);\n            if (regexResult && regexResult.length === 2) {\n                // Cache results with max-age (in seconds)\n                cacheAge = Number(regexResult[1]) * 1000; // milliseconds\n            }\n        }\n        let certificates = {};\n        switch (format) {\n            case CertificateFormat.PEM:\n                certificates = res.data;\n                break;\n            case CertificateFormat.JWK:\n                for (const key of res.data.keys) {\n                    certificates[key.kid] = key;\n                }\n                break;\n            default:\n                throw new Error(`Unsupported certificate format ${format}`);\n        }\n        const now = new Date();\n        this.certificateExpiry =\n            cacheAge === -1 ? null : new Date(now.getTime() + cacheAge);\n        this.certificateCache = certificates;\n        this.certificateCacheFormat = format;\n        return { certs: certificates, format, res };\n    }\n    getIapPublicKeys(callback) {\n        if (callback) {\n            this.getIapPublicKeysAsync().then(r => callback(null, r.pubkeys, r.res), callback);\n        }\n        else {\n            return this.getIapPublicKeysAsync();\n        }\n    }\n    async getIapPublicKeysAsync() {\n        let res;\n        const url = this.endpoints.oauth2IapPublicKeyUrl.toString();\n        try {\n            res = await this.transporter.request({\n                ...OAuth2Client.RETRY_CONFIG,\n                url,\n            });\n        }\n        catch (e) {\n            if (e instanceof Error) {\n                e.message = `Failed to retrieve verification certificates: ${e.message}`;\n            }\n            throw e;\n        }\n        return { pubkeys: res.data, res };\n    }\n    verifySignedJwtWithCerts() {\n        // To make the code compatible with browser SubtleCrypto we need to make\n        // this method async.\n        throw new Error('verifySignedJwtWithCerts is removed, please use verifySignedJwtWithCertsAsync instead.');\n    }\n    /**\n     * Verify the id token is signed with the correct certificate\n     * and is from the correct audience.\n     * @param jwt The jwt to verify (The ID Token in this case).\n     * @param certs The array of certs to test the jwt against.\n     * @param requiredAudience The audience to test the jwt against.\n     * @param issuers The allowed issuers of the jwt (Optional).\n     * @param maxExpiry The max expiry the certificate can be (Optional).\n     * @return Returns a promise resolving to LoginTicket on verification.\n     */\n    async verifySignedJwtWithCertsAsync(jwt, certs, requiredAudience, issuers, maxExpiry) {\n        const crypto = (0, crypto_1.createCrypto)();\n        if (!maxExpiry) {\n            maxExpiry = OAuth2Client.DEFAULT_MAX_TOKEN_LIFETIME_SECS_;\n        }\n        const segments = jwt.split('.');\n        if (segments.length !== 3) {\n            throw new Error('Wrong number of segments in token: ' + jwt);\n        }\n        const signed = segments[0] + '.' + segments[1];\n        let signature = segments[2];\n        let envelope;\n        let payload;\n        try {\n            envelope = JSON.parse(crypto.decodeBase64StringUtf8(segments[0]));\n        }\n        catch (err) {\n            if (err instanceof Error) {\n                err.message = `Can't parse token envelope: ${segments[0]}': ${err.message}`;\n            }\n            throw err;\n        }\n        if (!envelope) {\n            throw new Error(\"Can't parse token envelope: \" + segments[0]);\n        }\n        try {\n            payload = JSON.parse(crypto.decodeBase64StringUtf8(segments[1]));\n        }\n        catch (err) {\n            if (err instanceof Error) {\n                err.message = `Can't parse token payload '${segments[0]}`;\n            }\n            throw err;\n        }\n        if (!payload) {\n            throw new Error(\"Can't parse token payload: \" + segments[1]);\n        }\n        if (!Object.prototype.hasOwnProperty.call(certs, envelope.kid)) {\n            // If this is not present, then there's no reason to attempt verification\n            throw new Error('No pem found for envelope: ' + JSON.stringify(envelope));\n        }\n        const cert = certs[envelope.kid];\n        if (envelope.alg === 'ES256') {\n            signature = formatEcdsa.joseToDer(signature, 'ES256').toString('base64');\n        }\n        const verified = await crypto.verify(cert, signed, signature);\n        if (!verified) {\n            throw new Error('Invalid token signature: ' + jwt);\n        }\n        if (!payload.iat) {\n            throw new Error('No issue time in token: ' + JSON.stringify(payload));\n        }\n        if (!payload.exp) {\n            throw new Error('No expiration time in token: ' + JSON.stringify(payload));\n        }\n        const iat = Number(payload.iat);\n        if (isNaN(iat))\n            throw new Error('iat field using invalid format');\n        const exp = Number(payload.exp);\n        if (isNaN(exp))\n            throw new Error('exp field using invalid format');\n        const now = new Date().getTime() / 1000;\n        if (exp >= now + maxExpiry) {\n            throw new Error('Expiration time too far in future: ' + JSON.stringify(payload));\n        }\n        const earliest = iat - OAuth2Client.CLOCK_SKEW_SECS_;\n        const latest = exp + OAuth2Client.CLOCK_SKEW_SECS_;\n        if (now < earliest) {\n            throw new Error('Token used too early, ' +\n                now +\n                ' < ' +\n                earliest +\n                ': ' +\n                JSON.stringify(payload));\n        }\n        if (now > latest) {\n            throw new Error('Token used too late, ' +\n                now +\n                ' > ' +\n                latest +\n                ': ' +\n                JSON.stringify(payload));\n        }\n        if (issuers && issuers.indexOf(payload.iss) < 0) {\n            throw new Error('Invalid issuer, expected one of [' +\n                issuers +\n                '], but got ' +\n                payload.iss);\n        }\n        // Check the audience matches if we have one\n        if (typeof requiredAudience !== 'undefined' && requiredAudience !== null) {\n            const aud = payload.aud;\n            let audVerified = false;\n            // If the requiredAudience is an array, check if it contains token\n            // audience\n            if (requiredAudience.constructor === Array) {\n                audVerified = requiredAudience.indexOf(aud) > -1;\n            }\n            else {\n                audVerified = aud === requiredAudience;\n            }\n            if (!audVerified) {\n                throw new Error('Wrong recipient, payload audience != requiredAudience');\n            }\n        }\n        return new loginticket_1.LoginTicket(envelope, payload);\n    }\n    /**\n     * Returns a promise that resolves with AccessTokenResponse type if\n     * refreshHandler is defined.\n     * If not, nothing is returned.\n     */\n    async processAndValidateRefreshHandler() {\n        if (this.refreshHandler) {\n            const accessTokenResponse = await this.refreshHandler();\n            if (!accessTokenResponse.access_token) {\n                throw new Error('No access token is returned by the refreshHandler callback.');\n            }\n            return accessTokenResponse;\n        }\n        return;\n    }\n    /**\n     * Returns true if a token is expired or will expire within\n     * eagerRefreshThresholdMillismilliseconds.\n     * If there is no expiry time, assumes the token is not expired or expiring.\n     */\n    isTokenExpiring() {\n        const expiryDate = this.credentials.expiry_date;\n        return expiryDate\n            ? expiryDate <= new Date().getTime() + this.eagerRefreshThresholdMillis\n            : false;\n    }\n}\nexports.OAuth2Client = OAuth2Client;\n/**\n * @deprecated use instance's {@link OAuth2Client.endpoints}\n */\nOAuth2Client.GOOGLE_TOKEN_INFO_URL = 'https://oauth2.googleapis.com/tokeninfo';\n/**\n * Clock skew - five minutes in seconds\n */\nOAuth2Client.CLOCK_SKEW_SECS_ = 300;\n/**\n * The default max Token Lifetime is one day in seconds\n */\nOAuth2Client.DEFAULT_MAX_TOKEN_LIFETIME_SECS_ = 86400;\n","\"use strict\";\n// Copyright 2013 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Compute = void 0;\nconst gaxios_1 = require(\"gaxios\");\nconst gcpMetadata = require(\"gcp-metadata\");\nconst oauth2client_1 = require(\"./oauth2client\");\nclass Compute extends oauth2client_1.OAuth2Client {\n    /**\n     * Google Compute Engine service account credentials.\n     *\n     * Retrieve access token from the metadata server.\n     * See: https://cloud.google.com/compute/docs/access/authenticate-workloads#applications\n     */\n    constructor(options = {}) {\n        super(options);\n        // Start with an expired refresh token, which will automatically be\n        // refreshed before the first API call is made.\n        this.credentials = { expiry_date: 1, refresh_token: 'compute-placeholder' };\n        this.serviceAccountEmail = options.serviceAccountEmail || 'default';\n        this.scopes = Array.isArray(options.scopes)\n            ? options.scopes\n            : options.scopes\n                ? [options.scopes]\n                : [];\n    }\n    /**\n     * Refreshes the access token.\n     * @param refreshToken Unused parameter\n     */\n    async refreshTokenNoCache(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    refreshToken) {\n        const tokenPath = `service-accounts/${this.serviceAccountEmail}/token`;\n        let data;\n        try {\n            const instanceOptions = {\n                property: tokenPath,\n            };\n            if (this.scopes.length > 0) {\n                instanceOptions.params = {\n                    scopes: this.scopes.join(','),\n                };\n            }\n            data = await gcpMetadata.instance(instanceOptions);\n        }\n        catch (e) {\n            if (e instanceof gaxios_1.GaxiosError) {\n                e.message = `Could not refresh access token: ${e.message}`;\n                this.wrapError(e);\n            }\n            throw e;\n        }\n        const tokens = data;\n        if (data && data.expires_in) {\n            tokens.expiry_date = new Date().getTime() + data.expires_in * 1000;\n            delete tokens.expires_in;\n        }\n        this.emit('tokens', tokens);\n        return { tokens, res: null };\n    }\n    /**\n     * Fetches an ID token.\n     * @param targetAudience the audience for the fetched ID token.\n     */\n    async fetchIdToken(targetAudience) {\n        const idTokenPath = `service-accounts/${this.serviceAccountEmail}/identity` +\n            `?format=full&audience=${targetAudience}`;\n        let idToken;\n        try {\n            const instanceOptions = {\n                property: idTokenPath,\n            };\n            idToken = await gcpMetadata.instance(instanceOptions);\n        }\n        catch (e) {\n            if (e instanceof Error) {\n                e.message = `Could not fetch ID token: ${e.message}`;\n            }\n            throw e;\n        }\n        return idToken;\n    }\n    wrapError(e) {\n        const res = e.response;\n        if (res && res.status) {\n            e.status = res.status;\n            if (res.status === 403) {\n                e.message =\n                    'A Forbidden error was returned while attempting to retrieve an access ' +\n                        'token for the Compute Engine built-in service account. This may be because the Compute ' +\n                        'Engine instance does not have the correct permission scopes specified: ' +\n                        e.message;\n            }\n            else if (res.status === 404) {\n                e.message =\n                    'A Not Found error was returned while attempting to retrieve an access' +\n                        'token for the Compute Engine built-in service account. This may be because the Compute ' +\n                        'Engine instance does not have any permission scopes specified: ' +\n                        e.message;\n            }\n        }\n    }\n}\nexports.Compute = Compute;\n","\"use strict\";\n// Copyright 2020 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.IdTokenClient = void 0;\nconst oauth2client_1 = require(\"./oauth2client\");\nclass IdTokenClient extends oauth2client_1.OAuth2Client {\n    /**\n     * Google ID Token client\n     *\n     * Retrieve ID token from the metadata server.\n     * See: https://cloud.google.com/docs/authentication/get-id-token#metadata-server\n     */\n    constructor(options) {\n        super(options);\n        this.targetAudience = options.targetAudience;\n        this.idTokenProvider = options.idTokenProvider;\n    }\n    async getRequestMetadataAsync(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    url) {\n        if (!this.credentials.id_token ||\n            !this.credentials.expiry_date ||\n            this.isTokenExpiring()) {\n            const idToken = await this.idTokenProvider.fetchIdToken(this.targetAudience);\n            this.credentials = {\n                id_token: idToken,\n                expiry_date: this.getIdTokenExpiryDate(idToken),\n            };\n        }\n        const headers = {\n            Authorization: 'Bearer ' + this.credentials.id_token,\n        };\n        return { headers };\n    }\n    getIdTokenExpiryDate(idToken) {\n        const payloadB64 = idToken.split('.')[1];\n        if (payloadB64) {\n            const payload = JSON.parse(Buffer.from(payloadB64, 'base64').toString('ascii'));\n            return payload.exp * 1000;\n        }\n    }\n}\nexports.IdTokenClient = IdTokenClient;\n","\"use strict\";\n// Copyright 2018 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.GCPEnv = void 0;\nexports.clear = clear;\nexports.getEnv = getEnv;\nconst gcpMetadata = require(\"gcp-metadata\");\nvar GCPEnv;\n(function (GCPEnv) {\n    GCPEnv[\"APP_ENGINE\"] = \"APP_ENGINE\";\n    GCPEnv[\"KUBERNETES_ENGINE\"] = \"KUBERNETES_ENGINE\";\n    GCPEnv[\"CLOUD_FUNCTIONS\"] = \"CLOUD_FUNCTIONS\";\n    GCPEnv[\"COMPUTE_ENGINE\"] = \"COMPUTE_ENGINE\";\n    GCPEnv[\"CLOUD_RUN\"] = \"CLOUD_RUN\";\n    GCPEnv[\"NONE\"] = \"NONE\";\n})(GCPEnv || (exports.GCPEnv = GCPEnv = {}));\nlet envPromise;\nfunction clear() {\n    envPromise = undefined;\n}\nasync function getEnv() {\n    if (envPromise) {\n        return envPromise;\n    }\n    envPromise = getEnvMemoized();\n    return envPromise;\n}\nasync function getEnvMemoized() {\n    let env = GCPEnv.NONE;\n    if (isAppEngine()) {\n        env = GCPEnv.APP_ENGINE;\n    }\n    else if (isCloudFunction()) {\n        env = GCPEnv.CLOUD_FUNCTIONS;\n    }\n    else if (await isComputeEngine()) {\n        if (await isKubernetesEngine()) {\n            env = GCPEnv.KUBERNETES_ENGINE;\n        }\n        else if (isCloudRun()) {\n            env = GCPEnv.CLOUD_RUN;\n        }\n        else {\n            env = GCPEnv.COMPUTE_ENGINE;\n        }\n    }\n    else {\n        env = GCPEnv.NONE;\n    }\n    return env;\n}\nfunction isAppEngine() {\n    return !!(process.env.GAE_SERVICE || process.env.GAE_MODULE_NAME);\n}\nfunction isCloudFunction() {\n    return !!(process.env.FUNCTION_NAME || process.env.FUNCTION_TARGET);\n}\n/**\n * This check only verifies that the environment is running knative.\n * This must be run *after* checking for Kubernetes, otherwise it will\n * return a false positive.\n */\nfunction isCloudRun() {\n    return !!process.env.K_CONFIGURATION;\n}\nasync function isKubernetesEngine() {\n    try {\n        await gcpMetadata.instance('attributes/cluster-name');\n        return true;\n    }\n    catch (e) {\n        return false;\n    }\n}\nasync function isComputeEngine() {\n    return gcpMetadata.isAvailable();\n}\n","\"use strict\";\n/**\n * Copyright 2018 Google LLC\n *\n * Distributed under MIT license.\n * See file LICENSE for detail or copy at https://opensource.org/licenses/MIT\n */\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar _GoogleToken_instances, _GoogleToken_inFlightRequest, _GoogleToken_getTokenAsync, _GoogleToken_getTokenAsyncInner, _GoogleToken_ensureEmail, _GoogleToken_revokeTokenAsync, _GoogleToken_configure, _GoogleToken_requestToken;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.GoogleToken = void 0;\nconst fs = require(\"fs\");\nconst gaxios_1 = require(\"gaxios\");\nconst jws = require(\"jws\");\nconst path = require(\"path\");\nconst util_1 = require(\"util\");\nconst readFile = fs.readFile\n    ? (0, util_1.promisify)(fs.readFile)\n    : async () => {\n        // if running in the web-browser, fs.readFile may not have been shimmed.\n        throw new ErrorWithCode('use key rather than keyFile.', 'MISSING_CREDENTIALS');\n    };\nconst GOOGLE_TOKEN_URL = 'https://www.googleapis.com/oauth2/v4/token';\nconst GOOGLE_REVOKE_TOKEN_URL = 'https://accounts.google.com/o/oauth2/revoke?token=';\nclass ErrorWithCode extends Error {\n    constructor(message, code) {\n        super(message);\n        this.code = code;\n    }\n}\nclass GoogleToken {\n    get accessToken() {\n        return this.rawToken ? this.rawToken.access_token : undefined;\n    }\n    get idToken() {\n        return this.rawToken ? this.rawToken.id_token : undefined;\n    }\n    get tokenType() {\n        return this.rawToken ? this.rawToken.token_type : undefined;\n    }\n    get refreshToken() {\n        return this.rawToken ? this.rawToken.refresh_token : undefined;\n    }\n    /**\n     * Create a GoogleToken.\n     *\n     * @param options  Configuration object.\n     */\n    constructor(options) {\n        _GoogleToken_instances.add(this);\n        this.transporter = {\n            request: opts => (0, gaxios_1.request)(opts),\n        };\n        _GoogleToken_inFlightRequest.set(this, void 0);\n        __classPrivateFieldGet(this, _GoogleToken_instances, \"m\", _GoogleToken_configure).call(this, options);\n    }\n    /**\n     * Returns whether the token has expired.\n     *\n     * @return true if the token has expired, false otherwise.\n     */\n    hasExpired() {\n        const now = new Date().getTime();\n        if (this.rawToken && this.expiresAt) {\n            return now >= this.expiresAt;\n        }\n        else {\n            return true;\n        }\n    }\n    /**\n     * Returns whether the token will expire within eagerRefreshThresholdMillis\n     *\n     * @return true if the token will be expired within eagerRefreshThresholdMillis, false otherwise.\n     */\n    isTokenExpiring() {\n        var _a;\n        const now = new Date().getTime();\n        const eagerRefreshThresholdMillis = (_a = this.eagerRefreshThresholdMillis) !== null && _a !== void 0 ? _a : 0;\n        if (this.rawToken && this.expiresAt) {\n            return this.expiresAt <= now + eagerRefreshThresholdMillis;\n        }\n        else {\n            return true;\n        }\n    }\n    getToken(callback, opts = {}) {\n        if (typeof callback === 'object') {\n            opts = callback;\n            callback = undefined;\n        }\n        opts = Object.assign({\n            forceRefresh: false,\n        }, opts);\n        if (callback) {\n            const cb = callback;\n            __classPrivateFieldGet(this, _GoogleToken_instances, \"m\", _GoogleToken_getTokenAsync).call(this, opts).then(t => cb(null, t), callback);\n            return;\n        }\n        return __classPrivateFieldGet(this, _GoogleToken_instances, \"m\", _GoogleToken_getTokenAsync).call(this, opts);\n    }\n    /**\n     * Given a keyFile, extract the key and client email if available\n     * @param keyFile Path to a json, pem, or p12 file that contains the key.\n     * @returns an object with privateKey and clientEmail properties\n     */\n    async getCredentials(keyFile) {\n        const ext = path.extname(keyFile);\n        switch (ext) {\n            case '.json': {\n                const key = await readFile(keyFile, 'utf8');\n                const body = JSON.parse(key);\n                const privateKey = body.private_key;\n                const clientEmail = body.client_email;\n                if (!privateKey || !clientEmail) {\n                    throw new ErrorWithCode('private_key and client_email are required.', 'MISSING_CREDENTIALS');\n                }\n                return { privateKey, clientEmail };\n            }\n            case '.der':\n            case '.crt':\n            case '.pem': {\n                const privateKey = await readFile(keyFile, 'utf8');\n                return { privateKey };\n            }\n            case '.p12':\n            case '.pfx': {\n                throw new ErrorWithCode('*.p12 certificates are not supported after v6.1.2. ' +\n                    'Consider utilizing *.json format or converting *.p12 to *.pem using the OpenSSL CLI.', 'UNKNOWN_CERTIFICATE_TYPE');\n            }\n            default:\n                throw new ErrorWithCode('Unknown certificate type. Type is determined based on file extension. ' +\n                    'Current supported extensions are *.json, and *.pem.', 'UNKNOWN_CERTIFICATE_TYPE');\n        }\n    }\n    revokeToken(callback) {\n        if (callback) {\n            __classPrivateFieldGet(this, _GoogleToken_instances, \"m\", _GoogleToken_revokeTokenAsync).call(this).then(() => callback(), callback);\n            return;\n        }\n        return __classPrivateFieldGet(this, _GoogleToken_instances, \"m\", _GoogleToken_revokeTokenAsync).call(this);\n    }\n}\nexports.GoogleToken = GoogleToken;\n_GoogleToken_inFlightRequest = new WeakMap(), _GoogleToken_instances = new WeakSet(), _GoogleToken_getTokenAsync = async function _GoogleToken_getTokenAsync(opts) {\n    if (__classPrivateFieldGet(this, _GoogleToken_inFlightRequest, \"f\") && !opts.forceRefresh) {\n        return __classPrivateFieldGet(this, _GoogleToken_inFlightRequest, \"f\");\n    }\n    try {\n        return await (__classPrivateFieldSet(this, _GoogleToken_inFlightRequest, __classPrivateFieldGet(this, _GoogleToken_instances, \"m\", _GoogleToken_getTokenAsyncInner).call(this, opts), \"f\"));\n    }\n    finally {\n        __classPrivateFieldSet(this, _GoogleToken_inFlightRequest, undefined, \"f\");\n    }\n}, _GoogleToken_getTokenAsyncInner = async function _GoogleToken_getTokenAsyncInner(opts) {\n    if (this.isTokenExpiring() === false && opts.forceRefresh === false) {\n        return Promise.resolve(this.rawToken);\n    }\n    if (!this.key && !this.keyFile) {\n        throw new Error('No key or keyFile set.');\n    }\n    if (!this.key && this.keyFile) {\n        const creds = await this.getCredentials(this.keyFile);\n        this.key = creds.privateKey;\n        this.iss = creds.clientEmail || this.iss;\n        if (!creds.clientEmail) {\n            __classPrivateFieldGet(this, _GoogleToken_instances, \"m\", _GoogleToken_ensureEmail).call(this);\n        }\n    }\n    return __classPrivateFieldGet(this, _GoogleToken_instances, \"m\", _GoogleToken_requestToken).call(this);\n}, _GoogleToken_ensureEmail = function _GoogleToken_ensureEmail() {\n    if (!this.iss) {\n        throw new ErrorWithCode('email is required.', 'MISSING_CREDENTIALS');\n    }\n}, _GoogleToken_revokeTokenAsync = async function _GoogleToken_revokeTokenAsync() {\n    if (!this.accessToken) {\n        throw new Error('No token to revoke.');\n    }\n    const url = GOOGLE_REVOKE_TOKEN_URL + this.accessToken;\n    await this.transporter.request({\n        url,\n        retry: true,\n    });\n    __classPrivateFieldGet(this, _GoogleToken_instances, \"m\", _GoogleToken_configure).call(this, {\n        email: this.iss,\n        sub: this.sub,\n        key: this.key,\n        keyFile: this.keyFile,\n        scope: this.scope,\n        additionalClaims: this.additionalClaims,\n    });\n}, _GoogleToken_configure = function _GoogleToken_configure(options = {}) {\n    this.keyFile = options.keyFile;\n    this.key = options.key;\n    this.rawToken = undefined;\n    this.iss = options.email || options.iss;\n    this.sub = options.sub;\n    this.additionalClaims = options.additionalClaims;\n    if (typeof options.scope === 'object') {\n        this.scope = options.scope.join(' ');\n    }\n    else {\n        this.scope = options.scope;\n    }\n    this.eagerRefreshThresholdMillis = options.eagerRefreshThresholdMillis;\n    if (options.transporter) {\n        this.transporter = options.transporter;\n    }\n}, _GoogleToken_requestToken = \n/**\n * Request the token from Google.\n */\nasync function _GoogleToken_requestToken() {\n    var _a, _b;\n    const iat = Math.floor(new Date().getTime() / 1000);\n    const additionalClaims = this.additionalClaims || {};\n    const payload = Object.assign({\n        iss: this.iss,\n        scope: this.scope,\n        aud: GOOGLE_TOKEN_URL,\n        exp: iat + 3600,\n        iat,\n        sub: this.sub,\n    }, additionalClaims);\n    const signedJWT = jws.sign({\n        header: { alg: 'RS256' },\n        payload,\n        secret: this.key,\n    });\n    try {\n        const r = await this.transporter.request({\n            method: 'POST',\n            url: GOOGLE_TOKEN_URL,\n            data: {\n                grant_type: 'urn:ietf:params:oauth:grant-type:jwt-bearer',\n                assertion: signedJWT,\n            },\n            headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\n            responseType: 'json',\n            retryConfig: {\n                httpMethodsToRetry: ['POST'],\n            },\n        });\n        this.rawToken = r.data;\n        this.expiresAt =\n            r.data.expires_in === null || r.data.expires_in === undefined\n                ? undefined\n                : (iat + r.data.expires_in) * 1000;\n        return this.rawToken;\n    }\n    catch (e) {\n        this.rawToken = undefined;\n        this.tokenExpires = undefined;\n        const body = e.response && ((_a = e.response) === null || _a === void 0 ? void 0 : _a.data)\n            ? (_b = e.response) === null || _b === void 0 ? void 0 : _b.data\n            : {};\n        if (body.error) {\n            const desc = body.error_description\n                ? `: ${body.error_description}`\n                : '';\n            e.message = `${body.error}${desc}`;\n        }\n        throw e;\n    }\n};\n//# sourceMappingURL=index.js.map","\"use strict\";\n// Copyright 2015 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.JWTAccess = void 0;\nconst jws = require(\"jws\");\nconst util_1 = require(\"../util\");\nconst DEFAULT_HEADER = {\n    alg: 'RS256',\n    typ: 'JWT',\n};\nclass JWTAccess {\n    /**\n     * JWTAccess service account credentials.\n     *\n     * Create a new access token by using the credential to create a new JWT token\n     * that's recognized as the access token.\n     *\n     * @param email the service account email address.\n     * @param key the private key that will be used to sign the token.\n     * @param keyId the ID of the private key used to sign the token.\n     */\n    constructor(email, key, keyId, eagerRefreshThresholdMillis) {\n        this.cache = new util_1.LRUCache({\n            capacity: 500,\n            maxAge: 60 * 60 * 1000,\n        });\n        this.email = email;\n        this.key = key;\n        this.keyId = keyId;\n        this.eagerRefreshThresholdMillis =\n            eagerRefreshThresholdMillis !== null && eagerRefreshThresholdMillis !== void 0 ? eagerRefreshThresholdMillis : 5 * 60 * 1000;\n    }\n    /**\n     * Ensures that we're caching a key appropriately, giving precedence to scopes vs. url\n     *\n     * @param url The URI being authorized.\n     * @param scopes The scope or scopes being authorized\n     * @returns A string that returns the cached key.\n     */\n    getCachedKey(url, scopes) {\n        let cacheKey = url;\n        if (scopes && Array.isArray(scopes) && scopes.length) {\n            cacheKey = url ? `${url}_${scopes.join('_')}` : `${scopes.join('_')}`;\n        }\n        else if (typeof scopes === 'string') {\n            cacheKey = url ? `${url}_${scopes}` : scopes;\n        }\n        if (!cacheKey) {\n            throw Error('Scopes or url must be provided');\n        }\n        return cacheKey;\n    }\n    /**\n     * Get a non-expired access token, after refreshing if necessary.\n     *\n     * @param url The URI being authorized.\n     * @param additionalClaims An object with a set of additional claims to\n     * include in the payload.\n     * @returns An object that includes the authorization header.\n     */\n    getRequestHeaders(url, additionalClaims, scopes) {\n        // Return cached authorization headers, unless we are within\n        // eagerRefreshThresholdMillis ms of them expiring:\n        const key = this.getCachedKey(url, scopes);\n        const cachedToken = this.cache.get(key);\n        const now = Date.now();\n        if (cachedToken &&\n            cachedToken.expiration - now > this.eagerRefreshThresholdMillis) {\n            return cachedToken.headers;\n        }\n        const iat = Math.floor(Date.now() / 1000);\n        const exp = JWTAccess.getExpirationTime(iat);\n        let defaultClaims;\n        // Turn scopes into space-separated string\n        if (Array.isArray(scopes)) {\n            scopes = scopes.join(' ');\n        }\n        // If scopes are specified, sign with scopes\n        if (scopes) {\n            defaultClaims = {\n                iss: this.email,\n                sub: this.email,\n                scope: scopes,\n                exp,\n                iat,\n            };\n        }\n        else {\n            defaultClaims = {\n                iss: this.email,\n                sub: this.email,\n                aud: url,\n                exp,\n                iat,\n            };\n        }\n        // if additionalClaims are provided, ensure they do not collide with\n        // other required claims.\n        if (additionalClaims) {\n            for (const claim in defaultClaims) {\n                if (additionalClaims[claim]) {\n                    throw new Error(`The '${claim}' property is not allowed when passing additionalClaims. This claim is included in the JWT by default.`);\n                }\n            }\n        }\n        const header = this.keyId\n            ? { ...DEFAULT_HEADER, kid: this.keyId }\n            : DEFAULT_HEADER;\n        const payload = Object.assign(defaultClaims, additionalClaims);\n        // Sign the jwt and add it to the cache\n        const signedJWT = jws.sign({ header, payload, secret: this.key });\n        const headers = { Authorization: `Bearer ${signedJWT}` };\n        this.cache.set(key, {\n            expiration: exp * 1000,\n            headers,\n        });\n        return headers;\n    }\n    /**\n     * Returns an expiration time for the JWT token.\n     *\n     * @param iat The issued at time for the JWT.\n     * @returns An expiration time for the JWT.\n     */\n    static getExpirationTime(iat) {\n        const exp = iat + 3600; // 3600 seconds = 1 hour\n        return exp;\n    }\n    /**\n     * Create a JWTAccess credentials instance using the given input options.\n     * @param json The input object.\n     */\n    fromJSON(json) {\n        if (!json) {\n            throw new Error('Must pass in a JSON object containing the service account auth settings.');\n        }\n        if (!json.client_email) {\n            throw new Error('The incoming JSON object does not contain a client_email field');\n        }\n        if (!json.private_key) {\n            throw new Error('The incoming JSON object does not contain a private_key field');\n        }\n        // Extract the relevant information from the json key file.\n        this.email = json.client_email;\n        this.key = json.private_key;\n        this.keyId = json.private_key_id;\n        this.projectId = json.project_id;\n    }\n    fromStream(inputStream, callback) {\n        if (callback) {\n            this.fromStreamAsync(inputStream).then(() => callback(), callback);\n        }\n        else {\n            return this.fromStreamAsync(inputStream);\n        }\n    }\n    fromStreamAsync(inputStream) {\n        return new Promise((resolve, reject) => {\n            if (!inputStream) {\n                reject(new Error('Must pass in a stream containing the service account auth settings.'));\n            }\n            let s = '';\n            inputStream\n                .setEncoding('utf8')\n                .on('data', chunk => (s += chunk))\n                .on('error', reject)\n                .on('end', () => {\n                try {\n                    const data = JSON.parse(s);\n                    this.fromJSON(data);\n                    resolve();\n                }\n                catch (err) {\n                    reject(err);\n                }\n            });\n        });\n    }\n}\nexports.JWTAccess = JWTAccess;\n","\"use strict\";\n// Copyright 2013 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.JWT = void 0;\nconst gtoken_1 = require(\"gtoken\");\nconst jwtaccess_1 = require(\"./jwtaccess\");\nconst oauth2client_1 = require(\"./oauth2client\");\nconst authclient_1 = require(\"./authclient\");\nclass JWT extends oauth2client_1.OAuth2Client {\n    constructor(optionsOrEmail, keyFile, key, scopes, subject, keyId) {\n        const opts = optionsOrEmail && typeof optionsOrEmail === 'object'\n            ? optionsOrEmail\n            : { email: optionsOrEmail, keyFile, key, keyId, scopes, subject };\n        super(opts);\n        this.email = opts.email;\n        this.keyFile = opts.keyFile;\n        this.key = opts.key;\n        this.keyId = opts.keyId;\n        this.scopes = opts.scopes;\n        this.subject = opts.subject;\n        this.additionalClaims = opts.additionalClaims;\n        // Start with an expired refresh token, which will automatically be\n        // refreshed before the first API call is made.\n        this.credentials = { refresh_token: 'jwt-placeholder', expiry_date: 1 };\n    }\n    /**\n     * Creates a copy of the credential with the specified scopes.\n     * @param scopes List of requested scopes or a single scope.\n     * @return The cloned instance.\n     */\n    createScoped(scopes) {\n        const jwt = new JWT(this);\n        jwt.scopes = scopes;\n        return jwt;\n    }\n    /**\n     * Obtains the metadata to be sent with the request.\n     *\n     * @param url the URI being authorized.\n     */\n    async getRequestMetadataAsync(url) {\n        url = this.defaultServicePath ? `https://${this.defaultServicePath}/` : url;\n        const useSelfSignedJWT = (!this.hasUserScopes() && url) ||\n            (this.useJWTAccessWithScope && this.hasAnyScopes()) ||\n            this.universeDomain !== authclient_1.DEFAULT_UNIVERSE;\n        if (this.subject && this.universeDomain !== authclient_1.DEFAULT_UNIVERSE) {\n            throw new RangeError(`Service Account user is configured for the credential. Domain-wide delegation is not supported in universes other than ${authclient_1.DEFAULT_UNIVERSE}`);\n        }\n        if (!this.apiKey && useSelfSignedJWT) {\n            if (this.additionalClaims &&\n                this.additionalClaims.target_audience) {\n                const { tokens } = await this.refreshToken();\n                return {\n                    headers: this.addSharedMetadataHeaders({\n                        Authorization: `Bearer ${tokens.id_token}`,\n                    }),\n                };\n            }\n            else {\n                // no scopes have been set, but a uri has been provided. Use JWTAccess\n                // credentials.\n                if (!this.access) {\n                    this.access = new jwtaccess_1.JWTAccess(this.email, this.key, this.keyId, this.eagerRefreshThresholdMillis);\n                }\n                let scopes;\n                if (this.hasUserScopes()) {\n                    scopes = this.scopes;\n                }\n                else if (!url) {\n                    scopes = this.defaultScopes;\n                }\n                const useScopes = this.useJWTAccessWithScope ||\n                    this.universeDomain !== authclient_1.DEFAULT_UNIVERSE;\n                const headers = await this.access.getRequestHeaders(url !== null && url !== void 0 ? url : undefined, this.additionalClaims, \n                // Scopes take precedent over audience for signing,\n                // so we only provide them if `useJWTAccessWithScope` is on or\n                // if we are in a non-default universe\n                useScopes ? scopes : undefined);\n                return { headers: this.addSharedMetadataHeaders(headers) };\n            }\n        }\n        else if (this.hasAnyScopes() || this.apiKey) {\n            return super.getRequestMetadataAsync(url);\n        }\n        else {\n            // If no audience, apiKey, or scopes are provided, we should not attempt\n            // to populate any headers:\n            return { headers: {} };\n        }\n    }\n    /**\n     * Fetches an ID token.\n     * @param targetAudience the audience for the fetched ID token.\n     */\n    async fetchIdToken(targetAudience) {\n        // Create a new gToken for fetching an ID token\n        const gtoken = new gtoken_1.GoogleToken({\n            iss: this.email,\n            sub: this.subject,\n            scope: this.scopes || this.defaultScopes,\n            keyFile: this.keyFile,\n            key: this.key,\n            additionalClaims: { target_audience: targetAudience },\n            transporter: this.transporter,\n        });\n        await gtoken.getToken({\n            forceRefresh: true,\n        });\n        if (!gtoken.idToken) {\n            throw new Error('Unknown error: Failed to fetch ID token');\n        }\n        return gtoken.idToken;\n    }\n    /**\n     * Determine if there are currently scopes available.\n     */\n    hasUserScopes() {\n        if (!this.scopes) {\n            return false;\n        }\n        return this.scopes.length > 0;\n    }\n    /**\n     * Are there any default or user scopes defined.\n     */\n    hasAnyScopes() {\n        if (this.scopes && this.scopes.length > 0)\n            return true;\n        if (this.defaultScopes && this.defaultScopes.length > 0)\n            return true;\n        return false;\n    }\n    authorize(callback) {\n        if (callback) {\n            this.authorizeAsync().then(r => callback(null, r), callback);\n        }\n        else {\n            return this.authorizeAsync();\n        }\n    }\n    async authorizeAsync() {\n        const result = await this.refreshToken();\n        if (!result) {\n            throw new Error('No result returned');\n        }\n        this.credentials = result.tokens;\n        this.credentials.refresh_token = 'jwt-placeholder';\n        this.key = this.gtoken.key;\n        this.email = this.gtoken.iss;\n        return result.tokens;\n    }\n    /**\n     * Refreshes the access token.\n     * @param refreshToken ignored\n     * @private\n     */\n    async refreshTokenNoCache(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    refreshToken) {\n        const gtoken = this.createGToken();\n        const token = await gtoken.getToken({\n            forceRefresh: this.isTokenExpiring(),\n        });\n        const tokens = {\n            access_token: token.access_token,\n            token_type: 'Bearer',\n            expiry_date: gtoken.expiresAt,\n            id_token: gtoken.idToken,\n        };\n        this.emit('tokens', tokens);\n        return { res: null, tokens };\n    }\n    /**\n     * Create a gToken if it doesn't already exist.\n     */\n    createGToken() {\n        if (!this.gtoken) {\n            this.gtoken = new gtoken_1.GoogleToken({\n                iss: this.email,\n                sub: this.subject,\n                scope: this.scopes || this.defaultScopes,\n                keyFile: this.keyFile,\n                key: this.key,\n                additionalClaims: this.additionalClaims,\n                transporter: this.transporter,\n            });\n        }\n        return this.gtoken;\n    }\n    /**\n     * Create a JWT credentials instance using the given input options.\n     * @param json The input object.\n     *\n     * @remarks\n     *\n     * **Important**: If you accept a credential configuration (credential JSON/File/Stream) from an external source for authentication to Google Cloud, you must validate it before providing it to any Google API or library. Providing an unvalidated credential configuration to Google APIs can compromise the security of your systems and data. For more information, refer to {@link https://cloud.google.com/docs/authentication/external/externally-sourced-credentials Validate credential configurations from external sources}.\n     */\n    fromJSON(json) {\n        if (!json) {\n            throw new Error('Must pass in a JSON object containing the service account auth settings.');\n        }\n        if (!json.client_email) {\n            throw new Error('The incoming JSON object does not contain a client_email field');\n        }\n        if (!json.private_key) {\n            throw new Error('The incoming JSON object does not contain a private_key field');\n        }\n        // Extract the relevant information from the json key file.\n        this.email = json.client_email;\n        this.key = json.private_key;\n        this.keyId = json.private_key_id;\n        this.projectId = json.project_id;\n        this.quotaProjectId = json.quota_project_id;\n        this.universeDomain = json.universe_domain || this.universeDomain;\n    }\n    fromStream(inputStream, callback) {\n        if (callback) {\n            this.fromStreamAsync(inputStream).then(() => callback(), callback);\n        }\n        else {\n            return this.fromStreamAsync(inputStream);\n        }\n    }\n    fromStreamAsync(inputStream) {\n        return new Promise((resolve, reject) => {\n            if (!inputStream) {\n                throw new Error('Must pass in a stream containing the service account auth settings.');\n            }\n            let s = '';\n            inputStream\n                .setEncoding('utf8')\n                .on('error', reject)\n                .on('data', chunk => (s += chunk))\n                .on('end', () => {\n                try {\n                    const data = JSON.parse(s);\n                    this.fromJSON(data);\n                    resolve();\n                }\n                catch (e) {\n                    reject(e);\n                }\n            });\n        });\n    }\n    /**\n     * Creates a JWT credentials instance using an API Key for authentication.\n     * @param apiKey The API Key in string form.\n     */\n    fromAPIKey(apiKey) {\n        if (typeof apiKey !== 'string') {\n            throw new Error('Must provide an API Key string.');\n        }\n        this.apiKey = apiKey;\n    }\n    /**\n     * Using the key or keyFile on the JWT client, obtain an object that contains\n     * the key and the client email.\n     */\n    async getCredentials() {\n        if (this.key) {\n            return { private_key: this.key, client_email: this.email };\n        }\n        else if (this.keyFile) {\n            const gtoken = this.createGToken();\n            const creds = await gtoken.getCredentials(this.keyFile);\n            return { private_key: creds.privateKey, client_email: creds.clientEmail };\n        }\n        throw new Error('A key or a keyFile must be provided to getCredentials.');\n    }\n}\nexports.JWT = JWT;\n","\"use strict\";\n// Copyright 2015 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UserRefreshClient = exports.USER_REFRESH_ACCOUNT_TYPE = void 0;\nconst oauth2client_1 = require(\"./oauth2client\");\nconst querystring_1 = require(\"querystring\");\nexports.USER_REFRESH_ACCOUNT_TYPE = 'authorized_user';\nclass UserRefreshClient extends oauth2client_1.OAuth2Client {\n    constructor(optionsOrClientId, clientSecret, refreshToken, eagerRefreshThresholdMillis, forceRefreshOnFailure) {\n        const opts = optionsOrClientId && typeof optionsOrClientId === 'object'\n            ? optionsOrClientId\n            : {\n                clientId: optionsOrClientId,\n                clientSecret,\n                refreshToken,\n                eagerRefreshThresholdMillis,\n                forceRefreshOnFailure,\n            };\n        super(opts);\n        this._refreshToken = opts.refreshToken;\n        this.credentials.refresh_token = opts.refreshToken;\n    }\n    /**\n     * Refreshes the access token.\n     * @param refreshToken An ignored refreshToken..\n     * @param callback Optional callback.\n     */\n    async refreshTokenNoCache(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    refreshToken) {\n        return super.refreshTokenNoCache(this._refreshToken);\n    }\n    async fetchIdToken(targetAudience) {\n        const res = await this.transporter.request({\n            ...UserRefreshClient.RETRY_CONFIG,\n            url: this.endpoints.oauth2TokenUrl,\n            headers: {\n                'Content-Type': 'application/x-www-form-urlencoded',\n            },\n            method: 'POST',\n            data: (0, querystring_1.stringify)({\n                client_id: this._clientId,\n                client_secret: this._clientSecret,\n                grant_type: 'refresh_token',\n                refresh_token: this._refreshToken,\n                target_audience: targetAudience,\n            }),\n        });\n        return res.data.id_token;\n    }\n    /**\n     * Create a UserRefreshClient credentials instance using the given input\n     * options.\n     * @param json The input object.\n     */\n    fromJSON(json) {\n        if (!json) {\n            throw new Error('Must pass in a JSON object containing the user refresh token');\n        }\n        if (json.type !== 'authorized_user') {\n            throw new Error('The incoming JSON object does not have the \"authorized_user\" type');\n        }\n        if (!json.client_id) {\n            throw new Error('The incoming JSON object does not contain a client_id field');\n        }\n        if (!json.client_secret) {\n            throw new Error('The incoming JSON object does not contain a client_secret field');\n        }\n        if (!json.refresh_token) {\n            throw new Error('The incoming JSON object does not contain a refresh_token field');\n        }\n        this._clientId = json.client_id;\n        this._clientSecret = json.client_secret;\n        this._refreshToken = json.refresh_token;\n        this.credentials.refresh_token = json.refresh_token;\n        this.quotaProjectId = json.quota_project_id;\n        this.universeDomain = json.universe_domain || this.universeDomain;\n    }\n    fromStream(inputStream, callback) {\n        if (callback) {\n            this.fromStreamAsync(inputStream).then(() => callback(), callback);\n        }\n        else {\n            return this.fromStreamAsync(inputStream);\n        }\n    }\n    async fromStreamAsync(inputStream) {\n        return new Promise((resolve, reject) => {\n            if (!inputStream) {\n                return reject(new Error('Must pass in a stream containing the user refresh token.'));\n            }\n            let s = '';\n            inputStream\n                .setEncoding('utf8')\n                .on('error', reject)\n                .on('data', chunk => (s += chunk))\n                .on('end', () => {\n                try {\n                    const data = JSON.parse(s);\n                    this.fromJSON(data);\n                    return resolve();\n                }\n                catch (err) {\n                    return reject(err);\n                }\n            });\n        });\n    }\n    /**\n     * Create a UserRefreshClient credentials instance using the given input\n     * options.\n     * @param json The input object.\n     */\n    static fromJSON(json) {\n        const client = new UserRefreshClient();\n        client.fromJSON(json);\n        return client;\n    }\n}\nexports.UserRefreshClient = UserRefreshClient;\n","\"use strict\";\n/**\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Impersonated = exports.IMPERSONATED_ACCOUNT_TYPE = void 0;\nconst oauth2client_1 = require(\"./oauth2client\");\nconst gaxios_1 = require(\"gaxios\");\nconst util_1 = require(\"../util\");\nexports.IMPERSONATED_ACCOUNT_TYPE = 'impersonated_service_account';\nclass Impersonated extends oauth2client_1.OAuth2Client {\n    /**\n     * Impersonated service account credentials.\n     *\n     * Create a new access token by impersonating another service account.\n     *\n     * Impersonated Credentials allowing credentials issued to a user or\n     * service account to impersonate another. The source project using\n     * Impersonated Credentials must enable the \"IAMCredentials\" API.\n     * Also, the target service account must grant the orginating principal\n     * the \"Service Account Token Creator\" IAM role.\n     *\n     * @param {object} options - The configuration object.\n     * @param {object} [options.sourceClient] the source credential used as to\n     * acquire the impersonated credentials.\n     * @param {string} [options.targetPrincipal] the service account to\n     * impersonate.\n     * @param {string[]} [options.delegates] the chained list of delegates\n     * required to grant the final access_token. If set, the sequence of\n     * identities must have \"Service Account Token Creator\" capability granted to\n     * the preceding identity. For example, if set to [serviceAccountB,\n     * serviceAccountC], the sourceCredential must have the Token Creator role on\n     * serviceAccountB. serviceAccountB must have the Token Creator on\n     * serviceAccountC. Finally, C must have Token Creator on target_principal.\n     * If left unset, sourceCredential must have that role on targetPrincipal.\n     * @param {string[]} [options.targetScopes] scopes to request during the\n     * authorization grant.\n     * @param {number} [options.lifetime] number of seconds the delegated\n     * credential should be valid for up to 3600 seconds by default, or 43,200\n     * seconds by extending the token's lifetime, see:\n     * https://cloud.google.com/iam/docs/creating-short-lived-service-account-credentials#sa-credentials-oauth\n     * @param {string} [options.endpoint] api endpoint override.\n     */\n    constructor(options = {}) {\n        var _a, _b, _c, _d, _e, _f;\n        super(options);\n        // Start with an expired refresh token, which will automatically be\n        // refreshed before the first API call is made.\n        this.credentials = {\n            expiry_date: 1,\n            refresh_token: 'impersonated-placeholder',\n        };\n        this.sourceClient = (_a = options.sourceClient) !== null && _a !== void 0 ? _a : new oauth2client_1.OAuth2Client();\n        this.targetPrincipal = (_b = options.targetPrincipal) !== null && _b !== void 0 ? _b : '';\n        this.delegates = (_c = options.delegates) !== null && _c !== void 0 ? _c : [];\n        this.targetScopes = (_d = options.targetScopes) !== null && _d !== void 0 ? _d : [];\n        this.lifetime = (_e = options.lifetime) !== null && _e !== void 0 ? _e : 3600;\n        const usingExplicitUniverseDomain = !!(0, util_1.originalOrCamelOptions)(options).get('universe_domain');\n        if (!usingExplicitUniverseDomain) {\n            // override the default universe with the source's universe\n            this.universeDomain = this.sourceClient.universeDomain;\n        }\n        else if (this.sourceClient.universeDomain !== this.universeDomain) {\n            // non-default universe and is not matching the source - this could be a credential leak\n            throw new RangeError(`Universe domain ${this.sourceClient.universeDomain} in source credentials does not match ${this.universeDomain} universe domain set for impersonated credentials.`);\n        }\n        this.endpoint =\n            (_f = options.endpoint) !== null && _f !== void 0 ? _f : `https://iamcredentials.${this.universeDomain}`;\n    }\n    /**\n     * Signs some bytes.\n     *\n     * {@link https://cloud.google.com/iam/docs/reference/credentials/rest/v1/projects.serviceAccounts/signBlob Reference Documentation}\n     * @param blobToSign String to sign.\n     *\n     * @returns A {@link SignBlobResponse} denoting the keyID and signedBlob in base64 string\n     */\n    async sign(blobToSign) {\n        await this.sourceClient.getAccessToken();\n        const name = `projects/-/serviceAccounts/${this.targetPrincipal}`;\n        const u = `${this.endpoint}/v1/${name}:signBlob`;\n        const body = {\n            delegates: this.delegates,\n            payload: Buffer.from(blobToSign).toString('base64'),\n        };\n        const res = await this.sourceClient.request({\n            ...Impersonated.RETRY_CONFIG,\n            url: u,\n            data: body,\n            method: 'POST',\n        });\n        return res.data;\n    }\n    /** The service account email to be impersonated. */\n    getTargetPrincipal() {\n        return this.targetPrincipal;\n    }\n    /**\n     * Refreshes the access token.\n     */\n    async refreshToken() {\n        var _a, _b, _c, _d, _e, _f;\n        try {\n            await this.sourceClient.getAccessToken();\n            const name = 'projects/-/serviceAccounts/' + this.targetPrincipal;\n            const u = `${this.endpoint}/v1/${name}:generateAccessToken`;\n            const body = {\n                delegates: this.delegates,\n                scope: this.targetScopes,\n                lifetime: this.lifetime + 's',\n            };\n            const res = await this.sourceClient.request({\n                ...Impersonated.RETRY_CONFIG,\n                url: u,\n                data: body,\n                method: 'POST',\n            });\n            const tokenResponse = res.data;\n            this.credentials.access_token = tokenResponse.accessToken;\n            this.credentials.expiry_date = Date.parse(tokenResponse.expireTime);\n            return {\n                tokens: this.credentials,\n                res,\n            };\n        }\n        catch (error) {\n            if (!(error instanceof Error))\n                throw error;\n            let status = 0;\n            let message = '';\n            if (error instanceof gaxios_1.GaxiosError) {\n                status = (_c = (_b = (_a = error === null || error === void 0 ? void 0 : error.response) === null || _a === void 0 ? void 0 : _a.data) === null || _b === void 0 ? void 0 : _b.error) === null || _c === void 0 ? void 0 : _c.status;\n                message = (_f = (_e = (_d = error === null || error === void 0 ? void 0 : error.response) === null || _d === void 0 ? void 0 : _d.data) === null || _e === void 0 ? void 0 : _e.error) === null || _f === void 0 ? void 0 : _f.message;\n            }\n            if (status && message) {\n                error.message = `${status}: unable to impersonate: ${message}`;\n                throw error;\n            }\n            else {\n                error.message = `unable to impersonate: ${error}`;\n                throw error;\n            }\n        }\n    }\n    /**\n     * Generates an OpenID Connect ID token for a service account.\n     *\n     * {@link https://cloud.google.com/iam/docs/reference/credentials/rest/v1/projects.serviceAccounts/generateIdToken Reference Documentation}\n     *\n     * @param targetAudience the audience for the fetched ID token.\n     * @param options the for the request\n     * @return an OpenID Connect ID token\n     */\n    async fetchIdToken(targetAudience, options) {\n        var _a, _b;\n        await this.sourceClient.getAccessToken();\n        const name = `projects/-/serviceAccounts/${this.targetPrincipal}`;\n        const u = `${this.endpoint}/v1/${name}:generateIdToken`;\n        const body = {\n            delegates: this.delegates,\n            audience: targetAudience,\n            includeEmail: (_a = options === null || options === void 0 ? void 0 : options.includeEmail) !== null && _a !== void 0 ? _a : true,\n            useEmailAzp: (_b = options === null || options === void 0 ? void 0 : options.includeEmail) !== null && _b !== void 0 ? _b : true,\n        };\n        const res = await this.sourceClient.request({\n            ...Impersonated.RETRY_CONFIG,\n            url: u,\n            data: body,\n            method: 'POST',\n        });\n        return res.data.token;\n    }\n}\nexports.Impersonated = Impersonated;\n","\"use strict\";\n// Copyright 2021 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OAuthClientAuthHandler = void 0;\nexports.getErrorFromOAuthErrorResponse = getErrorFromOAuthErrorResponse;\nconst querystring = require(\"querystring\");\nconst crypto_1 = require(\"../crypto/crypto\");\n/** List of HTTP methods that accept request bodies. */\nconst METHODS_SUPPORTING_REQUEST_BODY = ['PUT', 'POST', 'PATCH'];\n/**\n * Abstract class for handling client authentication in OAuth-based\n * operations.\n * When request-body client authentication is used, only application/json and\n * application/x-www-form-urlencoded content types for HTTP methods that support\n * request bodies are supported.\n */\nclass OAuthClientAuthHandler {\n    /**\n     * Instantiates an OAuth client authentication handler.\n     * @param clientAuthentication The client auth credentials.\n     */\n    constructor(clientAuthentication) {\n        this.clientAuthentication = clientAuthentication;\n        this.crypto = (0, crypto_1.createCrypto)();\n    }\n    /**\n     * Applies client authentication on the OAuth request's headers or POST\n     * body but does not process the request.\n     * @param opts The GaxiosOptions whose headers or data are to be modified\n     *   depending on the client authentication mechanism to be used.\n     * @param bearerToken The optional bearer token to use for authentication.\n     *   When this is used, no client authentication credentials are needed.\n     */\n    applyClientAuthenticationOptions(opts, bearerToken) {\n        // Inject authenticated header.\n        this.injectAuthenticatedHeaders(opts, bearerToken);\n        // Inject authenticated request body.\n        if (!bearerToken) {\n            this.injectAuthenticatedRequestBody(opts);\n        }\n    }\n    /**\n     * Applies client authentication on the request's header if either\n     * basic authentication or bearer token authentication is selected.\n     *\n     * @param opts The GaxiosOptions whose headers or data are to be modified\n     *   depending on the client authentication mechanism to be used.\n     * @param bearerToken The optional bearer token to use for authentication.\n     *   When this is used, no client authentication credentials are needed.\n     */\n    injectAuthenticatedHeaders(opts, bearerToken) {\n        var _a;\n        // Bearer token prioritized higher than basic Auth.\n        if (bearerToken) {\n            opts.headers = opts.headers || {};\n            Object.assign(opts.headers, {\n                Authorization: `Bearer ${bearerToken}}`,\n            });\n        }\n        else if (((_a = this.clientAuthentication) === null || _a === void 0 ? void 0 : _a.confidentialClientType) === 'basic') {\n            opts.headers = opts.headers || {};\n            const clientId = this.clientAuthentication.clientId;\n            const clientSecret = this.clientAuthentication.clientSecret || '';\n            const base64EncodedCreds = this.crypto.encodeBase64StringUtf8(`${clientId}:${clientSecret}`);\n            Object.assign(opts.headers, {\n                Authorization: `Basic ${base64EncodedCreds}`,\n            });\n        }\n    }\n    /**\n     * Applies client authentication on the request's body if request-body\n     * client authentication is selected.\n     *\n     * @param opts The GaxiosOptions whose headers or data are to be modified\n     *   depending on the client authentication mechanism to be used.\n     */\n    injectAuthenticatedRequestBody(opts) {\n        var _a;\n        if (((_a = this.clientAuthentication) === null || _a === void 0 ? void 0 : _a.confidentialClientType) === 'request-body') {\n            const method = (opts.method || 'GET').toUpperCase();\n            // Inject authenticated request body.\n            if (METHODS_SUPPORTING_REQUEST_BODY.indexOf(method) !== -1) {\n                // Get content-type.\n                let contentType;\n                const headers = opts.headers || {};\n                for (const key in headers) {\n                    if (key.toLowerCase() === 'content-type' && headers[key]) {\n                        contentType = headers[key].toLowerCase();\n                        break;\n                    }\n                }\n                if (contentType === 'application/x-www-form-urlencoded') {\n                    opts.data = opts.data || '';\n                    const data = querystring.parse(opts.data);\n                    Object.assign(data, {\n                        client_id: this.clientAuthentication.clientId,\n                        client_secret: this.clientAuthentication.clientSecret || '',\n                    });\n                    opts.data = querystring.stringify(data);\n                }\n                else if (contentType === 'application/json') {\n                    opts.data = opts.data || {};\n                    Object.assign(opts.data, {\n                        client_id: this.clientAuthentication.clientId,\n                        client_secret: this.clientAuthentication.clientSecret || '',\n                    });\n                }\n                else {\n                    throw new Error(`${contentType} content-types are not supported with ` +\n                        `${this.clientAuthentication.confidentialClientType} ` +\n                        'client authentication');\n                }\n            }\n            else {\n                throw new Error(`${method} HTTP method does not support ` +\n                    `${this.clientAuthentication.confidentialClientType} ` +\n                    'client authentication');\n            }\n        }\n    }\n    /**\n     * Retry config for Auth-related requests.\n     *\n     * @remarks\n     *\n     * This is not a part of the default {@link AuthClient.transporter transporter/gaxios}\n     * config as some downstream APIs would prefer if customers explicitly enable retries,\n     * such as GCS.\n     */\n    static get RETRY_CONFIG() {\n        return {\n            retry: true,\n            retryConfig: {\n                httpMethodsToRetry: ['GET', 'PUT', 'POST', 'HEAD', 'OPTIONS', 'DELETE'],\n            },\n        };\n    }\n}\nexports.OAuthClientAuthHandler = OAuthClientAuthHandler;\n/**\n * Converts an OAuth error response to a native JavaScript Error.\n * @param resp The OAuth error response to convert to a native Error object.\n * @param err The optional original error. If provided, the error properties\n *   will be copied to the new error.\n * @return The converted native Error object.\n */\nfunction getErrorFromOAuthErrorResponse(resp, err) {\n    // Error response.\n    const errorCode = resp.error;\n    const errorDescription = resp.error_description;\n    const errorUri = resp.error_uri;\n    let message = `Error code ${errorCode}`;\n    if (typeof errorDescription !== 'undefined') {\n        message += `: ${errorDescription}`;\n    }\n    if (typeof errorUri !== 'undefined') {\n        message += ` - ${errorUri}`;\n    }\n    const newError = new Error(message);\n    // Copy properties from original error to newly generated error.\n    if (err) {\n        const keys = Object.keys(err);\n        if (err.stack) {\n            // Copy error.stack if available.\n            keys.push('stack');\n        }\n        keys.forEach(key => {\n            // Do not overwrite the message field.\n            if (key !== 'message') {\n                Object.defineProperty(newError, key, {\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    value: err[key],\n                    writable: false,\n                    enumerable: true,\n                });\n            }\n        });\n    }\n    return newError;\n}\n","\"use strict\";\n// Copyright 2021 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.StsCredentials = void 0;\nconst gaxios_1 = require(\"gaxios\");\nconst querystring = require(\"querystring\");\nconst transporters_1 = require(\"../transporters\");\nconst oauth2common_1 = require(\"./oauth2common\");\n/**\n * Implements the OAuth 2.0 token exchange based on\n * https://tools.ietf.org/html/rfc8693\n */\nclass StsCredentials extends oauth2common_1.OAuthClientAuthHandler {\n    /**\n     * Initializes an STS credentials instance.\n     * @param tokenExchangeEndpoint The token exchange endpoint.\n     * @param clientAuthentication The client authentication credentials if\n     *   available.\n     */\n    constructor(tokenExchangeEndpoint, clientAuthentication) {\n        super(clientAuthentication);\n        this.tokenExchangeEndpoint = tokenExchangeEndpoint;\n        this.transporter = new transporters_1.DefaultTransporter();\n    }\n    /**\n     * Exchanges the provided token for another type of token based on the\n     * rfc8693 spec.\n     * @param stsCredentialsOptions The token exchange options used to populate\n     *   the token exchange request.\n     * @param additionalHeaders Optional additional headers to pass along the\n     *   request.\n     * @param options Optional additional GCP-specific non-spec defined options\n     *   to send with the request.\n     *   Example: `&options=${encodeUriComponent(JSON.stringified(options))}`\n     * @return A promise that resolves with the token exchange response containing\n     *   the requested token and its expiration time.\n     */\n    async exchangeToken(stsCredentialsOptions, additionalHeaders, \n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    options) {\n        var _a, _b, _c;\n        const values = {\n            grant_type: stsCredentialsOptions.grantType,\n            resource: stsCredentialsOptions.resource,\n            audience: stsCredentialsOptions.audience,\n            scope: (_a = stsCredentialsOptions.scope) === null || _a === void 0 ? void 0 : _a.join(' '),\n            requested_token_type: stsCredentialsOptions.requestedTokenType,\n            subject_token: stsCredentialsOptions.subjectToken,\n            subject_token_type: stsCredentialsOptions.subjectTokenType,\n            actor_token: (_b = stsCredentialsOptions.actingParty) === null || _b === void 0 ? void 0 : _b.actorToken,\n            actor_token_type: (_c = stsCredentialsOptions.actingParty) === null || _c === void 0 ? void 0 : _c.actorTokenType,\n            // Non-standard GCP-specific options.\n            options: options && JSON.stringify(options),\n        };\n        // Remove undefined fields.\n        Object.keys(values).forEach(key => {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            if (typeof values[key] === 'undefined') {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                delete values[key];\n            }\n        });\n        const headers = {\n            'Content-Type': 'application/x-www-form-urlencoded',\n        };\n        // Inject additional STS headers if available.\n        Object.assign(headers, additionalHeaders || {});\n        const opts = {\n            ...StsCredentials.RETRY_CONFIG,\n            url: this.tokenExchangeEndpoint.toString(),\n            method: 'POST',\n            headers,\n            data: querystring.stringify(values),\n            responseType: 'json',\n        };\n        // Apply OAuth client authentication.\n        this.applyClientAuthenticationOptions(opts);\n        try {\n            const response = await this.transporter.request(opts);\n            // Successful response.\n            const stsSuccessfulResponse = response.data;\n            stsSuccessfulResponse.res = response;\n            return stsSuccessfulResponse;\n        }\n        catch (error) {\n            // Translate error to OAuthError.\n            if (error instanceof gaxios_1.GaxiosError && error.response) {\n                throw (0, oauth2common_1.getErrorFromOAuthErrorResponse)(error.response.data, \n                // Preserve other fields from the original error.\n                error);\n            }\n            // Request could fail before the server responds.\n            throw error;\n        }\n    }\n}\nexports.StsCredentials = StsCredentials;\n","\"use strict\";\n// Copyright 2021 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar _BaseExternalAccountClient_instances, _BaseExternalAccountClient_pendingAccessToken, _BaseExternalAccountClient_internalRefreshAccessTokenAsync;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BaseExternalAccountClient = exports.DEFAULT_UNIVERSE = exports.CLOUD_RESOURCE_MANAGER = exports.EXTERNAL_ACCOUNT_TYPE = exports.EXPIRATION_TIME_OFFSET = void 0;\nconst stream = require(\"stream\");\nconst authclient_1 = require(\"./authclient\");\nconst sts = require(\"./stscredentials\");\nconst util_1 = require(\"../util\");\n/**\n * The required token exchange grant_type: rfc8693#section-2.1\n */\nconst STS_GRANT_TYPE = 'urn:ietf:params:oauth:grant-type:token-exchange';\n/**\n * The requested token exchange requested_token_type: rfc8693#section-2.1\n */\nconst STS_REQUEST_TOKEN_TYPE = 'urn:ietf:params:oauth:token-type:access_token';\n/** The default OAuth scope to request when none is provided. */\nconst DEFAULT_OAUTH_SCOPE = 'https://www.googleapis.com/auth/cloud-platform';\n/** Default impersonated token lifespan in seconds.*/\nconst DEFAULT_TOKEN_LIFESPAN = 3600;\n/**\n * Offset to take into account network delays and server clock skews.\n */\nexports.EXPIRATION_TIME_OFFSET = 5 * 60 * 1000;\n/**\n * The credentials JSON file type for external account clients.\n * There are 3 types of JSON configs:\n * 1. authorized_user => Google end user credential\n * 2. service_account => Google service account credential\n * 3. external_Account => non-GCP service (eg. AWS, Azure, K8s)\n */\nexports.EXTERNAL_ACCOUNT_TYPE = 'external_account';\n/**\n * Cloud resource manager URL used to retrieve project information.\n *\n * @deprecated use {@link BaseExternalAccountClient.cloudResourceManagerURL} instead\n **/\nexports.CLOUD_RESOURCE_MANAGER = 'https://cloudresourcemanager.googleapis.com/v1/projects/';\n/** The workforce audience pattern. */\nconst WORKFORCE_AUDIENCE_PATTERN = '//iam\\\\.googleapis\\\\.com/locations/[^/]+/workforcePools/[^/]+/providers/.+';\nconst DEFAULT_TOKEN_URL = 'https://sts.{universeDomain}/v1/token';\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst pkg = require('../../../package.json');\n/**\n * For backwards compatibility.\n */\nvar authclient_2 = require(\"./authclient\");\nObject.defineProperty(exports, \"DEFAULT_UNIVERSE\", { enumerable: true, get: function () { return authclient_2.DEFAULT_UNIVERSE; } });\n/**\n * Base external account client. This is used to instantiate AuthClients for\n * exchanging external account credentials for GCP access token and authorizing\n * requests to GCP APIs.\n * The base class implements common logic for exchanging various type of\n * external credentials for GCP access token. The logic of determining and\n * retrieving the external credential based on the environment and\n * credential_source will be left for the subclasses.\n */\nclass BaseExternalAccountClient extends authclient_1.AuthClient {\n    /**\n     * Instantiate a BaseExternalAccountClient instance using the provided JSON\n     * object loaded from an external account credentials file.\n     * @param options The external account options object typically loaded\n     *   from the external account JSON credential file. The camelCased options\n     *   are aliases for the snake_cased options.\n     * @param additionalOptions **DEPRECATED, all options are available in the\n     *   `options` parameter.** Optional additional behavior customization options.\n     *   These currently customize expiration threshold time and whether to retry\n     *   on 401/403 API request errors.\n     */\n    constructor(options, additionalOptions) {\n        var _a;\n        super({ ...options, ...additionalOptions });\n        _BaseExternalAccountClient_instances.add(this);\n        /**\n         * A pending access token request. Used for concurrent calls.\n         */\n        _BaseExternalAccountClient_pendingAccessToken.set(this, null);\n        const opts = (0, util_1.originalOrCamelOptions)(options);\n        const type = opts.get('type');\n        if (type && type !== exports.EXTERNAL_ACCOUNT_TYPE) {\n            throw new Error(`Expected \"${exports.EXTERNAL_ACCOUNT_TYPE}\" type but ` +\n                `received \"${options.type}\"`);\n        }\n        const clientId = opts.get('client_id');\n        const clientSecret = opts.get('client_secret');\n        const tokenUrl = (_a = opts.get('token_url')) !== null && _a !== void 0 ? _a : DEFAULT_TOKEN_URL.replace('{universeDomain}', this.universeDomain);\n        const subjectTokenType = opts.get('subject_token_type');\n        const workforcePoolUserProject = opts.get('workforce_pool_user_project');\n        const serviceAccountImpersonationUrl = opts.get('service_account_impersonation_url');\n        const serviceAccountImpersonation = opts.get('service_account_impersonation');\n        const serviceAccountImpersonationLifetime = (0, util_1.originalOrCamelOptions)(serviceAccountImpersonation).get('token_lifetime_seconds');\n        this.cloudResourceManagerURL = new URL(opts.get('cloud_resource_manager_url') ||\n            `https://cloudresourcemanager.${this.universeDomain}/v1/projects/`);\n        if (clientId) {\n            this.clientAuth = {\n                confidentialClientType: 'basic',\n                clientId,\n                clientSecret,\n            };\n        }\n        this.stsCredential = new sts.StsCredentials(tokenUrl, this.clientAuth);\n        this.scopes = opts.get('scopes') || [DEFAULT_OAUTH_SCOPE];\n        this.cachedAccessToken = null;\n        this.audience = opts.get('audience');\n        this.subjectTokenType = subjectTokenType;\n        this.workforcePoolUserProject = workforcePoolUserProject;\n        const workforceAudiencePattern = new RegExp(WORKFORCE_AUDIENCE_PATTERN);\n        if (this.workforcePoolUserProject &&\n            !this.audience.match(workforceAudiencePattern)) {\n            throw new Error('workforcePoolUserProject should not be set for non-workforce pool ' +\n                'credentials.');\n        }\n        this.serviceAccountImpersonationUrl = serviceAccountImpersonationUrl;\n        this.serviceAccountImpersonationLifetime =\n            serviceAccountImpersonationLifetime;\n        if (this.serviceAccountImpersonationLifetime) {\n            this.configLifetimeRequested = true;\n        }\n        else {\n            this.configLifetimeRequested = false;\n            this.serviceAccountImpersonationLifetime = DEFAULT_TOKEN_LIFESPAN;\n        }\n        this.projectNumber = this.getProjectNumber(this.audience);\n        this.supplierContext = {\n            audience: this.audience,\n            subjectTokenType: this.subjectTokenType,\n            transporter: this.transporter,\n        };\n    }\n    /** The service account email to be impersonated, if available. */\n    getServiceAccountEmail() {\n        var _a;\n        if (this.serviceAccountImpersonationUrl) {\n            if (this.serviceAccountImpersonationUrl.length > 256) {\n                /**\n                 * Prevents DOS attacks.\n                 * @see {@link https://github.com/googleapis/google-auth-library-nodejs/security/code-scanning/84}\n                 **/\n                throw new RangeError(`URL is too long: ${this.serviceAccountImpersonationUrl}`);\n            }\n            // Parse email from URL. The formal looks as follows:\n            // https://iamcredentials.googleapis.com/v1/projects/-/serviceAccounts/name@project-id.iam.gserviceaccount.com:generateAccessToken\n            const re = /serviceAccounts\\/(?<email>[^:]+):generateAccessToken$/;\n            const result = re.exec(this.serviceAccountImpersonationUrl);\n            return ((_a = result === null || result === void 0 ? void 0 : result.groups) === null || _a === void 0 ? void 0 : _a.email) || null;\n        }\n        return null;\n    }\n    /**\n     * Provides a mechanism to inject GCP access tokens directly.\n     * When the provided credential expires, a new credential, using the\n     * external account options, is retrieved.\n     * @param credentials The Credentials object to set on the current client.\n     */\n    setCredentials(credentials) {\n        super.setCredentials(credentials);\n        this.cachedAccessToken = credentials;\n    }\n    /**\n     * @return A promise that resolves with the current GCP access token\n     *   response. If the current credential is expired, a new one is retrieved.\n     */\n    async getAccessToken() {\n        // If cached access token is unavailable or expired, force refresh.\n        if (!this.cachedAccessToken || this.isExpired(this.cachedAccessToken)) {\n            await this.refreshAccessTokenAsync();\n        }\n        // Return GCP access token in GetAccessTokenResponse format.\n        return {\n            token: this.cachedAccessToken.access_token,\n            res: this.cachedAccessToken.res,\n        };\n    }\n    /**\n     * The main authentication interface. It takes an optional url which when\n     * present is the endpoint being accessed, and returns a Promise which\n     * resolves with authorization header fields.\n     *\n     * The result has the form:\n     * { Authorization: 'Bearer <access_token_value>' }\n     */\n    async getRequestHeaders() {\n        const accessTokenResponse = await this.getAccessToken();\n        const headers = {\n            Authorization: `Bearer ${accessTokenResponse.token}`,\n        };\n        return this.addSharedMetadataHeaders(headers);\n    }\n    request(opts, callback) {\n        if (callback) {\n            this.requestAsync(opts).then(r => callback(null, r), e => {\n                return callback(e, e.response);\n            });\n        }\n        else {\n            return this.requestAsync(opts);\n        }\n    }\n    /**\n     * @return A promise that resolves with the project ID corresponding to the\n     *   current workload identity pool or current workforce pool if\n     *   determinable. For workforce pool credential, it returns the project ID\n     *   corresponding to the workforcePoolUserProject.\n     *   This is introduced to match the current pattern of using the Auth\n     *   library:\n     *   const projectId = await auth.getProjectId();\n     *   const url = `https://dns.googleapis.com/dns/v1/projects/${projectId}`;\n     *   const res = await client.request({ url });\n     *   The resource may not have permission\n     *   (resourcemanager.projects.get) to call this API or the required\n     *   scopes may not be selected:\n     *   https://cloud.google.com/resource-manager/reference/rest/v1/projects/get#authorization-scopes\n     */\n    async getProjectId() {\n        const projectNumber = this.projectNumber || this.workforcePoolUserProject;\n        if (this.projectId) {\n            // Return previously determined project ID.\n            return this.projectId;\n        }\n        else if (projectNumber) {\n            // Preferable not to use request() to avoid retrial policies.\n            const headers = await this.getRequestHeaders();\n            const response = await this.transporter.request({\n                ...BaseExternalAccountClient.RETRY_CONFIG,\n                headers,\n                url: `${this.cloudResourceManagerURL.toString()}${projectNumber}`,\n                responseType: 'json',\n            });\n            this.projectId = response.data.projectId;\n            return this.projectId;\n        }\n        return null;\n    }\n    /**\n     * Authenticates the provided HTTP request, processes it and resolves with the\n     * returned response.\n     * @param opts The HTTP request options.\n     * @param reAuthRetried Whether the current attempt is a retry after a failed attempt due to an auth failure.\n     * @return A promise that resolves with the successful response.\n     */\n    async requestAsync(opts, reAuthRetried = false) {\n        let response;\n        try {\n            const requestHeaders = await this.getRequestHeaders();\n            opts.headers = opts.headers || {};\n            if (requestHeaders && requestHeaders['x-goog-user-project']) {\n                opts.headers['x-goog-user-project'] =\n                    requestHeaders['x-goog-user-project'];\n            }\n            if (requestHeaders && requestHeaders.Authorization) {\n                opts.headers.Authorization = requestHeaders.Authorization;\n            }\n            response = await this.transporter.request(opts);\n        }\n        catch (e) {\n            const res = e.response;\n            if (res) {\n                const statusCode = res.status;\n                // Retry the request for metadata if the following criteria are true:\n                // - We haven't already retried.  It only makes sense to retry once.\n                // - The response was a 401 or a 403\n                // - The request didn't send a readableStream\n                // - forceRefreshOnFailure is true\n                const isReadableStream = res.config.data instanceof stream.Readable;\n                const isAuthErr = statusCode === 401 || statusCode === 403;\n                if (!reAuthRetried &&\n                    isAuthErr &&\n                    !isReadableStream &&\n                    this.forceRefreshOnFailure) {\n                    await this.refreshAccessTokenAsync();\n                    return await this.requestAsync(opts, true);\n                }\n            }\n            throw e;\n        }\n        return response;\n    }\n    /**\n     * Forces token refresh, even if unexpired tokens are currently cached.\n     * External credentials are exchanged for GCP access tokens via the token\n     * exchange endpoint and other settings provided in the client options\n     * object.\n     * If the service_account_impersonation_url is provided, an additional\n     * step to exchange the external account GCP access token for a service\n     * account impersonated token is performed.\n     * @return A promise that resolves with the fresh GCP access tokens.\n     */\n    async refreshAccessTokenAsync() {\n        // Use an existing access token request, or cache a new one\n        __classPrivateFieldSet(this, _BaseExternalAccountClient_pendingAccessToken, __classPrivateFieldGet(this, _BaseExternalAccountClient_pendingAccessToken, \"f\") || __classPrivateFieldGet(this, _BaseExternalAccountClient_instances, \"m\", _BaseExternalAccountClient_internalRefreshAccessTokenAsync).call(this), \"f\");\n        try {\n            return await __classPrivateFieldGet(this, _BaseExternalAccountClient_pendingAccessToken, \"f\");\n        }\n        finally {\n            // clear pending access token for future requests\n            __classPrivateFieldSet(this, _BaseExternalAccountClient_pendingAccessToken, null, \"f\");\n        }\n    }\n    /**\n     * Returns the workload identity pool project number if it is determinable\n     * from the audience resource name.\n     * @param audience The STS audience used to determine the project number.\n     * @return The project number associated with the workload identity pool, if\n     *   this can be determined from the STS audience field. Otherwise, null is\n     *   returned.\n     */\n    getProjectNumber(audience) {\n        // STS audience pattern:\n        // //iam.googleapis.com/projects/$PROJECT_NUMBER/locations/...\n        const match = audience.match(/\\/projects\\/([^/]+)/);\n        if (!match) {\n            return null;\n        }\n        return match[1];\n    }\n    /**\n     * Exchanges an external account GCP access token for a service\n     * account impersonated access token using iamcredentials\n     * GenerateAccessToken API.\n     * @param token The access token to exchange for a service account access\n     *   token.\n     * @return A promise that resolves with the service account impersonated\n     *   credentials response.\n     */\n    async getImpersonatedAccessToken(token) {\n        const opts = {\n            ...BaseExternalAccountClient.RETRY_CONFIG,\n            url: this.serviceAccountImpersonationUrl,\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                Authorization: `Bearer ${token}`,\n            },\n            data: {\n                scope: this.getScopesArray(),\n                lifetime: this.serviceAccountImpersonationLifetime + 's',\n            },\n            responseType: 'json',\n        };\n        const response = await this.transporter.request(opts);\n        const successResponse = response.data;\n        return {\n            access_token: successResponse.accessToken,\n            // Convert from ISO format to timestamp.\n            expiry_date: new Date(successResponse.expireTime).getTime(),\n            res: response,\n        };\n    }\n    /**\n     * Returns whether the provided credentials are expired or not.\n     * If there is no expiry time, assumes the token is not expired or expiring.\n     * @param accessToken The credentials to check for expiration.\n     * @return Whether the credentials are expired or not.\n     */\n    isExpired(accessToken) {\n        const now = new Date().getTime();\n        return accessToken.expiry_date\n            ? now >= accessToken.expiry_date - this.eagerRefreshThresholdMillis\n            : false;\n    }\n    /**\n     * @return The list of scopes for the requested GCP access token.\n     */\n    getScopesArray() {\n        // Since scopes can be provided as string or array, the type should\n        // be normalized.\n        if (typeof this.scopes === 'string') {\n            return [this.scopes];\n        }\n        return this.scopes || [DEFAULT_OAUTH_SCOPE];\n    }\n    getMetricsHeaderValue() {\n        const nodeVersion = process.version.replace(/^v/, '');\n        const saImpersonation = this.serviceAccountImpersonationUrl !== undefined;\n        const credentialSourceType = this.credentialSourceType\n            ? this.credentialSourceType\n            : 'unknown';\n        return `gl-node/${nodeVersion} auth/${pkg.version} google-byoid-sdk source/${credentialSourceType} sa-impersonation/${saImpersonation} config-lifetime/${this.configLifetimeRequested}`;\n    }\n}\nexports.BaseExternalAccountClient = BaseExternalAccountClient;\n_BaseExternalAccountClient_pendingAccessToken = new WeakMap(), _BaseExternalAccountClient_instances = new WeakSet(), _BaseExternalAccountClient_internalRefreshAccessTokenAsync = async function _BaseExternalAccountClient_internalRefreshAccessTokenAsync() {\n    // Retrieve the external credential.\n    const subjectToken = await this.retrieveSubjectToken();\n    // Construct the STS credentials options.\n    const stsCredentialsOptions = {\n        grantType: STS_GRANT_TYPE,\n        audience: this.audience,\n        requestedTokenType: STS_REQUEST_TOKEN_TYPE,\n        subjectToken,\n        subjectTokenType: this.subjectTokenType,\n        // generateAccessToken requires the provided access token to have\n        // scopes:\n        // https://www.googleapis.com/auth/iam or\n        // https://www.googleapis.com/auth/cloud-platform\n        // The new service account access token scopes will match the user\n        // provided ones.\n        scope: this.serviceAccountImpersonationUrl\n            ? [DEFAULT_OAUTH_SCOPE]\n            : this.getScopesArray(),\n    };\n    // Exchange the external credentials for a GCP access token.\n    // Client auth is prioritized over passing the workforcePoolUserProject\n    // parameter for STS token exchange.\n    const additionalOptions = !this.clientAuth && this.workforcePoolUserProject\n        ? { userProject: this.workforcePoolUserProject }\n        : undefined;\n    const additionalHeaders = {\n        'x-goog-api-client': this.getMetricsHeaderValue(),\n    };\n    const stsResponse = await this.stsCredential.exchangeToken(stsCredentialsOptions, additionalHeaders, additionalOptions);\n    if (this.serviceAccountImpersonationUrl) {\n        this.cachedAccessToken = await this.getImpersonatedAccessToken(stsResponse.access_token);\n    }\n    else if (stsResponse.expires_in) {\n        // Save response in cached access token.\n        this.cachedAccessToken = {\n            access_token: stsResponse.access_token,\n            expiry_date: new Date().getTime() + stsResponse.expires_in * 1000,\n            res: stsResponse.res,\n        };\n    }\n    else {\n        // Save response in cached access token.\n        this.cachedAccessToken = {\n            access_token: stsResponse.access_token,\n            res: stsResponse.res,\n        };\n    }\n    // Save credentials.\n    this.credentials = {};\n    Object.assign(this.credentials, this.cachedAccessToken);\n    delete this.credentials.res;\n    // Trigger tokens event to notify external listeners.\n    this.emit('tokens', {\n        refresh_token: null,\n        expiry_date: this.cachedAccessToken.expiry_date,\n        access_token: this.cachedAccessToken.access_token,\n        token_type: 'Bearer',\n        id_token: null,\n    });\n    // Return the cached access token.\n    return this.cachedAccessToken;\n};\n","\"use strict\";\n// Copyright 2024 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nvar _a, _b, _c;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FileSubjectTokenSupplier = void 0;\nconst util_1 = require(\"util\");\nconst fs = require(\"fs\");\n// fs.readfile is undefined in browser karma tests causing\n// `npm run browser-test` to fail as test.oauth2.ts imports this file via\n// src/index.ts.\n// Fallback to void function to avoid promisify throwing a TypeError.\nconst readFile = (0, util_1.promisify)((_a = fs.readFile) !== null && _a !== void 0 ? _a : (() => { }));\nconst realpath = (0, util_1.promisify)((_b = fs.realpath) !== null && _b !== void 0 ? _b : (() => { }));\nconst lstat = (0, util_1.promisify)((_c = fs.lstat) !== null && _c !== void 0 ? _c : (() => { }));\n/**\n * Internal subject token supplier implementation used when a file location\n * is configured in the credential configuration used to build an {@link IdentityPoolClient}\n */\nclass FileSubjectTokenSupplier {\n    /**\n     * Instantiates a new file based subject token supplier.\n     * @param opts The file subject token supplier options to build the supplier\n     *   with.\n     */\n    constructor(opts) {\n        this.filePath = opts.filePath;\n        this.formatType = opts.formatType;\n        this.subjectTokenFieldName = opts.subjectTokenFieldName;\n    }\n    /**\n     * Returns the subject token stored at the file specified in the constructor.\n     * @param context {@link ExternalAccountSupplierContext} from the calling\n     *   {@link IdentityPoolClient}, contains the requested audience and subject\n     *   token type for the external account identity. Not used.\n     */\n    async getSubjectToken(context) {\n        // Make sure there is a file at the path. lstatSync will throw if there is\n        // nothing there.\n        let parsedFilePath = this.filePath;\n        try {\n            // Resolve path to actual file in case of symlink. Expect a thrown error\n            // if not resolvable.\n            parsedFilePath = await realpath(parsedFilePath);\n            if (!(await lstat(parsedFilePath)).isFile()) {\n                throw new Error();\n            }\n        }\n        catch (err) {\n            if (err instanceof Error) {\n                err.message = `The file at ${parsedFilePath} does not exist, or it is not a file. ${err.message}`;\n            }\n            throw err;\n        }\n        let subjectToken;\n        const rawText = await readFile(parsedFilePath, { encoding: 'utf8' });\n        if (this.formatType === 'text') {\n            subjectToken = rawText;\n        }\n        else if (this.formatType === 'json' && this.subjectTokenFieldName) {\n            const json = JSON.parse(rawText);\n            subjectToken = json[this.subjectTokenFieldName];\n        }\n        if (!subjectToken) {\n            throw new Error('Unable to parse the subject_token from the credential_source file');\n        }\n        return subjectToken;\n    }\n}\nexports.FileSubjectTokenSupplier = FileSubjectTokenSupplier;\n","\"use strict\";\n// Copyright 2024 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UrlSubjectTokenSupplier = void 0;\n/**\n * Internal subject token supplier implementation used when a URL\n * is configured in the credential configuration used to build an {@link IdentityPoolClient}\n */\nclass UrlSubjectTokenSupplier {\n    /**\n     * Instantiates a URL subject token supplier.\n     * @param opts The URL subject token supplier options to build the supplier with.\n     */\n    constructor(opts) {\n        this.url = opts.url;\n        this.formatType = opts.formatType;\n        this.subjectTokenFieldName = opts.subjectTokenFieldName;\n        this.headers = opts.headers;\n        this.additionalGaxiosOptions = opts.additionalGaxiosOptions;\n    }\n    /**\n     * Sends a GET request to the URL provided in the constructor and resolves\n     * with the returned external subject token.\n     * @param context {@link ExternalAccountSupplierContext} from the calling\n     *   {@link IdentityPoolClient}, contains the requested audience and subject\n     *   token type for the external account identity. Not used.\n     */\n    async getSubjectToken(context) {\n        const opts = {\n            ...this.additionalGaxiosOptions,\n            url: this.url,\n            method: 'GET',\n            headers: this.headers,\n            responseType: this.formatType,\n        };\n        let subjectToken;\n        if (this.formatType === 'text') {\n            const response = await context.transporter.request(opts);\n            subjectToken = response.data;\n        }\n        else if (this.formatType === 'json' && this.subjectTokenFieldName) {\n            const response = await context.transporter.request(opts);\n            subjectToken = response.data[this.subjectTokenFieldName];\n        }\n        if (!subjectToken) {\n            throw new Error('Unable to parse the subject_token from the credential_source URL');\n        }\n        return subjectToken;\n    }\n}\nexports.UrlSubjectTokenSupplier = UrlSubjectTokenSupplier;\n","\"use strict\";\n// Copyright 2021 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.IdentityPoolClient = void 0;\nconst baseexternalclient_1 = require(\"./baseexternalclient\");\nconst util_1 = require(\"../util\");\nconst filesubjecttokensupplier_1 = require(\"./filesubjecttokensupplier\");\nconst urlsubjecttokensupplier_1 = require(\"./urlsubjecttokensupplier\");\n/**\n * Defines the Url-sourced and file-sourced external account clients mainly\n * used for K8s and Azure workloads.\n */\nclass IdentityPoolClient extends baseexternalclient_1.BaseExternalAccountClient {\n    /**\n     * Instantiate an IdentityPoolClient instance using the provided JSON\n     * object loaded from an external account credentials file.\n     * An error is thrown if the credential is not a valid file-sourced or\n     * url-sourced credential or a workforce pool user project is provided\n     * with a non workforce audience.\n     * @param options The external account options object typically loaded\n     *   from the external account JSON credential file. The camelCased options\n     *   are aliases for the snake_cased options.\n     * @param additionalOptions **DEPRECATED, all options are available in the\n     *   `options` parameter.** Optional additional behavior customization options.\n     *   These currently customize expiration threshold time and whether to retry\n     *   on 401/403 API request errors.\n     */\n    constructor(options, additionalOptions) {\n        super(options, additionalOptions);\n        const opts = (0, util_1.originalOrCamelOptions)(options);\n        const credentialSource = opts.get('credential_source');\n        const subjectTokenSupplier = opts.get('subject_token_supplier');\n        // Validate credential sourcing configuration.\n        if (!credentialSource && !subjectTokenSupplier) {\n            throw new Error('A credential source or subject token supplier must be specified.');\n        }\n        if (credentialSource && subjectTokenSupplier) {\n            throw new Error('Only one of credential source or subject token supplier can be specified.');\n        }\n        if (subjectTokenSupplier) {\n            this.subjectTokenSupplier = subjectTokenSupplier;\n            this.credentialSourceType = 'programmatic';\n        }\n        else {\n            const credentialSourceOpts = (0, util_1.originalOrCamelOptions)(credentialSource);\n            const formatOpts = (0, util_1.originalOrCamelOptions)(credentialSourceOpts.get('format'));\n            // Text is the default format type.\n            const formatType = formatOpts.get('type') || 'text';\n            const formatSubjectTokenFieldName = formatOpts.get('subject_token_field_name');\n            if (formatType !== 'json' && formatType !== 'text') {\n                throw new Error(`Invalid credential_source format \"${formatType}\"`);\n            }\n            if (formatType === 'json' && !formatSubjectTokenFieldName) {\n                throw new Error('Missing subject_token_field_name for JSON credential_source format');\n            }\n            const file = credentialSourceOpts.get('file');\n            const url = credentialSourceOpts.get('url');\n            const headers = credentialSourceOpts.get('headers');\n            if (file && url) {\n                throw new Error('No valid Identity Pool \"credential_source\" provided, must be either file or url.');\n            }\n            else if (file && !url) {\n                this.credentialSourceType = 'file';\n                this.subjectTokenSupplier = new filesubjecttokensupplier_1.FileSubjectTokenSupplier({\n                    filePath: file,\n                    formatType: formatType,\n                    subjectTokenFieldName: formatSubjectTokenFieldName,\n                });\n            }\n            else if (!file && url) {\n                this.credentialSourceType = 'url';\n                this.subjectTokenSupplier = new urlsubjecttokensupplier_1.UrlSubjectTokenSupplier({\n                    url: url,\n                    formatType: formatType,\n                    subjectTokenFieldName: formatSubjectTokenFieldName,\n                    headers: headers,\n                    additionalGaxiosOptions: IdentityPoolClient.RETRY_CONFIG,\n                });\n            }\n            else {\n                throw new Error('No valid Identity Pool \"credential_source\" provided, must be either file or url.');\n            }\n        }\n    }\n    /**\n     * Triggered when a external subject token is needed to be exchanged for a GCP\n     * access token via GCP STS endpoint. Gets a subject token by calling\n     * the configured {@link SubjectTokenSupplier}\n     * @return A promise that resolves with the external subject token.\n     */\n    async retrieveSubjectToken() {\n        return this.subjectTokenSupplier.getSubjectToken(this.supplierContext);\n    }\n}\nexports.IdentityPoolClient = IdentityPoolClient;\n","\"use strict\";\n// Copyright 2021 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AwsRequestSigner = void 0;\nconst crypto_1 = require(\"../crypto/crypto\");\n/** AWS Signature Version 4 signing algorithm identifier.  */\nconst AWS_ALGORITHM = 'AWS4-HMAC-SHA256';\n/**\n * The termination string for the AWS credential scope value as defined in\n * https://docs.aws.amazon.com/general/latest/gr/sigv4-create-string-to-sign.html\n */\nconst AWS_REQUEST_TYPE = 'aws4_request';\n/**\n * Implements an AWS API request signer based on the AWS Signature Version 4\n * signing process.\n * https://docs.aws.amazon.com/general/latest/gr/signature-version-4.html\n */\nclass AwsRequestSigner {\n    /**\n     * Instantiates an AWS API request signer used to send authenticated signed\n     * requests to AWS APIs based on the AWS Signature Version 4 signing process.\n     * This also provides a mechanism to generate the signed request without\n     * sending it.\n     * @param getCredentials A mechanism to retrieve AWS security credentials\n     *   when needed.\n     * @param region The AWS region to use.\n     */\n    constructor(getCredentials, region) {\n        this.getCredentials = getCredentials;\n        this.region = region;\n        this.crypto = (0, crypto_1.createCrypto)();\n    }\n    /**\n     * Generates the signed request for the provided HTTP request for calling\n     * an AWS API. This follows the steps described at:\n     * https://docs.aws.amazon.com/general/latest/gr/sigv4_signing.html\n     * @param amzOptions The AWS request options that need to be signed.\n     * @return A promise that resolves with the GaxiosOptions containing the\n     *   signed HTTP request parameters.\n     */\n    async getRequestOptions(amzOptions) {\n        if (!amzOptions.url) {\n            throw new Error('\"url\" is required in \"amzOptions\"');\n        }\n        // Stringify JSON requests. This will be set in the request body of the\n        // generated signed request.\n        const requestPayloadData = typeof amzOptions.data === 'object'\n            ? JSON.stringify(amzOptions.data)\n            : amzOptions.data;\n        const url = amzOptions.url;\n        const method = amzOptions.method || 'GET';\n        const requestPayload = amzOptions.body || requestPayloadData;\n        const additionalAmzHeaders = amzOptions.headers;\n        const awsSecurityCredentials = await this.getCredentials();\n        const uri = new URL(url);\n        const headerMap = await generateAuthenticationHeaderMap({\n            crypto: this.crypto,\n            host: uri.host,\n            canonicalUri: uri.pathname,\n            canonicalQuerystring: uri.search.substr(1),\n            method,\n            region: this.region,\n            securityCredentials: awsSecurityCredentials,\n            requestPayload,\n            additionalAmzHeaders,\n        });\n        // Append additional optional headers, eg. X-Amz-Target, Content-Type, etc.\n        const headers = Object.assign(\n        // Add x-amz-date if available.\n        headerMap.amzDate ? { 'x-amz-date': headerMap.amzDate } : {}, {\n            Authorization: headerMap.authorizationHeader,\n            host: uri.host,\n        }, additionalAmzHeaders || {});\n        if (awsSecurityCredentials.token) {\n            Object.assign(headers, {\n                'x-amz-security-token': awsSecurityCredentials.token,\n            });\n        }\n        const awsSignedReq = {\n            url,\n            method: method,\n            headers,\n        };\n        if (typeof requestPayload !== 'undefined') {\n            awsSignedReq.body = requestPayload;\n        }\n        return awsSignedReq;\n    }\n}\nexports.AwsRequestSigner = AwsRequestSigner;\n/**\n * Creates the HMAC-SHA256 hash of the provided message using the\n * provided key.\n *\n * @param crypto The crypto instance used to facilitate cryptographic\n *   operations.\n * @param key The HMAC-SHA256 key to use.\n * @param msg The message to hash.\n * @return The computed hash bytes.\n */\nasync function sign(crypto, key, msg) {\n    return await crypto.signWithHmacSha256(key, msg);\n}\n/**\n * Calculates the signing key used to calculate the signature for\n * AWS Signature Version 4 based on:\n * https://docs.aws.amazon.com/general/latest/gr/sigv4-calculate-signature.html\n *\n * @param crypto The crypto instance used to facilitate cryptographic\n *   operations.\n * @param key The AWS secret access key.\n * @param dateStamp The '%Y%m%d' date format.\n * @param region The AWS region.\n * @param serviceName The AWS service name, eg. sts.\n * @return The signing key bytes.\n */\nasync function getSigningKey(crypto, key, dateStamp, region, serviceName) {\n    const kDate = await sign(crypto, `AWS4${key}`, dateStamp);\n    const kRegion = await sign(crypto, kDate, region);\n    const kService = await sign(crypto, kRegion, serviceName);\n    const kSigning = await sign(crypto, kService, 'aws4_request');\n    return kSigning;\n}\n/**\n * Generates the authentication header map needed for generating the AWS\n * Signature Version 4 signed request.\n *\n * @param option The options needed to compute the authentication header map.\n * @return The AWS authentication header map which constitutes of the following\n *   components: amz-date, authorization header and canonical query string.\n */\nasync function generateAuthenticationHeaderMap(options) {\n    const additionalAmzHeaders = options.additionalAmzHeaders || {};\n    const requestPayload = options.requestPayload || '';\n    // iam.amazonaws.com host => iam service.\n    // sts.us-east-2.amazonaws.com => sts service.\n    const serviceName = options.host.split('.')[0];\n    const now = new Date();\n    // Format: '%Y%m%dT%H%M%SZ'.\n    const amzDate = now\n        .toISOString()\n        .replace(/[-:]/g, '')\n        .replace(/\\.[0-9]+/, '');\n    // Format: '%Y%m%d'.\n    const dateStamp = now.toISOString().replace(/[-]/g, '').replace(/T.*/, '');\n    // Change all additional headers to be lower case.\n    const reformattedAdditionalAmzHeaders = {};\n    Object.keys(additionalAmzHeaders).forEach(key => {\n        reformattedAdditionalAmzHeaders[key.toLowerCase()] =\n            additionalAmzHeaders[key];\n    });\n    // Add AWS token if available.\n    if (options.securityCredentials.token) {\n        reformattedAdditionalAmzHeaders['x-amz-security-token'] =\n            options.securityCredentials.token;\n    }\n    // Header keys need to be sorted alphabetically.\n    const amzHeaders = Object.assign({\n        host: options.host,\n    }, \n    // Previously the date was not fixed with x-amz- and could be provided manually.\n    // https://github.com/boto/botocore/blob/879f8440a4e9ace5d3cf145ce8b3d5e5ffb892ef/tests/unit/auth/aws4_testsuite/get-header-value-trim.req\n    reformattedAdditionalAmzHeaders.date ? {} : { 'x-amz-date': amzDate }, reformattedAdditionalAmzHeaders);\n    let canonicalHeaders = '';\n    const signedHeadersList = Object.keys(amzHeaders).sort();\n    signedHeadersList.forEach(key => {\n        canonicalHeaders += `${key}:${amzHeaders[key]}\\n`;\n    });\n    const signedHeaders = signedHeadersList.join(';');\n    const payloadHash = await options.crypto.sha256DigestHex(requestPayload);\n    // https://docs.aws.amazon.com/general/latest/gr/sigv4-create-canonical-request.html\n    const canonicalRequest = `${options.method}\\n` +\n        `${options.canonicalUri}\\n` +\n        `${options.canonicalQuerystring}\\n` +\n        `${canonicalHeaders}\\n` +\n        `${signedHeaders}\\n` +\n        `${payloadHash}`;\n    const credentialScope = `${dateStamp}/${options.region}/${serviceName}/${AWS_REQUEST_TYPE}`;\n    // https://docs.aws.amazon.com/general/latest/gr/sigv4-create-string-to-sign.html\n    const stringToSign = `${AWS_ALGORITHM}\\n` +\n        `${amzDate}\\n` +\n        `${credentialScope}\\n` +\n        (await options.crypto.sha256DigestHex(canonicalRequest));\n    // https://docs.aws.amazon.com/general/latest/gr/sigv4-calculate-signature.html\n    const signingKey = await getSigningKey(options.crypto, options.securityCredentials.secretAccessKey, dateStamp, options.region, serviceName);\n    const signature = await sign(options.crypto, signingKey, stringToSign);\n    // https://docs.aws.amazon.com/general/latest/gr/sigv4-add-signature-to-request.html\n    const authorizationHeader = `${AWS_ALGORITHM} Credential=${options.securityCredentials.accessKeyId}/` +\n        `${credentialScope}, SignedHeaders=${signedHeaders}, ` +\n        `Signature=${(0, crypto_1.fromArrayBufferToHex)(signature)}`;\n    return {\n        // Do not return x-amz-date if date is available.\n        amzDate: reformattedAdditionalAmzHeaders.date ? undefined : amzDate,\n        authorizationHeader,\n        canonicalQuerystring: options.canonicalQuerystring,\n    };\n}\n","\"use strict\";\n// Copyright 2024 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _DefaultAwsSecurityCredentialsSupplier_instances, _DefaultAwsSecurityCredentialsSupplier_getImdsV2SessionToken, _DefaultAwsSecurityCredentialsSupplier_getAwsRoleName, _DefaultAwsSecurityCredentialsSupplier_retrieveAwsSecurityCredentials, _DefaultAwsSecurityCredentialsSupplier_regionFromEnv_get, _DefaultAwsSecurityCredentialsSupplier_securityCredentialsFromEnv_get;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DefaultAwsSecurityCredentialsSupplier = void 0;\n/**\n * Internal AWS security credentials supplier implementation used by {@link AwsClient}\n * when a credential source is provided instead of a user defined supplier.\n * The logic is summarized as:\n * 1. If imdsv2_session_token_url is provided in the credential source, then\n *    fetch the aws session token and include it in the headers of the\n *    metadata requests. This is a requirement for IDMSv2 but optional\n *    for IDMSv1.\n * 2. Retrieve AWS region from availability-zone.\n * 3a. Check AWS credentials in environment variables. If not found, get\n *     from security-credentials endpoint.\n * 3b. Get AWS credentials from security-credentials endpoint. In order\n *     to retrieve this, the AWS role needs to be determined by calling\n *     security-credentials endpoint without any argument. Then the\n *     credentials can be retrieved via: security-credentials/role_name\n * 4. Generate the signed request to AWS STS GetCallerIdentity action.\n * 5. Inject x-goog-cloud-target-resource into header and serialize the\n *    signed request. This will be the subject-token to pass to GCP STS.\n */\nclass DefaultAwsSecurityCredentialsSupplier {\n    /**\n     * Instantiates a new DefaultAwsSecurityCredentialsSupplier using information\n     * from the credential_source stored in the ADC file.\n     * @param opts The default aws security credentials supplier options object to\n     *   build the supplier with.\n     */\n    constructor(opts) {\n        _DefaultAwsSecurityCredentialsSupplier_instances.add(this);\n        this.regionUrl = opts.regionUrl;\n        this.securityCredentialsUrl = opts.securityCredentialsUrl;\n        this.imdsV2SessionTokenUrl = opts.imdsV2SessionTokenUrl;\n        this.additionalGaxiosOptions = opts.additionalGaxiosOptions;\n    }\n    /**\n     * Returns the active AWS region. This first checks to see if the region\n     * is available as an environment variable. If it is not, then the supplier\n     * will call the region URL.\n     * @param context {@link ExternalAccountSupplierContext} from the calling\n     *   {@link AwsClient}, contains the requested audience and subject token type\n     *   for the external account identity.\n     * @return A promise that resolves with the AWS region string.\n     */\n    async getAwsRegion(context) {\n        // Priority order for region determination:\n        // AWS_REGION > AWS_DEFAULT_REGION > metadata server.\n        if (__classPrivateFieldGet(this, _DefaultAwsSecurityCredentialsSupplier_instances, \"a\", _DefaultAwsSecurityCredentialsSupplier_regionFromEnv_get)) {\n            return __classPrivateFieldGet(this, _DefaultAwsSecurityCredentialsSupplier_instances, \"a\", _DefaultAwsSecurityCredentialsSupplier_regionFromEnv_get);\n        }\n        const metadataHeaders = {};\n        if (!__classPrivateFieldGet(this, _DefaultAwsSecurityCredentialsSupplier_instances, \"a\", _DefaultAwsSecurityCredentialsSupplier_regionFromEnv_get) && this.imdsV2SessionTokenUrl) {\n            metadataHeaders['x-aws-ec2-metadata-token'] =\n                await __classPrivateFieldGet(this, _DefaultAwsSecurityCredentialsSupplier_instances, \"m\", _DefaultAwsSecurityCredentialsSupplier_getImdsV2SessionToken).call(this, context.transporter);\n        }\n        if (!this.regionUrl) {\n            throw new Error('Unable to determine AWS region due to missing ' +\n                '\"options.credential_source.region_url\"');\n        }\n        const opts = {\n            ...this.additionalGaxiosOptions,\n            url: this.regionUrl,\n            method: 'GET',\n            responseType: 'text',\n            headers: metadataHeaders,\n        };\n        const response = await context.transporter.request(opts);\n        // Remove last character. For example, if us-east-2b is returned,\n        // the region would be us-east-2.\n        return response.data.substr(0, response.data.length - 1);\n    }\n    /**\n     * Returns AWS security credentials. This first checks to see if the credentials\n     * is available as environment variables. If it is not, then the supplier\n     * will call the security credentials URL.\n     * @param context {@link ExternalAccountSupplierContext} from the calling\n     *   {@link AwsClient}, contains the requested audience and subject token type\n     *   for the external account identity.\n     * @return A promise that resolves with the AWS security credentials.\n     */\n    async getAwsSecurityCredentials(context) {\n        // Check environment variables for permanent credentials first.\n        // https://docs.aws.amazon.com/general/latest/gr/aws-sec-cred-types.html\n        if (__classPrivateFieldGet(this, _DefaultAwsSecurityCredentialsSupplier_instances, \"a\", _DefaultAwsSecurityCredentialsSupplier_securityCredentialsFromEnv_get)) {\n            return __classPrivateFieldGet(this, _DefaultAwsSecurityCredentialsSupplier_instances, \"a\", _DefaultAwsSecurityCredentialsSupplier_securityCredentialsFromEnv_get);\n        }\n        const metadataHeaders = {};\n        if (this.imdsV2SessionTokenUrl) {\n            metadataHeaders['x-aws-ec2-metadata-token'] =\n                await __classPrivateFieldGet(this, _DefaultAwsSecurityCredentialsSupplier_instances, \"m\", _DefaultAwsSecurityCredentialsSupplier_getImdsV2SessionToken).call(this, context.transporter);\n        }\n        // Since the role on a VM can change, we don't need to cache it.\n        const roleName = await __classPrivateFieldGet(this, _DefaultAwsSecurityCredentialsSupplier_instances, \"m\", _DefaultAwsSecurityCredentialsSupplier_getAwsRoleName).call(this, metadataHeaders, context.transporter);\n        // Temporary credentials typically last for several hours.\n        // Expiration is returned in response.\n        // Consider future optimization of this logic to cache AWS tokens\n        // until their natural expiration.\n        const awsCreds = await __classPrivateFieldGet(this, _DefaultAwsSecurityCredentialsSupplier_instances, \"m\", _DefaultAwsSecurityCredentialsSupplier_retrieveAwsSecurityCredentials).call(this, roleName, metadataHeaders, context.transporter);\n        return {\n            accessKeyId: awsCreds.AccessKeyId,\n            secretAccessKey: awsCreds.SecretAccessKey,\n            token: awsCreds.Token,\n        };\n    }\n}\nexports.DefaultAwsSecurityCredentialsSupplier = DefaultAwsSecurityCredentialsSupplier;\n_DefaultAwsSecurityCredentialsSupplier_instances = new WeakSet(), _DefaultAwsSecurityCredentialsSupplier_getImdsV2SessionToken = \n/**\n * @param transporter The transporter to use for requests.\n * @return A promise that resolves with the IMDSv2 Session Token.\n */\nasync function _DefaultAwsSecurityCredentialsSupplier_getImdsV2SessionToken(transporter) {\n    const opts = {\n        ...this.additionalGaxiosOptions,\n        url: this.imdsV2SessionTokenUrl,\n        method: 'PUT',\n        responseType: 'text',\n        headers: { 'x-aws-ec2-metadata-token-ttl-seconds': '300' },\n    };\n    const response = await transporter.request(opts);\n    return response.data;\n}, _DefaultAwsSecurityCredentialsSupplier_getAwsRoleName = \n/**\n * @param headers The headers to be used in the metadata request.\n * @param transporter The transporter to use for requests.\n * @return A promise that resolves with the assigned role to the current\n *   AWS VM. This is needed for calling the security-credentials endpoint.\n */\nasync function _DefaultAwsSecurityCredentialsSupplier_getAwsRoleName(headers, transporter) {\n    if (!this.securityCredentialsUrl) {\n        throw new Error('Unable to determine AWS role name due to missing ' +\n            '\"options.credential_source.url\"');\n    }\n    const opts = {\n        ...this.additionalGaxiosOptions,\n        url: this.securityCredentialsUrl,\n        method: 'GET',\n        responseType: 'text',\n        headers: headers,\n    };\n    const response = await transporter.request(opts);\n    return response.data;\n}, _DefaultAwsSecurityCredentialsSupplier_retrieveAwsSecurityCredentials = \n/**\n * Retrieves the temporary AWS credentials by calling the security-credentials\n * endpoint as specified in the `credential_source` object.\n * @param roleName The role attached to the current VM.\n * @param headers The headers to be used in the metadata request.\n * @param transporter The transporter to use for requests.\n * @return A promise that resolves with the temporary AWS credentials\n *   needed for creating the GetCallerIdentity signed request.\n */\nasync function _DefaultAwsSecurityCredentialsSupplier_retrieveAwsSecurityCredentials(roleName, headers, transporter) {\n    const response = await transporter.request({\n        ...this.additionalGaxiosOptions,\n        url: `${this.securityCredentialsUrl}/${roleName}`,\n        responseType: 'json',\n        headers: headers,\n    });\n    return response.data;\n}, _DefaultAwsSecurityCredentialsSupplier_regionFromEnv_get = function _DefaultAwsSecurityCredentialsSupplier_regionFromEnv_get() {\n    // The AWS region can be provided through AWS_REGION or AWS_DEFAULT_REGION.\n    // Only one is required.\n    return (process.env['AWS_REGION'] || process.env['AWS_DEFAULT_REGION'] || null);\n}, _DefaultAwsSecurityCredentialsSupplier_securityCredentialsFromEnv_get = function _DefaultAwsSecurityCredentialsSupplier_securityCredentialsFromEnv_get() {\n    // Both AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY are required.\n    if (process.env['AWS_ACCESS_KEY_ID'] &&\n        process.env['AWS_SECRET_ACCESS_KEY']) {\n        return {\n            accessKeyId: process.env['AWS_ACCESS_KEY_ID'],\n            secretAccessKey: process.env['AWS_SECRET_ACCESS_KEY'],\n            token: process.env['AWS_SESSION_TOKEN'],\n        };\n    }\n    return null;\n};\n","\"use strict\";\n// Copyright 2021 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _a, _AwsClient_DEFAULT_AWS_REGIONAL_CREDENTIAL_VERIFICATION_URL;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AwsClient = void 0;\nconst awsrequestsigner_1 = require(\"./awsrequestsigner\");\nconst baseexternalclient_1 = require(\"./baseexternalclient\");\nconst defaultawssecuritycredentialssupplier_1 = require(\"./defaultawssecuritycredentialssupplier\");\nconst util_1 = require(\"../util\");\n/**\n * AWS external account client. This is used for AWS workloads, where\n * AWS STS GetCallerIdentity serialized signed requests are exchanged for\n * GCP access token.\n */\nclass AwsClient extends baseexternalclient_1.BaseExternalAccountClient {\n    /**\n     * Instantiates an AwsClient instance using the provided JSON\n     * object loaded from an external account credentials file.\n     * An error is thrown if the credential is not a valid AWS credential.\n     * @param options The external account options object typically loaded\n     *   from the external account JSON credential file.\n     * @param additionalOptions **DEPRECATED, all options are available in the\n     *   `options` parameter.** Optional additional behavior customization options.\n     *   These currently customize expiration threshold time and whether to retry\n     *   on 401/403 API request errors.\n     */\n    constructor(options, additionalOptions) {\n        super(options, additionalOptions);\n        const opts = (0, util_1.originalOrCamelOptions)(options);\n        const credentialSource = opts.get('credential_source');\n        const awsSecurityCredentialsSupplier = opts.get('aws_security_credentials_supplier');\n        // Validate credential sourcing configuration.\n        if (!credentialSource && !awsSecurityCredentialsSupplier) {\n            throw new Error('A credential source or AWS security credentials supplier must be specified.');\n        }\n        if (credentialSource && awsSecurityCredentialsSupplier) {\n            throw new Error('Only one of credential source or AWS security credentials supplier can be specified.');\n        }\n        if (awsSecurityCredentialsSupplier) {\n            this.awsSecurityCredentialsSupplier = awsSecurityCredentialsSupplier;\n            this.regionalCredVerificationUrl =\n                __classPrivateFieldGet(_a, _a, \"f\", _AwsClient_DEFAULT_AWS_REGIONAL_CREDENTIAL_VERIFICATION_URL);\n            this.credentialSourceType = 'programmatic';\n        }\n        else {\n            const credentialSourceOpts = (0, util_1.originalOrCamelOptions)(credentialSource);\n            this.environmentId = credentialSourceOpts.get('environment_id');\n            // This is only required if the AWS region is not available in the\n            // AWS_REGION or AWS_DEFAULT_REGION environment variables.\n            const regionUrl = credentialSourceOpts.get('region_url');\n            // This is only required if AWS security credentials are not available in\n            // environment variables.\n            const securityCredentialsUrl = credentialSourceOpts.get('url');\n            const imdsV2SessionTokenUrl = credentialSourceOpts.get('imdsv2_session_token_url');\n            this.awsSecurityCredentialsSupplier =\n                new defaultawssecuritycredentialssupplier_1.DefaultAwsSecurityCredentialsSupplier({\n                    regionUrl: regionUrl,\n                    securityCredentialsUrl: securityCredentialsUrl,\n                    imdsV2SessionTokenUrl: imdsV2SessionTokenUrl,\n                });\n            this.regionalCredVerificationUrl = credentialSourceOpts.get('regional_cred_verification_url');\n            this.credentialSourceType = 'aws';\n            // Data validators.\n            this.validateEnvironmentId();\n        }\n        this.awsRequestSigner = null;\n        this.region = '';\n    }\n    validateEnvironmentId() {\n        var _b;\n        const match = (_b = this.environmentId) === null || _b === void 0 ? void 0 : _b.match(/^(aws)(\\d+)$/);\n        if (!match || !this.regionalCredVerificationUrl) {\n            throw new Error('No valid AWS \"credential_source\" provided');\n        }\n        else if (parseInt(match[2], 10) !== 1) {\n            throw new Error(`aws version \"${match[2]}\" is not supported in the current build.`);\n        }\n    }\n    /**\n     * Triggered when an external subject token is needed to be exchanged for a\n     * GCP access token via GCP STS endpoint. This will call the\n     * {@link AwsSecurityCredentialsSupplier} to retrieve an AWS region and AWS\n     * Security Credentials, then use them to create a signed AWS STS request that\n     * can be exchanged for a GCP access token.\n     * @return A promise that resolves with the external subject token.\n     */\n    async retrieveSubjectToken() {\n        // Initialize AWS request signer if not already initialized.\n        if (!this.awsRequestSigner) {\n            this.region = await this.awsSecurityCredentialsSupplier.getAwsRegion(this.supplierContext);\n            this.awsRequestSigner = new awsrequestsigner_1.AwsRequestSigner(async () => {\n                return this.awsSecurityCredentialsSupplier.getAwsSecurityCredentials(this.supplierContext);\n            }, this.region);\n        }\n        // Generate signed request to AWS STS GetCallerIdentity API.\n        // Use the required regional endpoint. Otherwise, the request will fail.\n        const options = await this.awsRequestSigner.getRequestOptions({\n            ..._a.RETRY_CONFIG,\n            url: this.regionalCredVerificationUrl.replace('{region}', this.region),\n            method: 'POST',\n        });\n        // The GCP STS endpoint expects the headers to be formatted as:\n        // [\n        //   {key: 'x-amz-date', value: '...'},\n        //   {key: 'Authorization', value: '...'},\n        //   ...\n        // ]\n        // And then serialized as:\n        // encodeURIComponent(JSON.stringify({\n        //   url: '...',\n        //   method: 'POST',\n        //   headers: [{key: 'x-amz-date', value: '...'}, ...]\n        // }))\n        const reformattedHeader = [];\n        const extendedHeaders = Object.assign({\n            // The full, canonical resource name of the workload identity pool\n            // provider, with or without the HTTPS prefix.\n            // Including this header as part of the signature is recommended to\n            // ensure data integrity.\n            'x-goog-cloud-target-resource': this.audience,\n        }, options.headers);\n        // Reformat header to GCP STS expected format.\n        for (const key in extendedHeaders) {\n            reformattedHeader.push({\n                key,\n                value: extendedHeaders[key],\n            });\n        }\n        // Serialize the reformatted signed request.\n        return encodeURIComponent(JSON.stringify({\n            url: options.url,\n            method: options.method,\n            headers: reformattedHeader,\n        }));\n    }\n}\nexports.AwsClient = AwsClient;\n_a = AwsClient;\n_AwsClient_DEFAULT_AWS_REGIONAL_CREDENTIAL_VERIFICATION_URL = { value: 'https://sts.{region}.amazonaws.com?Action=GetCallerIdentity&Version=2011-06-15' };\n/**\n * @deprecated AWS client no validates the EC2 metadata address.\n **/\nAwsClient.AWS_EC2_METADATA_IPV4_ADDRESS = '169.254.169.254';\n/**\n * @deprecated AWS client no validates the EC2 metadata address.\n **/\nAwsClient.AWS_EC2_METADATA_IPV6_ADDRESS = 'fd00:ec2::254';\n","\"use strict\";\n// Copyright 2022 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InvalidSubjectTokenError = exports.InvalidMessageFieldError = exports.InvalidCodeFieldError = exports.InvalidTokenTypeFieldError = exports.InvalidExpirationTimeFieldError = exports.InvalidSuccessFieldError = exports.InvalidVersionFieldError = exports.ExecutableResponseError = exports.ExecutableResponse = void 0;\nconst SAML_SUBJECT_TOKEN_TYPE = 'urn:ietf:params:oauth:token-type:saml2';\nconst OIDC_SUBJECT_TOKEN_TYPE1 = 'urn:ietf:params:oauth:token-type:id_token';\nconst OIDC_SUBJECT_TOKEN_TYPE2 = 'urn:ietf:params:oauth:token-type:jwt';\n/**\n * Defines the response of a 3rd party executable run by the pluggable auth client.\n */\nclass ExecutableResponse {\n    /**\n     * Instantiates an ExecutableResponse instance using the provided JSON object\n     * from the output of the executable.\n     * @param responseJson Response from a 3rd party executable, loaded from a\n     * run of the executable or a cached output file.\n     */\n    constructor(responseJson) {\n        // Check that the required fields exist in the json response.\n        if (!responseJson.version) {\n            throw new InvalidVersionFieldError(\"Executable response must contain a 'version' field.\");\n        }\n        if (responseJson.success === undefined) {\n            throw new InvalidSuccessFieldError(\"Executable response must contain a 'success' field.\");\n        }\n        this.version = responseJson.version;\n        this.success = responseJson.success;\n        // Validate required fields for a successful response.\n        if (this.success) {\n            this.expirationTime = responseJson.expiration_time;\n            this.tokenType = responseJson.token_type;\n            // Validate token type field.\n            if (this.tokenType !== SAML_SUBJECT_TOKEN_TYPE &&\n                this.tokenType !== OIDC_SUBJECT_TOKEN_TYPE1 &&\n                this.tokenType !== OIDC_SUBJECT_TOKEN_TYPE2) {\n                throw new InvalidTokenTypeFieldError(\"Executable response must contain a 'token_type' field when successful \" +\n                    `and it must be one of ${OIDC_SUBJECT_TOKEN_TYPE1}, ${OIDC_SUBJECT_TOKEN_TYPE2}, or ${SAML_SUBJECT_TOKEN_TYPE}.`);\n            }\n            // Validate subject token.\n            if (this.tokenType === SAML_SUBJECT_TOKEN_TYPE) {\n                if (!responseJson.saml_response) {\n                    throw new InvalidSubjectTokenError(`Executable response must contain a 'saml_response' field when token_type=${SAML_SUBJECT_TOKEN_TYPE}.`);\n                }\n                this.subjectToken = responseJson.saml_response;\n            }\n            else {\n                if (!responseJson.id_token) {\n                    throw new InvalidSubjectTokenError(\"Executable response must contain a 'id_token' field when \" +\n                        `token_type=${OIDC_SUBJECT_TOKEN_TYPE1} or ${OIDC_SUBJECT_TOKEN_TYPE2}.`);\n                }\n                this.subjectToken = responseJson.id_token;\n            }\n        }\n        else {\n            // Both code and message must be provided for unsuccessful responses.\n            if (!responseJson.code) {\n                throw new InvalidCodeFieldError(\"Executable response must contain a 'code' field when unsuccessful.\");\n            }\n            if (!responseJson.message) {\n                throw new InvalidMessageFieldError(\"Executable response must contain a 'message' field when unsuccessful.\");\n            }\n            this.errorCode = responseJson.code;\n            this.errorMessage = responseJson.message;\n        }\n    }\n    /**\n     * @return A boolean representing if the response has a valid token. Returns\n     * true when the response was successful and the token is not expired.\n     */\n    isValid() {\n        return !this.isExpired() && this.success;\n    }\n    /**\n     * @return A boolean representing if the response is expired. Returns true if the\n     * provided timeout has passed.\n     */\n    isExpired() {\n        return (this.expirationTime !== undefined &&\n            this.expirationTime < Math.round(Date.now() / 1000));\n    }\n}\nexports.ExecutableResponse = ExecutableResponse;\n/**\n * An error thrown by the ExecutableResponse class.\n */\nclass ExecutableResponseError extends Error {\n    constructor(message) {\n        super(message);\n        Object.setPrototypeOf(this, new.target.prototype);\n    }\n}\nexports.ExecutableResponseError = ExecutableResponseError;\n/**\n * An error thrown when the 'version' field in an executable response is missing or invalid.\n */\nclass InvalidVersionFieldError extends ExecutableResponseError {\n}\nexports.InvalidVersionFieldError = InvalidVersionFieldError;\n/**\n * An error thrown when the 'success' field in an executable response is missing or invalid.\n */\nclass InvalidSuccessFieldError extends ExecutableResponseError {\n}\nexports.InvalidSuccessFieldError = InvalidSuccessFieldError;\n/**\n * An error thrown when the 'expiration_time' field in an executable response is missing or invalid.\n */\nclass InvalidExpirationTimeFieldError extends ExecutableResponseError {\n}\nexports.InvalidExpirationTimeFieldError = InvalidExpirationTimeFieldError;\n/**\n * An error thrown when the 'token_type' field in an executable response is missing or invalid.\n */\nclass InvalidTokenTypeFieldError extends ExecutableResponseError {\n}\nexports.InvalidTokenTypeFieldError = InvalidTokenTypeFieldError;\n/**\n * An error thrown when the 'code' field in an executable response is missing or invalid.\n */\nclass InvalidCodeFieldError extends ExecutableResponseError {\n}\nexports.InvalidCodeFieldError = InvalidCodeFieldError;\n/**\n * An error thrown when the 'message' field in an executable response is missing or invalid.\n */\nclass InvalidMessageFieldError extends ExecutableResponseError {\n}\nexports.InvalidMessageFieldError = InvalidMessageFieldError;\n/**\n * An error thrown when the subject token in an executable response is missing or invalid.\n */\nclass InvalidSubjectTokenError extends ExecutableResponseError {\n}\nexports.InvalidSubjectTokenError = InvalidSubjectTokenError;\n","\"use strict\";\n// Copyright 2022 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PluggableAuthHandler = void 0;\nconst pluggable_auth_client_1 = require(\"./pluggable-auth-client\");\nconst executable_response_1 = require(\"./executable-response\");\nconst childProcess = require(\"child_process\");\nconst fs = require(\"fs\");\n/**\n * A handler used to retrieve 3rd party token responses from user defined\n * executables and cached file output for the PluggableAuthClient class.\n */\nclass PluggableAuthHandler {\n    /**\n     * Instantiates a PluggableAuthHandler instance using the provided\n     * PluggableAuthHandlerOptions object.\n     */\n    constructor(options) {\n        if (!options.command) {\n            throw new Error('No command provided.');\n        }\n        this.commandComponents = PluggableAuthHandler.parseCommand(options.command);\n        this.timeoutMillis = options.timeoutMillis;\n        if (!this.timeoutMillis) {\n            throw new Error('No timeoutMillis provided.');\n        }\n        this.outputFile = options.outputFile;\n    }\n    /**\n     * Calls user provided executable to get a 3rd party subject token and\n     * returns the response.\n     * @param envMap a Map of additional Environment Variables required for\n     *   the executable.\n     * @return A promise that resolves with the executable response.\n     */\n    retrieveResponseFromExecutable(envMap) {\n        return new Promise((resolve, reject) => {\n            // Spawn process to run executable using added environment variables.\n            const child = childProcess.spawn(this.commandComponents[0], this.commandComponents.slice(1), {\n                env: { ...process.env, ...Object.fromEntries(envMap) },\n            });\n            let output = '';\n            // Append stdout to output as executable runs.\n            child.stdout.on('data', (data) => {\n                output += data;\n            });\n            // Append stderr as executable runs.\n            child.stderr.on('data', (err) => {\n                output += err;\n            });\n            // Set up a timeout to end the child process and throw an error.\n            const timeout = setTimeout(() => {\n                // Kill child process and remove listeners so 'close' event doesn't get\n                // read after child process is killed.\n                child.removeAllListeners();\n                child.kill();\n                return reject(new Error('The executable failed to finish within the timeout specified.'));\n            }, this.timeoutMillis);\n            child.on('close', (code) => {\n                // Cancel timeout if executable closes before timeout is reached.\n                clearTimeout(timeout);\n                if (code === 0) {\n                    // If the executable completed successfully, try to return the parsed response.\n                    try {\n                        const responseJson = JSON.parse(output);\n                        const response = new executable_response_1.ExecutableResponse(responseJson);\n                        return resolve(response);\n                    }\n                    catch (error) {\n                        if (error instanceof executable_response_1.ExecutableResponseError) {\n                            return reject(error);\n                        }\n                        return reject(new executable_response_1.ExecutableResponseError(`The executable returned an invalid response: ${output}`));\n                    }\n                }\n                else {\n                    return reject(new pluggable_auth_client_1.ExecutableError(output, code.toString()));\n                }\n            });\n        });\n    }\n    /**\n     * Checks user provided output file for response from previous run of\n     * executable and return the response if it exists, is formatted correctly, and is not expired.\n     */\n    async retrieveCachedResponse() {\n        if (!this.outputFile || this.outputFile.length === 0) {\n            return undefined;\n        }\n        let filePath;\n        try {\n            filePath = await fs.promises.realpath(this.outputFile);\n        }\n        catch (_a) {\n            // If file path cannot be resolved, return undefined.\n            return undefined;\n        }\n        if (!(await fs.promises.lstat(filePath)).isFile()) {\n            // If path does not lead to file, return undefined.\n            return undefined;\n        }\n        const responseString = await fs.promises.readFile(filePath, {\n            encoding: 'utf8',\n        });\n        if (responseString === '') {\n            return undefined;\n        }\n        try {\n            const responseJson = JSON.parse(responseString);\n            const response = new executable_response_1.ExecutableResponse(responseJson);\n            // Check if response is successful and unexpired.\n            if (response.isValid()) {\n                return new executable_response_1.ExecutableResponse(responseJson);\n            }\n            return undefined;\n        }\n        catch (error) {\n            if (error instanceof executable_response_1.ExecutableResponseError) {\n                throw error;\n            }\n            throw new executable_response_1.ExecutableResponseError(`The output file contained an invalid response: ${responseString}`);\n        }\n    }\n    /**\n     * Parses given command string into component array, splitting on spaces unless\n     * spaces are between quotation marks.\n     */\n    static parseCommand(command) {\n        // Split the command into components by splitting on spaces,\n        // unless spaces are contained in quotation marks.\n        const components = command.match(/(?:[^\\s\"]+|\"[^\"]*\")+/g);\n        if (!components) {\n            throw new Error(`Provided command: \"${command}\" could not be parsed.`);\n        }\n        // Remove quotation marks from the beginning and end of each component if they are present.\n        for (let i = 0; i < components.length; i++) {\n            if (components[i][0] === '\"' && components[i].slice(-1) === '\"') {\n                components[i] = components[i].slice(1, -1);\n            }\n        }\n        return components;\n    }\n}\nexports.PluggableAuthHandler = PluggableAuthHandler;\n","\"use strict\";\n// Copyright 2022 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PluggableAuthClient = exports.ExecutableError = void 0;\nconst baseexternalclient_1 = require(\"./baseexternalclient\");\nconst executable_response_1 = require(\"./executable-response\");\nconst pluggable_auth_handler_1 = require(\"./pluggable-auth-handler\");\n/**\n * Error thrown from the executable run by PluggableAuthClient.\n */\nclass ExecutableError extends Error {\n    constructor(message, code) {\n        super(`The executable failed with exit code: ${code} and error message: ${message}.`);\n        this.code = code;\n        Object.setPrototypeOf(this, new.target.prototype);\n    }\n}\nexports.ExecutableError = ExecutableError;\n/**\n * The default executable timeout when none is provided, in milliseconds.\n */\nconst DEFAULT_EXECUTABLE_TIMEOUT_MILLIS = 30 * 1000;\n/**\n * The minimum allowed executable timeout in milliseconds.\n */\nconst MINIMUM_EXECUTABLE_TIMEOUT_MILLIS = 5 * 1000;\n/**\n * The maximum allowed executable timeout in milliseconds.\n */\nconst MAXIMUM_EXECUTABLE_TIMEOUT_MILLIS = 120 * 1000;\n/**\n * The environment variable to check to see if executable can be run.\n * Value must be set to '1' for the executable to run.\n */\nconst GOOGLE_EXTERNAL_ACCOUNT_ALLOW_EXECUTABLES = 'GOOGLE_EXTERNAL_ACCOUNT_ALLOW_EXECUTABLES';\n/**\n * The maximum currently supported executable version.\n */\nconst MAXIMUM_EXECUTABLE_VERSION = 1;\n/**\n * PluggableAuthClient enables the exchange of workload identity pool external credentials for\n * Google access tokens by retrieving 3rd party tokens through a user supplied executable. These\n * scripts/executables are completely independent of the Google Cloud Auth libraries. These\n * credentials plug into ADC and will call the specified executable to retrieve the 3rd party token\n * to be exchanged for a Google access token.\n *\n * <p>To use these credentials, the GOOGLE_EXTERNAL_ACCOUNT_ALLOW_EXECUTABLES environment variable\n * must be set to '1'. This is for security reasons.\n *\n * <p>Both OIDC and SAML are supported. The executable must adhere to a specific response format\n * defined below.\n *\n * <p>The executable must print out the 3rd party token to STDOUT in JSON format. When an\n * output_file is specified in the credential configuration, the executable must also handle writing the\n * JSON response to this file.\n *\n * <pre>\n * OIDC response sample:\n * {\n *   \"version\": 1,\n *   \"success\": true,\n *   \"token_type\": \"urn:ietf:params:oauth:token-type:id_token\",\n *   \"id_token\": \"HEADER.PAYLOAD.SIGNATURE\",\n *   \"expiration_time\": 1620433341\n * }\n *\n * SAML2 response sample:\n * {\n *   \"version\": 1,\n *   \"success\": true,\n *   \"token_type\": \"urn:ietf:params:oauth:token-type:saml2\",\n *   \"saml_response\": \"...\",\n *   \"expiration_time\": 1620433341\n * }\n *\n * Error response sample:\n * {\n *   \"version\": 1,\n *   \"success\": false,\n *   \"code\": \"401\",\n *   \"message\": \"Error message.\"\n * }\n * </pre>\n *\n * <p>The \"expiration_time\" field in the JSON response is only required for successful\n * responses when an output file was specified in the credential configuration\n *\n * <p>The auth libraries will populate certain environment variables that will be accessible by the\n * executable, such as: GOOGLE_EXTERNAL_ACCOUNT_AUDIENCE, GOOGLE_EXTERNAL_ACCOUNT_TOKEN_TYPE,\n * GOOGLE_EXTERNAL_ACCOUNT_INTERACTIVE, GOOGLE_EXTERNAL_ACCOUNT_IMPERSONATED_EMAIL, and\n * GOOGLE_EXTERNAL_ACCOUNT_OUTPUT_FILE.\n *\n * <p>Please see this repositories README for a complete executable request/response specification.\n */\nclass PluggableAuthClient extends baseexternalclient_1.BaseExternalAccountClient {\n    /**\n     * Instantiates a PluggableAuthClient instance using the provided JSON\n     * object loaded from an external account credentials file.\n     * An error is thrown if the credential is not a valid pluggable auth credential.\n     * @param options The external account options object typically loaded from\n     *   the external account JSON credential file.\n     * @param additionalOptions **DEPRECATED, all options are available in the\n     *   `options` parameter.** Optional additional behavior customization options.\n     *   These currently customize expiration threshold time and whether to retry\n     *   on 401/403 API request errors.\n     */\n    constructor(options, additionalOptions) {\n        super(options, additionalOptions);\n        if (!options.credential_source.executable) {\n            throw new Error('No valid Pluggable Auth \"credential_source\" provided.');\n        }\n        this.command = options.credential_source.executable.command;\n        if (!this.command) {\n            throw new Error('No valid Pluggable Auth \"credential_source\" provided.');\n        }\n        // Check if the provided timeout exists and if it is valid.\n        if (options.credential_source.executable.timeout_millis === undefined) {\n            this.timeoutMillis = DEFAULT_EXECUTABLE_TIMEOUT_MILLIS;\n        }\n        else {\n            this.timeoutMillis = options.credential_source.executable.timeout_millis;\n            if (this.timeoutMillis < MINIMUM_EXECUTABLE_TIMEOUT_MILLIS ||\n                this.timeoutMillis > MAXIMUM_EXECUTABLE_TIMEOUT_MILLIS) {\n                throw new Error(`Timeout must be between ${MINIMUM_EXECUTABLE_TIMEOUT_MILLIS} and ` +\n                    `${MAXIMUM_EXECUTABLE_TIMEOUT_MILLIS} milliseconds.`);\n            }\n        }\n        this.outputFile = options.credential_source.executable.output_file;\n        this.handler = new pluggable_auth_handler_1.PluggableAuthHandler({\n            command: this.command,\n            timeoutMillis: this.timeoutMillis,\n            outputFile: this.outputFile,\n        });\n        this.credentialSourceType = 'executable';\n    }\n    /**\n     * Triggered when an external subject token is needed to be exchanged for a\n     * GCP access token via GCP STS endpoint.\n     * This uses the `options.credential_source` object to figure out how\n     * to retrieve the token using the current environment. In this case,\n     * this calls a user provided executable which returns the subject token.\n     * The logic is summarized as:\n     * 1. Validated that the executable is allowed to run. The\n     *    GOOGLE_EXTERNAL_ACCOUNT_ALLOW_EXECUTABLES environment must be set to\n     *    1 for security reasons.\n     * 2. If an output file is specified by the user, check the file location\n     *    for a response. If the file exists and contains a valid response,\n     *    return the subject token from the file.\n     * 3. Call the provided executable and return response.\n     * @return A promise that resolves with the external subject token.\n     */\n    async retrieveSubjectToken() {\n        // Check if the executable is allowed to run.\n        if (process.env[GOOGLE_EXTERNAL_ACCOUNT_ALLOW_EXECUTABLES] !== '1') {\n            throw new Error('Pluggable Auth executables need to be explicitly allowed to run by ' +\n                'setting the GOOGLE_EXTERNAL_ACCOUNT_ALLOW_EXECUTABLES environment ' +\n                'Variable to 1.');\n        }\n        let executableResponse = undefined;\n        // Try to get cached executable response from output file.\n        if (this.outputFile) {\n            executableResponse = await this.handler.retrieveCachedResponse();\n        }\n        // If no response from output file, call the executable.\n        if (!executableResponse) {\n            // Set up environment map with required values for the executable.\n            const envMap = new Map();\n            envMap.set('GOOGLE_EXTERNAL_ACCOUNT_AUDIENCE', this.audience);\n            envMap.set('GOOGLE_EXTERNAL_ACCOUNT_TOKEN_TYPE', this.subjectTokenType);\n            // Always set to 0 because interactive mode is not supported.\n            envMap.set('GOOGLE_EXTERNAL_ACCOUNT_INTERACTIVE', '0');\n            if (this.outputFile) {\n                envMap.set('GOOGLE_EXTERNAL_ACCOUNT_OUTPUT_FILE', this.outputFile);\n            }\n            const serviceAccountEmail = this.getServiceAccountEmail();\n            if (serviceAccountEmail) {\n                envMap.set('GOOGLE_EXTERNAL_ACCOUNT_IMPERSONATED_EMAIL', serviceAccountEmail);\n            }\n            executableResponse =\n                await this.handler.retrieveResponseFromExecutable(envMap);\n        }\n        if (executableResponse.version > MAXIMUM_EXECUTABLE_VERSION) {\n            throw new Error(`Version of executable is not currently supported, maximum supported version is ${MAXIMUM_EXECUTABLE_VERSION}.`);\n        }\n        // Check that response was successful.\n        if (!executableResponse.success) {\n            throw new ExecutableError(executableResponse.errorMessage, executableResponse.errorCode);\n        }\n        // Check that response contains expiration time if output file was specified.\n        if (this.outputFile) {\n            if (!executableResponse.expirationTime) {\n                throw new executable_response_1.InvalidExpirationTimeFieldError('The executable response must contain the `expiration_time` field for successful responses when an output_file has been specified in the configuration.');\n            }\n        }\n        // Check that response is not expired.\n        if (executableResponse.isExpired()) {\n            throw new Error('Executable response is expired.');\n        }\n        // Return subject token from response.\n        return executableResponse.subjectToken;\n    }\n}\nexports.PluggableAuthClient = PluggableAuthClient;\n","\"use strict\";\n// Copyright 2021 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ExternalAccountClient = void 0;\nconst baseexternalclient_1 = require(\"./baseexternalclient\");\nconst identitypoolclient_1 = require(\"./identitypoolclient\");\nconst awsclient_1 = require(\"./awsclient\");\nconst pluggable_auth_client_1 = require(\"./pluggable-auth-client\");\n/**\n * Dummy class with no constructor. Developers are expected to use fromJSON.\n */\nclass ExternalAccountClient {\n    constructor() {\n        throw new Error('ExternalAccountClients should be initialized via: ' +\n            'ExternalAccountClient.fromJSON(), ' +\n            'directly via explicit constructors, eg. ' +\n            'new AwsClient(options), new IdentityPoolClient(options), new' +\n            'PluggableAuthClientOptions, or via ' +\n            'new GoogleAuth(options).getClient()');\n    }\n    /**\n     * This static method will instantiate the\n     * corresponding type of external account credential depending on the\n     * underlying credential source.\n     * @param options The external account options object typically loaded\n     *   from the external account JSON credential file.\n     * @param additionalOptions **DEPRECATED, all options are available in the\n     *   `options` parameter.** Optional additional behavior customization options.\n     *   These currently customize expiration threshold time and whether to retry\n     *   on 401/403 API request errors.\n     * @return A BaseExternalAccountClient instance or null if the options\n     *   provided do not correspond to an external account credential.\n     */\n    static fromJSON(options, additionalOptions) {\n        var _a, _b;\n        if (options && options.type === baseexternalclient_1.EXTERNAL_ACCOUNT_TYPE) {\n            if ((_a = options.credential_source) === null || _a === void 0 ? void 0 : _a.environment_id) {\n                return new awsclient_1.AwsClient(options, additionalOptions);\n            }\n            else if ((_b = options.credential_source) === null || _b === void 0 ? void 0 : _b.executable) {\n                return new pluggable_auth_client_1.PluggableAuthClient(options, additionalOptions);\n            }\n            else {\n                return new identitypoolclient_1.IdentityPoolClient(options, additionalOptions);\n            }\n        }\n        else {\n            return null;\n        }\n    }\n}\nexports.ExternalAccountClient = ExternalAccountClient;\n","\"use strict\";\n// Copyright 2023 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ExternalAccountAuthorizedUserClient = exports.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE = void 0;\nconst authclient_1 = require(\"./authclient\");\nconst oauth2common_1 = require(\"./oauth2common\");\nconst gaxios_1 = require(\"gaxios\");\nconst stream = require(\"stream\");\nconst baseexternalclient_1 = require(\"./baseexternalclient\");\n/**\n * The credentials JSON file type for external account authorized user clients.\n */\nexports.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE = 'external_account_authorized_user';\nconst DEFAULT_TOKEN_URL = 'https://sts.{universeDomain}/v1/oauthtoken';\n/**\n * Handler for token refresh requests sent to the token_url endpoint for external\n * authorized user credentials.\n */\nclass ExternalAccountAuthorizedUserHandler extends oauth2common_1.OAuthClientAuthHandler {\n    /**\n     * Initializes an ExternalAccountAuthorizedUserHandler instance.\n     * @param url The URL of the token refresh endpoint.\n     * @param transporter The transporter to use for the refresh request.\n     * @param clientAuthentication The client authentication credentials to use\n     *   for the refresh request.\n     */\n    constructor(url, transporter, clientAuthentication) {\n        super(clientAuthentication);\n        this.url = url;\n        this.transporter = transporter;\n    }\n    /**\n     * Requests a new access token from the token_url endpoint using the provided\n     *   refresh token.\n     * @param refreshToken The refresh token to use to generate a new access token.\n     * @param additionalHeaders Optional additional headers to pass along the\n     *   request.\n     * @return A promise that resolves with the token refresh response containing\n     *   the requested access token and its expiration time.\n     */\n    async refreshToken(refreshToken, additionalHeaders) {\n        const values = new URLSearchParams({\n            grant_type: 'refresh_token',\n            refresh_token: refreshToken,\n        });\n        const headers = {\n            'Content-Type': 'application/x-www-form-urlencoded',\n            ...additionalHeaders,\n        };\n        const opts = {\n            ...ExternalAccountAuthorizedUserHandler.RETRY_CONFIG,\n            url: this.url,\n            method: 'POST',\n            headers,\n            data: values.toString(),\n            responseType: 'json',\n        };\n        // Apply OAuth client authentication.\n        this.applyClientAuthenticationOptions(opts);\n        try {\n            const response = await this.transporter.request(opts);\n            // Successful response.\n            const tokenRefreshResponse = response.data;\n            tokenRefreshResponse.res = response;\n            return tokenRefreshResponse;\n        }\n        catch (error) {\n            // Translate error to OAuthError.\n            if (error instanceof gaxios_1.GaxiosError && error.response) {\n                throw (0, oauth2common_1.getErrorFromOAuthErrorResponse)(error.response.data, \n                // Preserve other fields from the original error.\n                error);\n            }\n            // Request could fail before the server responds.\n            throw error;\n        }\n    }\n}\n/**\n * External Account Authorized User Client. This is used for OAuth2 credentials\n * sourced using external identities through Workforce Identity Federation.\n * Obtaining the initial access and refresh token can be done through the\n * Google Cloud CLI.\n */\nclass ExternalAccountAuthorizedUserClient extends authclient_1.AuthClient {\n    /**\n     * Instantiates an ExternalAccountAuthorizedUserClient instances using the\n     * provided JSON object loaded from a credentials files.\n     * An error is throws if the credential is not valid.\n     * @param options The external account authorized user option object typically\n     *   from the external accoutn authorized user JSON credential file.\n     * @param additionalOptions **DEPRECATED, all options are available in the\n     *   `options` parameter.** Optional additional behavior customization options.\n     *   These currently customize expiration threshold time and whether to retry\n     *   on 401/403 API request errors.\n     */\n    constructor(options, additionalOptions) {\n        var _a;\n        super({ ...options, ...additionalOptions });\n        if (options.universe_domain) {\n            this.universeDomain = options.universe_domain;\n        }\n        this.refreshToken = options.refresh_token;\n        const clientAuth = {\n            confidentialClientType: 'basic',\n            clientId: options.client_id,\n            clientSecret: options.client_secret,\n        };\n        this.externalAccountAuthorizedUserHandler =\n            new ExternalAccountAuthorizedUserHandler((_a = options.token_url) !== null && _a !== void 0 ? _a : DEFAULT_TOKEN_URL.replace('{universeDomain}', this.universeDomain), this.transporter, clientAuth);\n        this.cachedAccessToken = null;\n        this.quotaProjectId = options.quota_project_id;\n        // As threshold could be zero,\n        // eagerRefreshThresholdMillis || EXPIRATION_TIME_OFFSET will override the\n        // zero value.\n        if (typeof (additionalOptions === null || additionalOptions === void 0 ? void 0 : additionalOptions.eagerRefreshThresholdMillis) !== 'number') {\n            this.eagerRefreshThresholdMillis = baseexternalclient_1.EXPIRATION_TIME_OFFSET;\n        }\n        else {\n            this.eagerRefreshThresholdMillis = additionalOptions\n                .eagerRefreshThresholdMillis;\n        }\n        this.forceRefreshOnFailure = !!(additionalOptions === null || additionalOptions === void 0 ? void 0 : additionalOptions.forceRefreshOnFailure);\n    }\n    async getAccessToken() {\n        // If cached access token is unavailable or expired, force refresh.\n        if (!this.cachedAccessToken || this.isExpired(this.cachedAccessToken)) {\n            await this.refreshAccessTokenAsync();\n        }\n        // Return GCP access token in GetAccessTokenResponse format.\n        return {\n            token: this.cachedAccessToken.access_token,\n            res: this.cachedAccessToken.res,\n        };\n    }\n    async getRequestHeaders() {\n        const accessTokenResponse = await this.getAccessToken();\n        const headers = {\n            Authorization: `Bearer ${accessTokenResponse.token}`,\n        };\n        return this.addSharedMetadataHeaders(headers);\n    }\n    request(opts, callback) {\n        if (callback) {\n            this.requestAsync(opts).then(r => callback(null, r), e => {\n                return callback(e, e.response);\n            });\n        }\n        else {\n            return this.requestAsync(opts);\n        }\n    }\n    /**\n     * Authenticates the provided HTTP request, processes it and resolves with the\n     * returned response.\n     * @param opts The HTTP request options.\n     * @param reAuthRetried Whether the current attempt is a retry after a failed attempt due to an auth failure.\n     * @return A promise that resolves with the successful response.\n     */\n    async requestAsync(opts, reAuthRetried = false) {\n        let response;\n        try {\n            const requestHeaders = await this.getRequestHeaders();\n            opts.headers = opts.headers || {};\n            if (requestHeaders && requestHeaders['x-goog-user-project']) {\n                opts.headers['x-goog-user-project'] =\n                    requestHeaders['x-goog-user-project'];\n            }\n            if (requestHeaders && requestHeaders.Authorization) {\n                opts.headers.Authorization = requestHeaders.Authorization;\n            }\n            response = await this.transporter.request(opts);\n        }\n        catch (e) {\n            const res = e.response;\n            if (res) {\n                const statusCode = res.status;\n                // Retry the request for metadata if the following criteria are true:\n                // - We haven't already retried.  It only makes sense to retry once.\n                // - The response was a 401 or a 403\n                // - The request didn't send a readableStream\n                // - forceRefreshOnFailure is true\n                const isReadableStream = res.config.data instanceof stream.Readable;\n                const isAuthErr = statusCode === 401 || statusCode === 403;\n                if (!reAuthRetried &&\n                    isAuthErr &&\n                    !isReadableStream &&\n                    this.forceRefreshOnFailure) {\n                    await this.refreshAccessTokenAsync();\n                    return await this.requestAsync(opts, true);\n                }\n            }\n            throw e;\n        }\n        return response;\n    }\n    /**\n     * Forces token refresh, even if unexpired tokens are currently cached.\n     * @return A promise that resolves with the refreshed credential.\n     */\n    async refreshAccessTokenAsync() {\n        // Refresh the access token using the refresh token.\n        const refreshResponse = await this.externalAccountAuthorizedUserHandler.refreshToken(this.refreshToken);\n        this.cachedAccessToken = {\n            access_token: refreshResponse.access_token,\n            expiry_date: new Date().getTime() + refreshResponse.expires_in * 1000,\n            res: refreshResponse.res,\n        };\n        if (refreshResponse.refresh_token !== undefined) {\n            this.refreshToken = refreshResponse.refresh_token;\n        }\n        return this.cachedAccessToken;\n    }\n    /**\n     * Returns whether the provided credentials are expired or not.\n     * If there is no expiry time, assumes the token is not expired or expiring.\n     * @param credentials The credentials to check for expiration.\n     * @return Whether the credentials are expired or not.\n     */\n    isExpired(credentials) {\n        const now = new Date().getTime();\n        return credentials.expiry_date\n            ? now >= credentials.expiry_date - this.eagerRefreshThresholdMillis\n            : false;\n    }\n}\nexports.ExternalAccountAuthorizedUserClient = ExternalAccountAuthorizedUserClient;\n","\"use strict\";\n// Copyright 2019 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar _GoogleAuth_instances, _GoogleAuth_pendingAuthClient, _GoogleAuth_prepareAndCacheClient, _GoogleAuth_determineClient;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.GoogleAuth = exports.GoogleAuthExceptionMessages = exports.CLOUD_SDK_CLIENT_ID = void 0;\nconst child_process_1 = require(\"child_process\");\nconst fs = require(\"fs\");\nconst gcpMetadata = require(\"gcp-metadata\");\nconst os = require(\"os\");\nconst path = require(\"path\");\nconst crypto_1 = require(\"../crypto/crypto\");\nconst transporters_1 = require(\"../transporters\");\nconst computeclient_1 = require(\"./computeclient\");\nconst idtokenclient_1 = require(\"./idtokenclient\");\nconst envDetect_1 = require(\"./envDetect\");\nconst jwtclient_1 = require(\"./jwtclient\");\nconst refreshclient_1 = require(\"./refreshclient\");\nconst impersonated_1 = require(\"./impersonated\");\nconst externalclient_1 = require(\"./externalclient\");\nconst baseexternalclient_1 = require(\"./baseexternalclient\");\nconst authclient_1 = require(\"./authclient\");\nconst externalAccountAuthorizedUserClient_1 = require(\"./externalAccountAuthorizedUserClient\");\nconst util_1 = require(\"../util\");\nexports.CLOUD_SDK_CLIENT_ID = '764086051850-6qr4p6gpi6hn506pt8ejuq83di341hur.apps.googleusercontent.com';\nexports.GoogleAuthExceptionMessages = {\n    API_KEY_WITH_CREDENTIALS: 'API Keys and Credentials are mutually exclusive authentication methods and cannot be used together.',\n    NO_PROJECT_ID_FOUND: 'Unable to detect a Project Id in the current environment. \\n' +\n        'To learn more about authentication and Google APIs, visit: \\n' +\n        'https://cloud.google.com/docs/authentication/getting-started',\n    NO_CREDENTIALS_FOUND: 'Unable to find credentials in current environment. \\n' +\n        'To learn more about authentication and Google APIs, visit: \\n' +\n        'https://cloud.google.com/docs/authentication/getting-started',\n    NO_ADC_FOUND: 'Could not load the default credentials. Browse to https://cloud.google.com/docs/authentication/getting-started for more information.',\n    NO_UNIVERSE_DOMAIN_FOUND: 'Unable to detect a Universe Domain in the current environment.\\n' +\n        'To learn more about Universe Domain retrieval, visit: \\n' +\n        'https://cloud.google.com/compute/docs/metadata/predefined-metadata-keys',\n};\nclass GoogleAuth {\n    // Note:  this properly is only public to satisfy unit tests.\n    // https://github.com/Microsoft/TypeScript/issues/5228\n    get isGCE() {\n        return this.checkIsGCE;\n    }\n    /**\n     * Configuration is resolved in the following order of precedence:\n     * - {@link GoogleAuthOptions.credentials `credentials`}\n     * - {@link GoogleAuthOptions.keyFilename `keyFilename`}\n     * - {@link GoogleAuthOptions.keyFile `keyFile`}\n     *\n     * {@link GoogleAuthOptions.clientOptions `clientOptions`} are passed to the\n     * {@link AuthClient `AuthClient`s}.\n     *\n     * @param opts\n     */\n    constructor(opts = {}) {\n        _GoogleAuth_instances.add(this);\n        /**\n         * Caches a value indicating whether the auth layer is running on Google\n         * Compute Engine.\n         * @private\n         */\n        this.checkIsGCE = undefined;\n        // To save the contents of the JSON credential file\n        this.jsonContent = null;\n        this.cachedCredential = null;\n        /**\n         * A pending {@link AuthClient}. Used for concurrent {@link GoogleAuth.getClient} calls.\n         */\n        _GoogleAuth_pendingAuthClient.set(this, null);\n        this.clientOptions = {};\n        this._cachedProjectId = opts.projectId || null;\n        this.cachedCredential = opts.authClient || null;\n        this.keyFilename = opts.keyFilename || opts.keyFile;\n        this.scopes = opts.scopes;\n        this.clientOptions = opts.clientOptions || {};\n        this.jsonContent = opts.credentials || null;\n        this.apiKey = opts.apiKey || this.clientOptions.apiKey || null;\n        // Cannot use both API Key + Credentials\n        if (this.apiKey && (this.jsonContent || this.clientOptions.credentials)) {\n            throw new RangeError(exports.GoogleAuthExceptionMessages.API_KEY_WITH_CREDENTIALS);\n        }\n        if (opts.universeDomain) {\n            this.clientOptions.universeDomain = opts.universeDomain;\n        }\n    }\n    // GAPIC client libraries should always use self-signed JWTs. The following\n    // variables are set on the JWT client in order to indicate the type of library,\n    // and sign the JWT with the correct audience and scopes (if not supplied).\n    setGapicJWTValues(client) {\n        client.defaultServicePath = this.defaultServicePath;\n        client.useJWTAccessWithScope = this.useJWTAccessWithScope;\n        client.defaultScopes = this.defaultScopes;\n    }\n    getProjectId(callback) {\n        if (callback) {\n            this.getProjectIdAsync().then(r => callback(null, r), callback);\n        }\n        else {\n            return this.getProjectIdAsync();\n        }\n    }\n    /**\n     * A temporary method for internal `getProjectId` usages where `null` is\n     * acceptable. In a future major release, `getProjectId` should return `null`\n     * (as the `Promise<string | null>` base signature describes) and this private\n     * method should be removed.\n     *\n     * @returns Promise that resolves with project id (or `null`)\n     */\n    async getProjectIdOptional() {\n        try {\n            return await this.getProjectId();\n        }\n        catch (e) {\n            if (e instanceof Error &&\n                e.message === exports.GoogleAuthExceptionMessages.NO_PROJECT_ID_FOUND) {\n                return null;\n            }\n            else {\n                throw e;\n            }\n        }\n    }\n    /**\n     * A private method for finding and caching a projectId.\n     *\n     * Supports environments in order of precedence:\n     * - GCLOUD_PROJECT or GOOGLE_CLOUD_PROJECT environment variable\n     * - GOOGLE_APPLICATION_CREDENTIALS JSON file\n     * - Cloud SDK: `gcloud config config-helper --format json`\n     * - GCE project ID from metadata server\n     *\n     * @returns projectId\n     */\n    async findAndCacheProjectId() {\n        let projectId = null;\n        projectId || (projectId = await this.getProductionProjectId());\n        projectId || (projectId = await this.getFileProjectId());\n        projectId || (projectId = await this.getDefaultServiceProjectId());\n        projectId || (projectId = await this.getGCEProjectId());\n        projectId || (projectId = await this.getExternalAccountClientProjectId());\n        if (projectId) {\n            this._cachedProjectId = projectId;\n            return projectId;\n        }\n        else {\n            throw new Error(exports.GoogleAuthExceptionMessages.NO_PROJECT_ID_FOUND);\n        }\n    }\n    async getProjectIdAsync() {\n        if (this._cachedProjectId) {\n            return this._cachedProjectId;\n        }\n        if (!this._findProjectIdPromise) {\n            this._findProjectIdPromise = this.findAndCacheProjectId();\n        }\n        return this._findProjectIdPromise;\n    }\n    /**\n     * Retrieves a universe domain from the metadata server via\n     * {@link gcpMetadata.universe}.\n     *\n     * @returns a universe domain\n     */\n    async getUniverseDomainFromMetadataServer() {\n        var _a;\n        let universeDomain;\n        try {\n            universeDomain = await gcpMetadata.universe('universe-domain');\n            universeDomain || (universeDomain = authclient_1.DEFAULT_UNIVERSE);\n        }\n        catch (e) {\n            if (e && ((_a = e === null || e === void 0 ? void 0 : e.response) === null || _a === void 0 ? void 0 : _a.status) === 404) {\n                universeDomain = authclient_1.DEFAULT_UNIVERSE;\n            }\n            else {\n                throw e;\n            }\n        }\n        return universeDomain;\n    }\n    /**\n     * Retrieves, caches, and returns the universe domain in the following order\n     * of precedence:\n     * - The universe domain in {@link GoogleAuth.clientOptions}\n     * - An existing or ADC {@link AuthClient}'s universe domain\n     * - {@link gcpMetadata.universe}, if {@link Compute} client\n     *\n     * @returns The universe domain\n     */\n    async getUniverseDomain() {\n        let universeDomain = (0, util_1.originalOrCamelOptions)(this.clientOptions).get('universe_domain');\n        try {\n            universeDomain !== null && universeDomain !== void 0 ? universeDomain : (universeDomain = (await this.getClient()).universeDomain);\n        }\n        catch (_a) {\n            // client or ADC is not available\n            universeDomain !== null && universeDomain !== void 0 ? universeDomain : (universeDomain = authclient_1.DEFAULT_UNIVERSE);\n        }\n        return universeDomain;\n    }\n    /**\n     * @returns Any scopes (user-specified or default scopes specified by the\n     *   client library) that need to be set on the current Auth client.\n     */\n    getAnyScopes() {\n        return this.scopes || this.defaultScopes;\n    }\n    getApplicationDefault(optionsOrCallback = {}, callback) {\n        let options;\n        if (typeof optionsOrCallback === 'function') {\n            callback = optionsOrCallback;\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        if (callback) {\n            this.getApplicationDefaultAsync(options).then(r => callback(null, r.credential, r.projectId), callback);\n        }\n        else {\n            return this.getApplicationDefaultAsync(options);\n        }\n    }\n    async getApplicationDefaultAsync(options = {}) {\n        // If we've already got a cached credential, return it.\n        // This will also preserve one's configured quota project, in case they\n        // set one directly on the credential previously.\n        if (this.cachedCredential) {\n            // cache, while preserving existing quota project preferences\n            return await __classPrivateFieldGet(this, _GoogleAuth_instances, \"m\", _GoogleAuth_prepareAndCacheClient).call(this, this.cachedCredential, null);\n        }\n        let credential;\n        // Check for the existence of a local environment variable pointing to the\n        // location of the credential file. This is typically used in local\n        // developer scenarios.\n        credential =\n            await this._tryGetApplicationCredentialsFromEnvironmentVariable(options);\n        if (credential) {\n            if (credential instanceof jwtclient_1.JWT) {\n                credential.scopes = this.scopes;\n            }\n            else if (credential instanceof baseexternalclient_1.BaseExternalAccountClient) {\n                credential.scopes = this.getAnyScopes();\n            }\n            return await __classPrivateFieldGet(this, _GoogleAuth_instances, \"m\", _GoogleAuth_prepareAndCacheClient).call(this, credential);\n        }\n        // Look in the well-known credential file location.\n        credential =\n            await this._tryGetApplicationCredentialsFromWellKnownFile(options);\n        if (credential) {\n            if (credential instanceof jwtclient_1.JWT) {\n                credential.scopes = this.scopes;\n            }\n            else if (credential instanceof baseexternalclient_1.BaseExternalAccountClient) {\n                credential.scopes = this.getAnyScopes();\n            }\n            return await __classPrivateFieldGet(this, _GoogleAuth_instances, \"m\", _GoogleAuth_prepareAndCacheClient).call(this, credential);\n        }\n        // Determine if we're running on GCE.\n        if (await this._checkIsGCE()) {\n            options.scopes = this.getAnyScopes();\n            return await __classPrivateFieldGet(this, _GoogleAuth_instances, \"m\", _GoogleAuth_prepareAndCacheClient).call(this, new computeclient_1.Compute(options));\n        }\n        throw new Error(exports.GoogleAuthExceptionMessages.NO_ADC_FOUND);\n    }\n    /**\n     * Determines whether the auth layer is running on Google Compute Engine.\n     * Checks for GCP Residency, then fallback to checking if metadata server\n     * is available.\n     *\n     * @returns A promise that resolves with the boolean.\n     * @api private\n     */\n    async _checkIsGCE() {\n        if (this.checkIsGCE === undefined) {\n            this.checkIsGCE =\n                gcpMetadata.getGCPResidency() || (await gcpMetadata.isAvailable());\n        }\n        return this.checkIsGCE;\n    }\n    /**\n     * Attempts to load default credentials from the environment variable path..\n     * @returns Promise that resolves with the OAuth2Client or null.\n     * @api private\n     */\n    async _tryGetApplicationCredentialsFromEnvironmentVariable(options) {\n        const credentialsPath = process.env['GOOGLE_APPLICATION_CREDENTIALS'] ||\n            process.env['google_application_credentials'];\n        if (!credentialsPath || credentialsPath.length === 0) {\n            return null;\n        }\n        try {\n            return this._getApplicationCredentialsFromFilePath(credentialsPath, options);\n        }\n        catch (e) {\n            if (e instanceof Error) {\n                e.message = `Unable to read the credential file specified by the GOOGLE_APPLICATION_CREDENTIALS environment variable: ${e.message}`;\n            }\n            throw e;\n        }\n    }\n    /**\n     * Attempts to load default credentials from a well-known file location\n     * @return Promise that resolves with the OAuth2Client or null.\n     * @api private\n     */\n    async _tryGetApplicationCredentialsFromWellKnownFile(options) {\n        // First, figure out the location of the file, depending upon the OS type.\n        let location = null;\n        if (this._isWindows()) {\n            // Windows\n            location = process.env['APPDATA'];\n        }\n        else {\n            // Linux or Mac\n            const home = process.env['HOME'];\n            if (home) {\n                location = path.join(home, '.config');\n            }\n        }\n        // If we found the root path, expand it.\n        if (location) {\n            location = path.join(location, 'gcloud', 'application_default_credentials.json');\n            if (!fs.existsSync(location)) {\n                location = null;\n            }\n        }\n        // The file does not exist.\n        if (!location) {\n            return null;\n        }\n        // The file seems to exist. Try to use it.\n        const client = await this._getApplicationCredentialsFromFilePath(location, options);\n        return client;\n    }\n    /**\n     * Attempts to load default credentials from a file at the given path..\n     * @param filePath The path to the file to read.\n     * @returns Promise that resolves with the OAuth2Client\n     * @api private\n     */\n    async _getApplicationCredentialsFromFilePath(filePath, options = {}) {\n        // Make sure the path looks like a string.\n        if (!filePath || filePath.length === 0) {\n            throw new Error('The file path is invalid.');\n        }\n        // Make sure there is a file at the path. lstatSync will throw if there is\n        // nothing there.\n        try {\n            // Resolve path to actual file in case of symlink. Expect a thrown error\n            // if not resolvable.\n            filePath = fs.realpathSync(filePath);\n            if (!fs.lstatSync(filePath).isFile()) {\n                throw new Error();\n            }\n        }\n        catch (err) {\n            if (err instanceof Error) {\n                err.message = `The file at ${filePath} does not exist, or it is not a file. ${err.message}`;\n            }\n            throw err;\n        }\n        // Now open a read stream on the file, and parse it.\n        const readStream = fs.createReadStream(filePath);\n        return this.fromStream(readStream, options);\n    }\n    /**\n     * Create a credentials instance using a given impersonated input options.\n     * @param json The impersonated input object.\n     * @returns JWT or UserRefresh Client with data\n     */\n    fromImpersonatedJSON(json) {\n        var _a, _b, _c, _d;\n        if (!json) {\n            throw new Error('Must pass in a JSON object containing an  impersonated refresh token');\n        }\n        if (json.type !== impersonated_1.IMPERSONATED_ACCOUNT_TYPE) {\n            throw new Error(`The incoming JSON object does not have the \"${impersonated_1.IMPERSONATED_ACCOUNT_TYPE}\" type`);\n        }\n        if (!json.source_credentials) {\n            throw new Error('The incoming JSON object does not contain a source_credentials field');\n        }\n        if (!json.service_account_impersonation_url) {\n            throw new Error('The incoming JSON object does not contain a service_account_impersonation_url field');\n        }\n        const sourceClient = this.fromJSON(json.source_credentials);\n        if (((_a = json.service_account_impersonation_url) === null || _a === void 0 ? void 0 : _a.length) > 256) {\n            /**\n             * Prevents DOS attacks.\n             * @see {@link https://github.com/googleapis/google-auth-library-nodejs/security/code-scanning/85}\n             **/\n            throw new RangeError(`Target principal is too long: ${json.service_account_impersonation_url}`);\n        }\n        // Extract service account from service_account_impersonation_url\n        const targetPrincipal = (_c = (_b = /(?<target>[^/]+):(generateAccessToken|generateIdToken)$/.exec(json.service_account_impersonation_url)) === null || _b === void 0 ? void 0 : _b.groups) === null || _c === void 0 ? void 0 : _c.target;\n        if (!targetPrincipal) {\n            throw new RangeError(`Cannot extract target principal from ${json.service_account_impersonation_url}`);\n        }\n        const targetScopes = (_d = this.getAnyScopes()) !== null && _d !== void 0 ? _d : [];\n        return new impersonated_1.Impersonated({\n            ...json,\n            sourceClient,\n            targetPrincipal,\n            targetScopes: Array.isArray(targetScopes) ? targetScopes : [targetScopes],\n        });\n    }\n    /**\n     * Create a credentials instance using the given input options.\n     * This client is not cached.\n     *\n     * **Important**: If you accept a credential configuration (credential JSON/File/Stream) from an external source for authentication to Google Cloud, you must validate it before providing it to any Google API or library. Providing an unvalidated credential configuration to Google APIs can compromise the security of your systems and data. For more information, refer to {@link https://cloud.google.com/docs/authentication/external/externally-sourced-credentials Validate credential configurations from external sources}.\n     *\n     * @param json The input object.\n     * @param options The JWT or UserRefresh options for the client\n     * @returns JWT or UserRefresh Client with data\n     */\n    fromJSON(json, options = {}) {\n        let client;\n        // user's preferred universe domain\n        const preferredUniverseDomain = (0, util_1.originalOrCamelOptions)(options).get('universe_domain');\n        if (json.type === refreshclient_1.USER_REFRESH_ACCOUNT_TYPE) {\n            client = new refreshclient_1.UserRefreshClient(options);\n            client.fromJSON(json);\n        }\n        else if (json.type === impersonated_1.IMPERSONATED_ACCOUNT_TYPE) {\n            client = this.fromImpersonatedJSON(json);\n        }\n        else if (json.type === baseexternalclient_1.EXTERNAL_ACCOUNT_TYPE) {\n            client = externalclient_1.ExternalAccountClient.fromJSON(json, options);\n            client.scopes = this.getAnyScopes();\n        }\n        else if (json.type === externalAccountAuthorizedUserClient_1.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE) {\n            client = new externalAccountAuthorizedUserClient_1.ExternalAccountAuthorizedUserClient(json, options);\n        }\n        else {\n            options.scopes = this.scopes;\n            client = new jwtclient_1.JWT(options);\n            this.setGapicJWTValues(client);\n            client.fromJSON(json);\n        }\n        if (preferredUniverseDomain) {\n            client.universeDomain = preferredUniverseDomain;\n        }\n        return client;\n    }\n    /**\n     * Return a JWT or UserRefreshClient from JavaScript object, caching both the\n     * object used to instantiate and the client.\n     * @param json The input object.\n     * @param options The JWT or UserRefresh options for the client\n     * @returns JWT or UserRefresh Client with data\n     */\n    _cacheClientFromJSON(json, options) {\n        const client = this.fromJSON(json, options);\n        // cache both raw data used to instantiate client and client itself.\n        this.jsonContent = json;\n        this.cachedCredential = client;\n        return client;\n    }\n    fromStream(inputStream, optionsOrCallback = {}, callback) {\n        let options = {};\n        if (typeof optionsOrCallback === 'function') {\n            callback = optionsOrCallback;\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        if (callback) {\n            this.fromStreamAsync(inputStream, options).then(r => callback(null, r), callback);\n        }\n        else {\n            return this.fromStreamAsync(inputStream, options);\n        }\n    }\n    fromStreamAsync(inputStream, options) {\n        return new Promise((resolve, reject) => {\n            if (!inputStream) {\n                throw new Error('Must pass in a stream containing the Google auth settings.');\n            }\n            const chunks = [];\n            inputStream\n                .setEncoding('utf8')\n                .on('error', reject)\n                .on('data', chunk => chunks.push(chunk))\n                .on('end', () => {\n                try {\n                    try {\n                        const data = JSON.parse(chunks.join(''));\n                        const r = this._cacheClientFromJSON(data, options);\n                        return resolve(r);\n                    }\n                    catch (err) {\n                        // If we failed parsing this.keyFileName, assume that it\n                        // is a PEM or p12 certificate:\n                        if (!this.keyFilename)\n                            throw err;\n                        const client = new jwtclient_1.JWT({\n                            ...this.clientOptions,\n                            keyFile: this.keyFilename,\n                        });\n                        this.cachedCredential = client;\n                        this.setGapicJWTValues(client);\n                        return resolve(client);\n                    }\n                }\n                catch (err) {\n                    return reject(err);\n                }\n            });\n        });\n    }\n    /**\n     * Create a credentials instance using the given API key string.\n     * The created client is not cached. In order to create and cache it use the {@link GoogleAuth.getClient `getClient`} method after first providing an {@link GoogleAuth.apiKey `apiKey`}.\n     *\n     * @param apiKey The API key string\n     * @param options An optional options object.\n     * @returns A JWT loaded from the key\n     */\n    fromAPIKey(apiKey, options = {}) {\n        return new jwtclient_1.JWT({ ...options, apiKey });\n    }\n    /**\n     * Determines whether the current operating system is Windows.\n     * @api private\n     */\n    _isWindows() {\n        const sys = os.platform();\n        if (sys && sys.length >= 3) {\n            if (sys.substring(0, 3).toLowerCase() === 'win') {\n                return true;\n            }\n        }\n        return false;\n    }\n    /**\n     * Run the Google Cloud SDK command that prints the default project ID\n     */\n    async getDefaultServiceProjectId() {\n        return new Promise(resolve => {\n            (0, child_process_1.exec)('gcloud config config-helper --format json', (err, stdout) => {\n                if (!err && stdout) {\n                    try {\n                        const projectId = JSON.parse(stdout).configuration.properties.core.project;\n                        resolve(projectId);\n                        return;\n                    }\n                    catch (e) {\n                        // ignore errors\n                    }\n                }\n                resolve(null);\n            });\n        });\n    }\n    /**\n     * Loads the project id from environment variables.\n     * @api private\n     */\n    getProductionProjectId() {\n        return (process.env['GCLOUD_PROJECT'] ||\n            process.env['GOOGLE_CLOUD_PROJECT'] ||\n            process.env['gcloud_project'] ||\n            process.env['google_cloud_project']);\n    }\n    /**\n     * Loads the project id from the GOOGLE_APPLICATION_CREDENTIALS json file.\n     * @api private\n     */\n    async getFileProjectId() {\n        if (this.cachedCredential) {\n            // Try to read the project ID from the cached credentials file\n            return this.cachedCredential.projectId;\n        }\n        // Ensure the projectId is loaded from the keyFile if available.\n        if (this.keyFilename) {\n            const creds = await this.getClient();\n            if (creds && creds.projectId) {\n                return creds.projectId;\n            }\n        }\n        // Try to load a credentials file and read its project ID\n        const r = await this._tryGetApplicationCredentialsFromEnvironmentVariable();\n        if (r) {\n            return r.projectId;\n        }\n        else {\n            return null;\n        }\n    }\n    /**\n     * Gets the project ID from external account client if available.\n     */\n    async getExternalAccountClientProjectId() {\n        if (!this.jsonContent || this.jsonContent.type !== baseexternalclient_1.EXTERNAL_ACCOUNT_TYPE) {\n            return null;\n        }\n        const creds = await this.getClient();\n        // Do not suppress the underlying error, as the error could contain helpful\n        // information for debugging and fixing. This is especially true for\n        // external account creds as in order to get the project ID, the following\n        // operations have to succeed:\n        // 1. Valid credentials file should be supplied.\n        // 2. Ability to retrieve access tokens from STS token exchange API.\n        // 3. Ability to exchange for service account impersonated credentials (if\n        //    enabled).\n        // 4. Ability to get project info using the access token from step 2 or 3.\n        // Without surfacing the error, it is harder for developers to determine\n        // which step went wrong.\n        return await creds.getProjectId();\n    }\n    /**\n     * Gets the Compute Engine project ID if it can be inferred.\n     */\n    async getGCEProjectId() {\n        try {\n            const r = await gcpMetadata.project('project-id');\n            return r;\n        }\n        catch (e) {\n            // Ignore any errors\n            return null;\n        }\n    }\n    getCredentials(callback) {\n        if (callback) {\n            this.getCredentialsAsync().then(r => callback(null, r), callback);\n        }\n        else {\n            return this.getCredentialsAsync();\n        }\n    }\n    async getCredentialsAsync() {\n        const client = await this.getClient();\n        if (client instanceof impersonated_1.Impersonated) {\n            return { client_email: client.getTargetPrincipal() };\n        }\n        if (client instanceof baseexternalclient_1.BaseExternalAccountClient) {\n            const serviceAccountEmail = client.getServiceAccountEmail();\n            if (serviceAccountEmail) {\n                return {\n                    client_email: serviceAccountEmail,\n                    universe_domain: client.universeDomain,\n                };\n            }\n        }\n        if (this.jsonContent) {\n            return {\n                client_email: this.jsonContent.client_email,\n                private_key: this.jsonContent.private_key,\n                universe_domain: this.jsonContent.universe_domain,\n            };\n        }\n        if (await this._checkIsGCE()) {\n            const [client_email, universe_domain] = await Promise.all([\n                gcpMetadata.instance('service-accounts/default/email'),\n                this.getUniverseDomain(),\n            ]);\n            return { client_email, universe_domain };\n        }\n        throw new Error(exports.GoogleAuthExceptionMessages.NO_CREDENTIALS_FOUND);\n    }\n    /**\n     * Automatically obtain an {@link AuthClient `AuthClient`} based on the\n     * provided configuration. If no options were passed, use Application\n     * Default Credentials.\n     */\n    async getClient() {\n        if (this.cachedCredential) {\n            return this.cachedCredential;\n        }\n        // Use an existing auth client request, or cache a new one\n        __classPrivateFieldSet(this, _GoogleAuth_pendingAuthClient, __classPrivateFieldGet(this, _GoogleAuth_pendingAuthClient, \"f\") || __classPrivateFieldGet(this, _GoogleAuth_instances, \"m\", _GoogleAuth_determineClient).call(this), \"f\");\n        try {\n            return await __classPrivateFieldGet(this, _GoogleAuth_pendingAuthClient, \"f\");\n        }\n        finally {\n            // reset the pending auth client in case it is changed later\n            __classPrivateFieldSet(this, _GoogleAuth_pendingAuthClient, null, \"f\");\n        }\n    }\n    /**\n     * Creates a client which will fetch an ID token for authorization.\n     * @param targetAudience the audience for the fetched ID token.\n     * @returns IdTokenClient for making HTTP calls authenticated with ID tokens.\n     */\n    async getIdTokenClient(targetAudience) {\n        const client = await this.getClient();\n        if (!('fetchIdToken' in client)) {\n            throw new Error('Cannot fetch ID token in this environment, use GCE or set the GOOGLE_APPLICATION_CREDENTIALS environment variable to a service account credentials JSON file.');\n        }\n        return new idtokenclient_1.IdTokenClient({ targetAudience, idTokenProvider: client });\n    }\n    /**\n     * Automatically obtain application default credentials, and return\n     * an access token for making requests.\n     */\n    async getAccessToken() {\n        const client = await this.getClient();\n        return (await client.getAccessToken()).token;\n    }\n    /**\n     * Obtain the HTTP headers that will provide authorization for a given\n     * request.\n     */\n    async getRequestHeaders(url) {\n        const client = await this.getClient();\n        return client.getRequestHeaders(url);\n    }\n    /**\n     * Obtain credentials for a request, then attach the appropriate headers to\n     * the request options.\n     * @param opts Axios or Request options on which to attach the headers\n     */\n    async authorizeRequest(opts) {\n        opts = opts || {};\n        const url = opts.url || opts.uri;\n        const client = await this.getClient();\n        const headers = await client.getRequestHeaders(url);\n        opts.headers = Object.assign(opts.headers || {}, headers);\n        return opts;\n    }\n    /**\n     * Automatically obtain application default credentials, and make an\n     * HTTP request using the given options.\n     * @param opts Axios request options for the HTTP request.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    async request(opts) {\n        const client = await this.getClient();\n        return client.request(opts);\n    }\n    /**\n     * Determine the compute environment in which the code is running.\n     */\n    getEnv() {\n        return (0, envDetect_1.getEnv)();\n    }\n    /**\n     * Sign the given data with the current private key, or go out\n     * to the IAM API to sign it.\n     * @param data The data to be signed.\n     * @param endpoint A custom endpoint to use.\n     *\n     * @example\n     * ```\n     * sign('data', 'https://iamcredentials.googleapis.com/v1/projects/-/serviceAccounts/');\n     * ```\n     */\n    async sign(data, endpoint) {\n        const client = await this.getClient();\n        const universe = await this.getUniverseDomain();\n        endpoint =\n            endpoint ||\n                `https://iamcredentials.${universe}/v1/projects/-/serviceAccounts/`;\n        if (client instanceof impersonated_1.Impersonated) {\n            const signed = await client.sign(data);\n            return signed.signedBlob;\n        }\n        const crypto = (0, crypto_1.createCrypto)();\n        if (client instanceof jwtclient_1.JWT && client.key) {\n            const sign = await crypto.sign(client.key, data);\n            return sign;\n        }\n        const creds = await this.getCredentials();\n        if (!creds.client_email) {\n            throw new Error('Cannot sign data without `client_email`.');\n        }\n        return this.signBlob(crypto, creds.client_email, data, endpoint);\n    }\n    async signBlob(crypto, emailOrUniqueId, data, endpoint) {\n        const url = new URL(endpoint + `${emailOrUniqueId}:signBlob`);\n        const res = await this.request({\n            method: 'POST',\n            url: url.href,\n            data: {\n                payload: crypto.encodeBase64StringUtf8(data),\n            },\n            retry: true,\n            retryConfig: {\n                httpMethodsToRetry: ['POST'],\n            },\n        });\n        return res.data.signedBlob;\n    }\n}\nexports.GoogleAuth = GoogleAuth;\n_GoogleAuth_pendingAuthClient = new WeakMap(), _GoogleAuth_instances = new WeakSet(), _GoogleAuth_prepareAndCacheClient = async function _GoogleAuth_prepareAndCacheClient(credential, quotaProjectIdOverride = process.env['GOOGLE_CLOUD_QUOTA_PROJECT'] || null) {\n    const projectId = await this.getProjectIdOptional();\n    if (quotaProjectIdOverride) {\n        credential.quotaProjectId = quotaProjectIdOverride;\n    }\n    this.cachedCredential = credential;\n    return { credential, projectId };\n}, _GoogleAuth_determineClient = async function _GoogleAuth_determineClient() {\n    if (this.jsonContent) {\n        return this._cacheClientFromJSON(this.jsonContent, this.clientOptions);\n    }\n    else if (this.keyFilename) {\n        const filePath = path.resolve(this.keyFilename);\n        const stream = fs.createReadStream(filePath);\n        return await this.fromStreamAsync(stream, this.clientOptions);\n    }\n    else if (this.apiKey) {\n        const client = await this.fromAPIKey(this.apiKey, this.clientOptions);\n        client.scopes = this.scopes;\n        const { credential } = await __classPrivateFieldGet(this, _GoogleAuth_instances, \"m\", _GoogleAuth_prepareAndCacheClient).call(this, client);\n        return credential;\n    }\n    else {\n        const { credential } = await this.getApplicationDefaultAsync(this.clientOptions);\n        return credential;\n    }\n};\n/**\n * Export DefaultTransporter as a static property of the class.\n */\nGoogleAuth.DefaultTransporter = transporters_1.DefaultTransporter;\n","\"use strict\";\n// Copyright 2014 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.IAMAuth = void 0;\nclass IAMAuth {\n    /**\n     * IAM credentials.\n     *\n     * @param selector the iam authority selector\n     * @param token the token\n     * @constructor\n     */\n    constructor(selector, token) {\n        this.selector = selector;\n        this.token = token;\n        this.selector = selector;\n        this.token = token;\n    }\n    /**\n     * Acquire the HTTP headers required to make an authenticated request.\n     */\n    getRequestHeaders() {\n        return {\n            'x-goog-iam-authority-selector': this.selector,\n            'x-goog-iam-authorization-token': this.token,\n        };\n    }\n}\nexports.IAMAuth = IAMAuth;\n","\"use strict\";\n// Copyright 2021 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DownscopedClient = exports.EXPIRATION_TIME_OFFSET = exports.MAX_ACCESS_BOUNDARY_RULES_COUNT = void 0;\nconst stream = require(\"stream\");\nconst authclient_1 = require(\"./authclient\");\nconst sts = require(\"./stscredentials\");\n/**\n * The required token exchange grant_type: rfc8693#section-2.1\n */\nconst STS_GRANT_TYPE = 'urn:ietf:params:oauth:grant-type:token-exchange';\n/**\n * The requested token exchange requested_token_type: rfc8693#section-2.1\n */\nconst STS_REQUEST_TOKEN_TYPE = 'urn:ietf:params:oauth:token-type:access_token';\n/**\n * The requested token exchange subject_token_type: rfc8693#section-2.1\n */\nconst STS_SUBJECT_TOKEN_TYPE = 'urn:ietf:params:oauth:token-type:access_token';\n/**\n * The maximum number of access boundary rules a Credential Access Boundary\n * can contain.\n */\nexports.MAX_ACCESS_BOUNDARY_RULES_COUNT = 10;\n/**\n * Offset to take into account network delays and server clock skews.\n */\nexports.EXPIRATION_TIME_OFFSET = 5 * 60 * 1000;\n/**\n * Defines a set of Google credentials that are downscoped from an existing set\n * of Google OAuth2 credentials. This is useful to restrict the Identity and\n * Access Management (IAM) permissions that a short-lived credential can use.\n * The common pattern of usage is to have a token broker with elevated access\n * generate these downscoped credentials from higher access source credentials\n * and pass the downscoped short-lived access tokens to a token consumer via\n * some secure authenticated channel for limited access to Google Cloud Storage\n * resources.\n */\nclass DownscopedClient extends authclient_1.AuthClient {\n    /**\n     * Instantiates a downscoped client object using the provided source\n     * AuthClient and credential access boundary rules.\n     * To downscope permissions of a source AuthClient, a Credential Access\n     * Boundary that specifies which resources the new credential can access, as\n     * well as an upper bound on the permissions that are available on each\n     * resource, has to be defined. A downscoped client can then be instantiated\n     * using the source AuthClient and the Credential Access Boundary.\n     * @param authClient The source AuthClient to be downscoped based on the\n     *   provided Credential Access Boundary rules.\n     * @param credentialAccessBoundary The Credential Access Boundary which\n     *   contains a list of access boundary rules. Each rule contains information\n     *   on the resource that the rule applies to, the upper bound of the\n     *   permissions that are available on that resource and an optional\n     *   condition to further restrict permissions.\n     * @param additionalOptions **DEPRECATED, set this in the provided `authClient`.**\n     *   Optional additional behavior customization options.\n     * @param quotaProjectId **DEPRECATED, set this in the provided `authClient`.**\n     *   Optional quota project id for setting up in the x-goog-user-project header.\n     */\n    constructor(authClient, credentialAccessBoundary, additionalOptions, quotaProjectId) {\n        super({ ...additionalOptions, quotaProjectId });\n        this.authClient = authClient;\n        this.credentialAccessBoundary = credentialAccessBoundary;\n        // Check 1-10 Access Boundary Rules are defined within Credential Access\n        // Boundary.\n        if (credentialAccessBoundary.accessBoundary.accessBoundaryRules.length === 0) {\n            throw new Error('At least one access boundary rule needs to be defined.');\n        }\n        else if (credentialAccessBoundary.accessBoundary.accessBoundaryRules.length >\n            exports.MAX_ACCESS_BOUNDARY_RULES_COUNT) {\n            throw new Error('The provided access boundary has more than ' +\n                `${exports.MAX_ACCESS_BOUNDARY_RULES_COUNT} access boundary rules.`);\n        }\n        // Check at least one permission should be defined in each Access Boundary\n        // Rule.\n        for (const rule of credentialAccessBoundary.accessBoundary\n            .accessBoundaryRules) {\n            if (rule.availablePermissions.length === 0) {\n                throw new Error('At least one permission should be defined in access boundary rules.');\n            }\n        }\n        this.stsCredential = new sts.StsCredentials(`https://sts.${this.universeDomain}/v1/token`);\n        this.cachedDownscopedAccessToken = null;\n    }\n    /**\n     * Provides a mechanism to inject Downscoped access tokens directly.\n     * The expiry_date field is required to facilitate determination of the token\n     * expiration which would make it easier for the token consumer to handle.\n     * @param credentials The Credentials object to set on the current client.\n     */\n    setCredentials(credentials) {\n        if (!credentials.expiry_date) {\n            throw new Error('The access token expiry_date field is missing in the provided ' +\n                'credentials.');\n        }\n        super.setCredentials(credentials);\n        this.cachedDownscopedAccessToken = credentials;\n    }\n    async getAccessToken() {\n        // If the cached access token is unavailable or expired, force refresh.\n        // The Downscoped access token will be returned in\n        // DownscopedAccessTokenResponse format.\n        if (!this.cachedDownscopedAccessToken ||\n            this.isExpired(this.cachedDownscopedAccessToken)) {\n            await this.refreshAccessTokenAsync();\n        }\n        // Return Downscoped access token in DownscopedAccessTokenResponse format.\n        return {\n            token: this.cachedDownscopedAccessToken.access_token,\n            expirationTime: this.cachedDownscopedAccessToken.expiry_date,\n            res: this.cachedDownscopedAccessToken.res,\n        };\n    }\n    /**\n     * The main authentication interface. It takes an optional url which when\n     * present is the endpoint being accessed, and returns a Promise which\n     * resolves with authorization header fields.\n     *\n     * The result has the form:\n     * { Authorization: 'Bearer <access_token_value>' }\n     */\n    async getRequestHeaders() {\n        const accessTokenResponse = await this.getAccessToken();\n        const headers = {\n            Authorization: `Bearer ${accessTokenResponse.token}`,\n        };\n        return this.addSharedMetadataHeaders(headers);\n    }\n    request(opts, callback) {\n        if (callback) {\n            this.requestAsync(opts).then(r => callback(null, r), e => {\n                return callback(e, e.response);\n            });\n        }\n        else {\n            return this.requestAsync(opts);\n        }\n    }\n    /**\n     * Authenticates the provided HTTP request, processes it and resolves with the\n     * returned response.\n     * @param opts The HTTP request options.\n     * @param reAuthRetried Whether the current attempt is a retry after a failed attempt due to an auth failure\n     * @return A promise that resolves with the successful response.\n     */\n    async requestAsync(opts, reAuthRetried = false) {\n        let response;\n        try {\n            const requestHeaders = await this.getRequestHeaders();\n            opts.headers = opts.headers || {};\n            if (requestHeaders && requestHeaders['x-goog-user-project']) {\n                opts.headers['x-goog-user-project'] =\n                    requestHeaders['x-goog-user-project'];\n            }\n            if (requestHeaders && requestHeaders.Authorization) {\n                opts.headers.Authorization = requestHeaders.Authorization;\n            }\n            response = await this.transporter.request(opts);\n        }\n        catch (e) {\n            const res = e.response;\n            if (res) {\n                const statusCode = res.status;\n                // Retry the request for metadata if the following criteria are true:\n                // - We haven't already retried.  It only makes sense to retry once.\n                // - The response was a 401 or a 403\n                // - The request didn't send a readableStream\n                // - forceRefreshOnFailure is true\n                const isReadableStream = res.config.data instanceof stream.Readable;\n                const isAuthErr = statusCode === 401 || statusCode === 403;\n                if (!reAuthRetried &&\n                    isAuthErr &&\n                    !isReadableStream &&\n                    this.forceRefreshOnFailure) {\n                    await this.refreshAccessTokenAsync();\n                    return await this.requestAsync(opts, true);\n                }\n            }\n            throw e;\n        }\n        return response;\n    }\n    /**\n     * Forces token refresh, even if unexpired tokens are currently cached.\n     * GCP access tokens are retrieved from authclient object/source credential.\n     * Then GCP access tokens are exchanged for downscoped access tokens via the\n     * token exchange endpoint.\n     * @return A promise that resolves with the fresh downscoped access token.\n     */\n    async refreshAccessTokenAsync() {\n        var _a;\n        // Retrieve GCP access token from source credential.\n        const subjectToken = (await this.authClient.getAccessToken()).token;\n        // Construct the STS credentials options.\n        const stsCredentialsOptions = {\n            grantType: STS_GRANT_TYPE,\n            requestedTokenType: STS_REQUEST_TOKEN_TYPE,\n            subjectToken: subjectToken,\n            subjectTokenType: STS_SUBJECT_TOKEN_TYPE,\n        };\n        // Exchange the source AuthClient access token for a Downscoped access\n        // token.\n        const stsResponse = await this.stsCredential.exchangeToken(stsCredentialsOptions, undefined, this.credentialAccessBoundary);\n        /**\n         * The STS endpoint will only return the expiration time for the downscoped\n         * access token if the original access token represents a service account.\n         * The downscoped token's expiration time will always match the source\n         * credential expiration. When no expires_in is returned, we can copy the\n         * source credential's expiration time.\n         */\n        const sourceCredExpireDate = ((_a = this.authClient.credentials) === null || _a === void 0 ? void 0 : _a.expiry_date) || null;\n        const expiryDate = stsResponse.expires_in\n            ? new Date().getTime() + stsResponse.expires_in * 1000\n            : sourceCredExpireDate;\n        // Save response in cached access token.\n        this.cachedDownscopedAccessToken = {\n            access_token: stsResponse.access_token,\n            expiry_date: expiryDate,\n            res: stsResponse.res,\n        };\n        // Save credentials.\n        this.credentials = {};\n        Object.assign(this.credentials, this.cachedDownscopedAccessToken);\n        delete this.credentials.res;\n        // Trigger tokens event to notify external listeners.\n        this.emit('tokens', {\n            refresh_token: null,\n            expiry_date: this.cachedDownscopedAccessToken.expiry_date,\n            access_token: this.cachedDownscopedAccessToken.access_token,\n            token_type: 'Bearer',\n            id_token: null,\n        });\n        // Return the cached access token.\n        return this.cachedDownscopedAccessToken;\n    }\n    /**\n     * Returns whether the provided credentials are expired or not.\n     * If there is no expiry time, assumes the token is not expired or expiring.\n     * @param downscopedAccessToken The credentials to check for expiration.\n     * @return Whether the credentials are expired or not.\n     */\n    isExpired(downscopedAccessToken) {\n        const now = new Date().getTime();\n        return downscopedAccessToken.expiry_date\n            ? now >=\n                downscopedAccessToken.expiry_date - this.eagerRefreshThresholdMillis\n            : false;\n    }\n}\nexports.DownscopedClient = DownscopedClient;\n","\"use strict\";\n// Copyright 2024 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PassThroughClient = void 0;\nconst authclient_1 = require(\"./authclient\");\n/**\n * An AuthClient without any Authentication information. Useful for:\n * - Anonymous access\n * - Local Emulators\n * - Testing Environments\n *\n */\nclass PassThroughClient extends authclient_1.AuthClient {\n    /**\n     * Creates a request without any authentication headers or checks.\n     *\n     * @remarks\n     *\n     * In testing environments it may be useful to change the provided\n     * {@link AuthClient.transporter} for any desired request overrides/handling.\n     *\n     * @param opts\n     * @returns The response of the request.\n     */\n    async request(opts) {\n        return this.transporter.request(opts);\n    }\n    /**\n     * A required method of the base class.\n     * Always will return an empty object.\n     *\n     * @returns {}\n     */\n    async getAccessToken() {\n        return {};\n    }\n    /**\n     * A required method of the base class.\n     * Always will return an empty object.\n     *\n     * @returns {}\n     */\n    async getRequestHeaders() {\n        return {};\n    }\n}\nexports.PassThroughClient = PassThroughClient;\nconst a = new PassThroughClient();\na.getAccessToken();\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.GoogleAuth = exports.auth = exports.DefaultTransporter = exports.PassThroughClient = exports.ExecutableError = exports.PluggableAuthClient = exports.DownscopedClient = exports.BaseExternalAccountClient = exports.ExternalAccountClient = exports.IdentityPoolClient = exports.AwsRequestSigner = exports.AwsClient = exports.UserRefreshClient = exports.LoginTicket = exports.ClientAuthentication = exports.OAuth2Client = exports.CodeChallengeMethod = exports.Impersonated = exports.JWT = exports.JWTAccess = exports.IdTokenClient = exports.IAMAuth = exports.GCPEnv = exports.Compute = exports.DEFAULT_UNIVERSE = exports.AuthClient = exports.gaxios = exports.gcpMetadata = void 0;\n// Copyright 2017 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nconst googleauth_1 = require(\"./auth/googleauth\");\nObject.defineProperty(exports, \"GoogleAuth\", { enumerable: true, get: function () { return googleauth_1.GoogleAuth; } });\n// Export common deps to ensure types/instances are the exact match. Useful\n// for consistently configuring the library across versions.\nexports.gcpMetadata = require(\"gcp-metadata\");\nexports.gaxios = require(\"gaxios\");\nvar authclient_1 = require(\"./auth/authclient\");\nObject.defineProperty(exports, \"AuthClient\", { enumerable: true, get: function () { return authclient_1.AuthClient; } });\nObject.defineProperty(exports, \"DEFAULT_UNIVERSE\", { enumerable: true, get: function () { return authclient_1.DEFAULT_UNIVERSE; } });\nvar computeclient_1 = require(\"./auth/computeclient\");\nObject.defineProperty(exports, \"Compute\", { enumerable: true, get: function () { return computeclient_1.Compute; } });\nvar envDetect_1 = require(\"./auth/envDetect\");\nObject.defineProperty(exports, \"GCPEnv\", { enumerable: true, get: function () { return envDetect_1.GCPEnv; } });\nvar iam_1 = require(\"./auth/iam\");\nObject.defineProperty(exports, \"IAMAuth\", { enumerable: true, get: function () { return iam_1.IAMAuth; } });\nvar idtokenclient_1 = require(\"./auth/idtokenclient\");\nObject.defineProperty(exports, \"IdTokenClient\", { enumerable: true, get: function () { return idtokenclient_1.IdTokenClient; } });\nvar jwtaccess_1 = require(\"./auth/jwtaccess\");\nObject.defineProperty(exports, \"JWTAccess\", { enumerable: true, get: function () { return jwtaccess_1.JWTAccess; } });\nvar jwtclient_1 = require(\"./auth/jwtclient\");\nObject.defineProperty(exports, \"JWT\", { enumerable: true, get: function () { return jwtclient_1.JWT; } });\nvar impersonated_1 = require(\"./auth/impersonated\");\nObject.defineProperty(exports, \"Impersonated\", { enumerable: true, get: function () { return impersonated_1.Impersonated; } });\nvar oauth2client_1 = require(\"./auth/oauth2client\");\nObject.defineProperty(exports, \"CodeChallengeMethod\", { enumerable: true, get: function () { return oauth2client_1.CodeChallengeMethod; } });\nObject.defineProperty(exports, \"OAuth2Client\", { enumerable: true, get: function () { return oauth2client_1.OAuth2Client; } });\nObject.defineProperty(exports, \"ClientAuthentication\", { enumerable: true, get: function () { return oauth2client_1.ClientAuthentication; } });\nvar loginticket_1 = require(\"./auth/loginticket\");\nObject.defineProperty(exports, \"LoginTicket\", { enumerable: true, get: function () { return loginticket_1.LoginTicket; } });\nvar refreshclient_1 = require(\"./auth/refreshclient\");\nObject.defineProperty(exports, \"UserRefreshClient\", { enumerable: true, get: function () { return refreshclient_1.UserRefreshClient; } });\nvar awsclient_1 = require(\"./auth/awsclient\");\nObject.defineProperty(exports, \"AwsClient\", { enumerable: true, get: function () { return awsclient_1.AwsClient; } });\nvar awsrequestsigner_1 = require(\"./auth/awsrequestsigner\");\nObject.defineProperty(exports, \"AwsRequestSigner\", { enumerable: true, get: function () { return awsrequestsigner_1.AwsRequestSigner; } });\nvar identitypoolclient_1 = require(\"./auth/identitypoolclient\");\nObject.defineProperty(exports, \"IdentityPoolClient\", { enumerable: true, get: function () { return identitypoolclient_1.IdentityPoolClient; } });\nvar externalclient_1 = require(\"./auth/externalclient\");\nObject.defineProperty(exports, \"ExternalAccountClient\", { enumerable: true, get: function () { return externalclient_1.ExternalAccountClient; } });\nvar baseexternalclient_1 = require(\"./auth/baseexternalclient\");\nObject.defineProperty(exports, \"BaseExternalAccountClient\", { enumerable: true, get: function () { return baseexternalclient_1.BaseExternalAccountClient; } });\nvar downscopedclient_1 = require(\"./auth/downscopedclient\");\nObject.defineProperty(exports, \"DownscopedClient\", { enumerable: true, get: function () { return downscopedclient_1.DownscopedClient; } });\nvar pluggable_auth_client_1 = require(\"./auth/pluggable-auth-client\");\nObject.defineProperty(exports, \"PluggableAuthClient\", { enumerable: true, get: function () { return pluggable_auth_client_1.PluggableAuthClient; } });\nObject.defineProperty(exports, \"ExecutableError\", { enumerable: true, get: function () { return pluggable_auth_client_1.ExecutableError; } });\nvar passthrough_1 = require(\"./auth/passthrough\");\nObject.defineProperty(exports, \"PassThroughClient\", { enumerable: true, get: function () { return passthrough_1.PassThroughClient; } });\nvar transporters_1 = require(\"./transporters\");\nObject.defineProperty(exports, \"DefaultTransporter\", { enumerable: true, get: function () { return transporters_1.DefaultTransporter; } });\nconst auth = new googleauth_1.GoogleAuth();\nexports.auth = auth;\n","/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport const GENERATE_CONTENT_METHOD = 'generateContent';\nexport const STREAMING_GENERATE_CONTENT_METHOD = 'streamGenerateContent';\nexport const COUNT_TOKENS_METHOD = 'countTokens';\nexport const USER_ROLE = 'user';\nexport const MODEL_ROLE = 'model';\nexport const SYSTEM_ROLE = 'system';\nconst USER_AGENT_PRODUCT = 'model-builder';\nconst CLIENT_LIBRARY_VERSION = '1.10.0'; // x-release-please-version\nconst CLIENT_LIBRARY_LANGUAGE = `grpc-node/${CLIENT_LIBRARY_VERSION}`;\nexport const USER_AGENT = `${USER_AGENT_PRODUCT}/${CLIENT_LIBRARY_VERSION} ${CLIENT_LIBRARY_LANGUAGE}`;\nexport const CREDENTIAL_ERROR_MESSAGE =\n  '\\nUnable to authenticate your request\\\n        \\nDepending on your run time environment, you can get authentication by\\\n        \\n- if in local instance or cloud shell: `!gcloud auth login`\\\n        \\n- if in Colab:\\\n        \\n    -`from google.colab import auth`\\\n        \\n    -`auth.authenticate_user()`\\\n        \\n- if in service account or other: please follow guidance in https://cloud.google.com/docs/authentication';\n","/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport * as constants from './constants';\n","/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Content} from '../types/content';\nimport {constants} from '../util';\n\nexport function formulateSystemInstructionIntoContent(\n  systemInstruction: string | Content\n): Content {\n  if (typeof systemInstruction === 'string') {\n    return {\n      role: constants.SYSTEM_ROLE,\n      parts: [{text: systemInstruction}],\n    } as Content;\n  }\n  systemInstruction.role = constants.SYSTEM_ROLE;\n  return systemInstruction;\n}\n","/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * GoogleAuthError is thrown when there is authentication issue with the request\n */\nclass GoogleAuthError extends Error {\n  public readonly stackTrace?: Error;\n  constructor(message: string, stackTrace?: Error) {\n    super(message, {cause: stackTrace});\n    this.message = constructErrorMessage('GoogleAuthError', message);\n    this.name = 'GoogleAuthError';\n    this.stackTrace = stackTrace;\n  }\n}\n\n/**\n * ClientError is thrown when http 4XX status is received.\n * For details please refer to https://developer.mozilla.org/en-US/docs/Web/HTTP/Status#client_error_responses\n */\nclass ClientError extends Error {\n  public readonly stackTrace?: Error;\n  constructor(message: string, stackTrace?: Error) {\n    super(message, {cause: stackTrace});\n    this.message = constructErrorMessage('ClientError', message);\n    this.name = 'ClientError';\n    this.stackTrace = stackTrace;\n  }\n}\n\n/**\n * Google API Error Details object that may be included in an error response.\n * See https://cloud.google.com/apis/design/errors\n * @public\n */\nexport declare interface ErrorDetails {\n  '@type'?: string;\n  reason?: string;\n  domain?: string;\n  metadata?: Record<string, unknown>;\n  [key: string]: unknown;\n}\n\n/**\n * GoogleApiError is thrown when http 4XX status is received.\n * See https://cloud.google.com/apis/design/errors\n */\nclass GoogleApiError extends Error {\n  constructor(\n    message: string,\n    public code?: number,\n    public status?: string,\n    public errorDetails?: ErrorDetails[]\n  ) {\n    super(message);\n  }\n}\n\n/**\n * GoogleGenerativeAIError is thrown when http response is not ok and status code is not 4XX\n * For details please refer to https://developer.mozilla.org/en-US/docs/Web/HTTP/Status\n */\nclass GoogleGenerativeAIError extends Error {\n  public readonly stackTrace?: Error;\n  constructor(message: string, stackTrace?: Error) {\n    super(message, {cause: stackTrace});\n    this.message = constructErrorMessage('GoogleGenerativeAIError', message);\n    this.name = 'GoogleGenerativeAIError';\n    this.stackTrace = stackTrace;\n  }\n}\n\n/**\n * IllegalArgumentError is thrown when the request or operation is invalid\n */\nclass IllegalArgumentError extends Error {\n  public readonly stackTrace?: Error;\n  constructor(message: string, stackTrace?: Error) {\n    super(message, {cause: stackTrace});\n    this.message = constructErrorMessage('IllegalArgumentError', message);\n    this.name = 'IllegalArgumentError';\n    this.stackTrace = stackTrace;\n  }\n}\n\nfunction constructErrorMessage(\n  exceptionClass: string,\n  message: string\n): string {\n  return `[VertexAI.${exceptionClass}]: ${message}`;\n}\n\nexport {\n  ClientError,\n  GoogleApiError,\n  GoogleAuthError,\n  GoogleGenerativeAIError,\n  IllegalArgumentError,\n};\n","/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  CitationMetadata,\n  Content,\n  CountTokensResponse,\n  GenerateContentCandidate,\n  GenerateContentResponse,\n  GenerateContentResult,\n  GroundingMetadata,\n  StreamGenerateContentResult,\n} from '../types/content';\nimport {constants} from '../util';\nimport {\n  ClientError,\n  GoogleApiError,\n  GoogleGenerativeAIError,\n} from '../types/errors';\n\nexport async function throwErrorIfNotOK(response: Response | undefined) {\n  if (response === undefined) {\n    throw new GoogleGenerativeAIError('response is undefined');\n  }\n  if (!response.ok) {\n    const status: number = response.status;\n    const statusText: string = response.statusText;\n    const errorBody = await response.json();\n    const errorMessage = `got status: ${status} ${statusText}. ${JSON.stringify(\n      errorBody\n    )}`;\n    if (status >= 400 && status < 500) {\n      const error = new ClientError(\n        errorMessage,\n        new GoogleApiError(\n          errorBody.error.message,\n          errorBody.error.code,\n          errorBody.error.status,\n          errorBody.error.details\n        )\n      );\n      throw error;\n    }\n    throw new GoogleGenerativeAIError(errorMessage);\n  }\n}\n\nconst responseLineRE = /^data: (.*)(?:\\n\\n|\\r\\r|\\r\\n\\r\\n)/;\n\nasync function* generateResponseSequence(\n  stream: ReadableStream<GenerateContentResponse>\n): AsyncGenerator<GenerateContentResponse> {\n  const reader = stream.getReader();\n  while (true) {\n    const {value, done} = await reader.read();\n    if (done) {\n      break;\n    }\n    yield addMissingIndexAndRole(value);\n  }\n}\n\n/**\n * Process a response.body stream from the backend and return an\n * iterator that provides one complete GenerateContentResponse at a time\n * and a promise that resolves with a single aggregated\n * GenerateContentResponse.\n *\n * @param response - Response from a fetch call\n * @ignore\n */\nexport async function processStream(\n  response: Response | undefined\n): Promise<StreamGenerateContentResult> {\n  if (response === undefined) {\n    throw new GoogleGenerativeAIError(\n      'Error processing stream because response === undefined'\n    );\n  }\n  if (!response.body) {\n    throw new GoogleGenerativeAIError(\n      'Error processing stream because response.body not found'\n    );\n  }\n  const inputStream = response.body!.pipeThrough(\n    new TextDecoderStream('utf8', {fatal: true})\n  );\n  const responseStream = getResponseStream(\n    inputStream\n  ) as ReadableStream<GenerateContentResponse>;\n  const [stream1, stream2] = responseStream.tee();\n  return Promise.resolve({\n    stream: generateResponseSequence(stream1),\n    response: getResponsePromise(stream2),\n  });\n}\n\nasync function getResponsePromise(\n  stream: ReadableStream<GenerateContentResponse>\n): Promise<GenerateContentResponse> {\n  const allResponses: GenerateContentResponse[] = [];\n  const reader = stream.getReader();\n  // eslint-disable-next-line no-constant-condition\n  while (true) {\n    const {done, value} = await reader.read();\n    if (done) {\n      return aggregateResponses(allResponses);\n    }\n    allResponses.push(value);\n  }\n}\n\n/**\n * Reads a raw stream from the fetch response and join incomplete\n * chunks, returning a new stream that provides a single complete\n * GenerateContentResponse in each iteration.\n * @ignore\n */\nfunction getResponseStream(\n  inputStream: ReadableStream<string>\n): ReadableStream<unknown> {\n  const reader = inputStream.getReader();\n  const stream = new ReadableStream<unknown>({\n    start(controller) {\n      let currentText = '';\n      return pump();\n      function pump(): Promise<(() => Promise<void>) | undefined> {\n        return reader.read().then(({value, done}) => {\n          if (done) {\n            if (currentText.trim()) {\n              controller.error(\n                new GoogleGenerativeAIError(\n                  `Failed to parse final chunk of stream: ${currentText}`\n                )\n              );\n              return;\n            }\n            controller.close();\n            return;\n          }\n\n          currentText += value;\n          let match = currentText.match(responseLineRE);\n          let parsedResponse: unknown;\n          while (match) {\n            try {\n              parsedResponse = JSON.parse(match[1]);\n            } catch (e) {\n              controller.error(\n                new GoogleGenerativeAIError(\n                  `Error parsing JSON response from stream chunk: \"${match[1]}\"`\n                )\n              );\n              return;\n            }\n            controller.enqueue(parsedResponse);\n            currentText = currentText.substring(match[0].length);\n            match = currentText.match(responseLineRE);\n          }\n          return pump();\n        });\n      }\n    },\n  });\n  return stream;\n}\n\n/**\n * Aggregates an array of `GenerateContentResponse`s into a single\n * GenerateContentResponse.\n * @ignore\n * @VisibleForTesting\n */\nexport function aggregateResponses(\n  responses: GenerateContentResponse[]\n): GenerateContentResponse {\n  const lastResponse = responses[responses.length - 1];\n\n  if (lastResponse === undefined) {\n    throw new GoogleGenerativeAIError(\n      'Error aggregating stream chunks because the final response in stream chunk is undefined'\n    );\n  }\n\n  const aggregatedResponse: GenerateContentResponse = {};\n\n  if (lastResponse.promptFeedback) {\n    aggregatedResponse.promptFeedback = lastResponse.promptFeedback;\n  }\n  if (lastResponse.usageMetadata) {\n    aggregatedResponse.usageMetadata = lastResponse.usageMetadata;\n  }\n\n  for (const response of responses) {\n    if (!response.candidates || response.candidates.length === 0) {\n      continue;\n    }\n    for (let i = 0; i < response.candidates.length; i++) {\n      if (!aggregatedResponse.candidates) {\n        aggregatedResponse.candidates = [];\n      }\n      if (!aggregatedResponse.candidates[i]) {\n        aggregatedResponse.candidates[i] = {\n          index: response.candidates[i].index ?? i,\n          content: {\n            role: response.candidates[i].content?.role ?? constants.MODEL_ROLE,\n            parts: [{text: ''}],\n          },\n        } as GenerateContentCandidate;\n      }\n      const citationMetadataAggregated: CitationMetadata | undefined =\n        aggregateCitationMetadataForCandidate(\n          response.candidates[i],\n          aggregatedResponse.candidates[i]\n        );\n      if (citationMetadataAggregated) {\n        aggregatedResponse.candidates[i].citationMetadata =\n          citationMetadataAggregated;\n      }\n      const finishResonOfChunk = response.candidates[i].finishReason;\n      if (finishResonOfChunk) {\n        aggregatedResponse.candidates[i].finishReason =\n          response.candidates[i].finishReason;\n      }\n      const finishMessageOfChunk = response.candidates[i].finishMessage;\n      if (finishMessageOfChunk) {\n        aggregatedResponse.candidates[i].finishMessage = finishMessageOfChunk;\n      }\n      const safetyRatingsOfChunk = response.candidates[i].safetyRatings;\n      if (safetyRatingsOfChunk) {\n        aggregatedResponse.candidates[i].safetyRatings = safetyRatingsOfChunk;\n      }\n      if (\n        response.candidates[i].content &&\n        response.candidates[i].content.parts &&\n        response.candidates[i].content.parts.length > 0\n      ) {\n        const {parts} = aggregatedResponse.candidates[i].content;\n        for (const part of response.candidates[i].content.parts) {\n          // NOTE: cannot have text and functionCall both in the same part.\n          // add functionCall(s) to new parts.\n          if (part.text) {\n            parts[0].text += part.text;\n          }\n          if (part.functionCall) {\n            parts.push({functionCall: part.functionCall});\n          }\n        }\n      }\n      const groundingMetadataAggregated: GroundingMetadata | undefined =\n        aggregateGroundingMetadataForCandidate(\n          response.candidates[i],\n          aggregatedResponse.candidates[i]\n        );\n      if (groundingMetadataAggregated) {\n        aggregatedResponse.candidates[i].groundingMetadata =\n          groundingMetadataAggregated;\n      }\n    }\n  }\n  if (aggregatedResponse.candidates?.length) {\n    aggregatedResponse.candidates.forEach(candidate => {\n      if (\n        candidate.content.parts.length > 1 &&\n        candidate.content.parts[0].text === ''\n      ) {\n        candidate.content.parts.shift(); // remove empty text parameter\n      }\n    });\n  }\n  return aggregatedResponse;\n}\n\nfunction aggregateCitationMetadataForCandidate(\n  candidateChunk: GenerateContentCandidate,\n  aggregatedCandidate: GenerateContentCandidate\n): CitationMetadata | undefined {\n  if (!candidateChunk.citationMetadata) {\n    return;\n  }\n  const emptyCitationMetadata: CitationMetadata = {\n    citations: [],\n  };\n  const citationMetadataAggregated: CitationMetadata =\n    aggregatedCandidate.citationMetadata ?? emptyCitationMetadata;\n  const citationMetadataChunk: CitationMetadata =\n    candidateChunk.citationMetadata!;\n  if (citationMetadataChunk.citations) {\n    citationMetadataAggregated.citations =\n      citationMetadataAggregated.citations!.concat(\n        citationMetadataChunk.citations\n      );\n  }\n  return citationMetadataAggregated;\n}\n\nfunction aggregateGroundingMetadataForCandidate(\n  candidateChunk: GenerateContentCandidate,\n  aggregatedCandidate: GenerateContentCandidate\n): GroundingMetadata | undefined {\n  if (!candidateChunk.groundingMetadata) {\n    return;\n  }\n  const emptyGroundingMetadata: GroundingMetadata = {\n    webSearchQueries: [],\n    retrievalQueries: [],\n    groundingChunks: [],\n    groundingSupports: [],\n  };\n  const groundingMetadataAggregated: GroundingMetadata =\n    aggregatedCandidate.groundingMetadata ?? emptyGroundingMetadata;\n  const groundingMetadataChunk: GroundingMetadata =\n    candidateChunk.groundingMetadata!;\n  if (groundingMetadataChunk.webSearchQueries) {\n    groundingMetadataAggregated.webSearchQueries =\n      groundingMetadataAggregated.webSearchQueries!.concat(\n        groundingMetadataChunk.webSearchQueries\n      );\n  }\n  if (groundingMetadataChunk.retrievalQueries) {\n    groundingMetadataAggregated.retrievalQueries =\n      groundingMetadataAggregated.retrievalQueries!.concat(\n        groundingMetadataChunk.retrievalQueries\n      );\n  }\n  if (groundingMetadataChunk.groundingChunks) {\n    groundingMetadataAggregated.groundingChunks =\n      groundingMetadataAggregated.groundingChunks!.concat(\n        groundingMetadataChunk.groundingChunks\n      );\n  }\n  if (groundingMetadataChunk.groundingSupports) {\n    groundingMetadataAggregated.groundingSupports =\n      groundingMetadataAggregated.groundingSupports!.concat(\n        groundingMetadataChunk.groundingSupports\n      );\n  }\n  if (groundingMetadataChunk.searchEntryPoint) {\n    groundingMetadataAggregated.searchEntryPoint =\n      groundingMetadataChunk.searchEntryPoint;\n  }\n  return groundingMetadataAggregated;\n}\n\nfunction addMissingIndexAndRole(\n  response: GenerateContentResponse\n): GenerateContentResponse {\n  const generateContentResponse = response as GenerateContentResponse;\n  if (\n    generateContentResponse.candidates &&\n    generateContentResponse.candidates.length > 0\n  ) {\n    generateContentResponse.candidates.forEach((candidate, index) => {\n      if (candidate.index === undefined) {\n        generateContentResponse.candidates![index].index = index;\n      }\n\n      if (candidate.content === undefined) {\n        generateContentResponse.candidates![index].content = {} as Content;\n      }\n\n      if (candidate.content.role === undefined) {\n        generateContentResponse.candidates![index].content.role =\n          constants.MODEL_ROLE;\n      }\n    });\n  }\n\n  return generateContentResponse;\n}\n\n/**\n * Process model responses from generateContent\n * @ignore\n */\nexport async function processUnary(\n  response: Response | undefined\n): Promise<GenerateContentResult> {\n  if (response !== undefined) {\n    // ts-ignore\n    const responseJson = await response.json();\n    const generateContentResponse = addMissingIndexAndRole(responseJson);\n    return Promise.resolve({\n      response: generateContentResponse,\n    });\n  }\n\n  return Promise.resolve({\n    response: {} as GenerateContentResponse,\n  });\n}\n\n/**\n * Process model responses from countTokens\n * @ignore\n */\nexport async function processCountTokenResponse(\n  response: Response | undefined\n): Promise<CountTokensResponse> {\n  if (response) {\n    // ts-ignore\n    return response.json();\n  }\n\n  return Promise.resolve({} as CountTokensResponse);\n}\n","/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst API_BASE_PATH = 'aiplatform.googleapis.com';\nconst GOOGLE_INTERNAL_ENDPOINT = 'googleapis.com';\n\nconst AUTHORIZATION_HEADER = 'Authorization';\nconst CONTENT_TYPE_HEADER = 'Content-Type';\nconst USER_AGENT_HEADER = 'User-Agent';\nconst X_GOOG_API_CLIENT_HEADER = 'X-Goog-Api-Client';\nconst SERVER_RESERVED_HEADERS = [AUTHORIZATION_HEADER, CONTENT_TYPE_HEADER];\n\nimport {\n  GenerateContentRequest,\n  CountTokensRequest,\n  RequestOptions,\n} from '../types/content';\nimport {ClientError} from '../types/errors';\nimport * as constants from '../util/constants';\n\n/**\n * Makes a POST request to a Vertex service\n * @ignore\n */\nexport async function postRequest({\n  region,\n  resourcePath,\n  resourceMethod,\n  token,\n  data,\n  apiEndpoint,\n  requestOptions,\n  apiVersion = 'v1',\n}: {\n  region: string;\n  resourcePath: string;\n  resourceMethod: string;\n  token: string | null | undefined;\n  data: GenerateContentRequest | CountTokensRequest;\n  apiEndpoint?: string;\n  requestOptions?: RequestOptions;\n  apiVersion?: string;\n}): Promise<Response | undefined> {\n  const vertexBaseEndpoint = apiEndpoint ?? `${region}-${API_BASE_PATH}`;\n\n  let vertexEndpoint = `https://${vertexBaseEndpoint}/${apiVersion}/${resourcePath}:${resourceMethod}`;\n\n  // Use server sent events for streamGenerateContent\n  if (resourceMethod === constants.STREAMING_GENERATE_CONTENT_METHOD) {\n    vertexEndpoint += '?alt=sse';\n  }\n  const necessaryHeaders = new Headers({\n    [AUTHORIZATION_HEADER]: `Bearer ${token}`,\n    [CONTENT_TYPE_HEADER]: 'application/json',\n    [USER_AGENT_HEADER]: constants.USER_AGENT,\n  });\n  const totalHeaders: Headers = getExtraHeaders(\n    vertexBaseEndpoint,\n    necessaryHeaders,\n    requestOptions\n  );\n  return fetch(vertexEndpoint, {\n    ...getFetchOptions(requestOptions),\n    method: 'POST',\n    headers: totalHeaders,\n    body: JSON.stringify(data),\n  });\n}\n\nfunction getFetchOptions(requestOptions?: RequestOptions): RequestInit {\n  const fetchOptions = {} as RequestInit;\n  if (\n    !requestOptions ||\n    requestOptions.timeout === undefined ||\n    requestOptions.timeout < 0\n  ) {\n    return fetchOptions;\n  }\n  const abortController = new AbortController();\n  const signal = abortController.signal;\n  setTimeout(() => abortController.abort(), requestOptions.timeout);\n  fetchOptions.signal = signal;\n  return fetchOptions;\n}\n\nfunction stringHasLineBreak(header?: string | null): boolean {\n  if (header === null || header === undefined) {\n    return false;\n  }\n  return header.includes('\\n') || header.includes('\\r');\n}\nfunction headersHasLineBreak(customHeaders?: Headers): boolean {\n  if (!customHeaders) {\n    return false;\n  }\n  for (const [key, value] of customHeaders.entries()) {\n    if (stringHasLineBreak(key) || stringHasLineBreak(value)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction getExtraHeaders(\n  vertexBaseEndpoint: string,\n  necessaryHeaders: Headers,\n  requestOptions?: RequestOptions\n): Headers {\n  if (stringHasLineBreak(requestOptions?.apiClient)) {\n    throw new ClientError(\n      'Found line break in apiClient request option field, please remove ' +\n        'the line break and try again.'\n    );\n  }\n  if (headersHasLineBreak(requestOptions?.customHeaders)) {\n    throw new ClientError(\n      'Found line break in customerHeaders request option field, please remove ' +\n        'the line break and try again.'\n    );\n  }\n  const totalHeaders: Headers = new Headers(necessaryHeaders);\n  const customHeaders = requestOptions?.customHeaders ?? new Headers();\n  for (const [key, val] of customHeaders.entries()) {\n    totalHeaders.append(key, val);\n  }\n  if (requestOptions?.apiClient) {\n    totalHeaders.append(X_GOOG_API_CLIENT_HEADER, requestOptions?.apiClient);\n  }\n\n  // Resolve header conflicts.\n  let goldenHeaders: Headers;\n  if (vertexBaseEndpoint.endsWith(GOOGLE_INTERNAL_ENDPOINT)) {\n    goldenHeaders = necessaryHeaders;\n  } else {\n    goldenHeaders = customHeaders;\n  }\n  for (const header of SERVER_RESERVED_HEADERS) {\n    if (goldenHeaders.has(header)) {\n      totalHeaders.set(header, goldenHeaders.get(header)!);\n    }\n  }\n  return totalHeaders;\n}\n","/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  GenerateContentRequest,\n  GenerationConfig,\n  RetrievalTool,\n  SafetySetting,\n  Tool,\n} from '../types/content';\nimport {ClientError} from '../types/errors';\nimport * as constants from '../util/constants';\n\nexport function formatContentRequest(\n  request: GenerateContentRequest | string,\n  generationConfig?: GenerationConfig,\n  safetySettings?: SafetySetting[]\n): GenerateContentRequest {\n  if (typeof request === 'string') {\n    return {\n      contents: [{role: constants.USER_ROLE, parts: [{text: request}]}],\n      generationConfig: generationConfig,\n      safetySettings: safetySettings,\n    };\n  } else {\n    return request;\n  }\n}\n\nexport function validateGenerateContentRequest(\n  request: GenerateContentRequest\n) {\n  if (hasVertexAISearch(request) && hasVertexRagStore(request)) {\n    throw new ClientError(\n      'Found both vertexAiSearch and vertexRagStore field are set in tool. Either set vertexAiSearch or vertexRagStore.'\n    );\n  }\n}\n\nexport function validateGenerationConfig(\n  generationConfig: GenerationConfig\n): GenerationConfig {\n  if ('topK' in generationConfig) {\n    if (!(generationConfig.topK! > 0) || !(generationConfig.topK! <= 40)) {\n      delete generationConfig.topK;\n    }\n  }\n  return generationConfig;\n}\n\nexport function getApiVersion(\n  request: GenerateContentRequest\n): 'v1' | 'v1beta1' {\n  return hasVertexRagStore(request) || hasCachedContent(request)\n    ? 'v1beta1'\n    : 'v1';\n}\n\nexport function hasVertexRagStore(request: GenerateContentRequest): boolean {\n  for (const tool of request?.tools ?? []) {\n    const retrieval = (tool as RetrievalTool).retrieval;\n    if (!retrieval) continue;\n    if (retrieval.vertexRagStore) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction hasCachedContent(request: GenerateContentRequest): boolean {\n  return !!request.cachedContent;\n}\n\nexport function hasVertexAISearch(request: GenerateContentRequest): boolean {\n  for (const tool of request?.tools ?? []) {\n    const retrieval = (tool as RetrievalTool).retrieval;\n    if (!retrieval) continue;\n    if (retrieval.vertexAiSearch) {\n      return true;\n    }\n  }\n  return false;\n}\n","/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  GenerateContentRequest,\n  GenerateContentResult,\n  GenerationConfig,\n  RequestOptions,\n  SafetySetting,\n  StreamGenerateContentResult,\n  Tool,\n} from '../types/content';\nimport {GoogleGenerativeAIError} from '../types/errors';\nimport {ToolConfig} from '../types/tool';\nimport * as constants from '../util/constants';\n\nimport {\n  processUnary,\n  processStream,\n  throwErrorIfNotOK,\n} from './post_fetch_processing';\nimport {postRequest} from './post_request';\nimport {\n  formatContentRequest,\n  validateGenerateContentRequest,\n  validateGenerationConfig,\n  hasVertexRagStore,\n  getApiVersion,\n} from './pre_fetch_processing';\n\n/**\n * Make a async call to generate content.\n * @param request A GenerateContentRequest object with the request contents.\n * @returns The GenerateContentResponse object with the response candidates.\n */\nexport async function generateContent(\n  location: string,\n  resourcePath: string,\n  token: Promise<string | null | undefined>,\n  request: GenerateContentRequest | string,\n  apiEndpoint?: string,\n  generationConfig?: GenerationConfig,\n  safetySettings?: SafetySetting[],\n  tools?: Tool[],\n  toolConfig?: ToolConfig,\n  requestOptions?: RequestOptions\n): Promise<GenerateContentResult> {\n  request = formatContentRequest(request, generationConfig, safetySettings);\n\n  validateGenerateContentRequest(request);\n\n  if (request.generationConfig) {\n    request.generationConfig = validateGenerationConfig(\n      request.generationConfig\n    );\n  }\n\n  const generateContentRequest: GenerateContentRequest = {\n    contents: request.contents,\n    systemInstruction: request.systemInstruction,\n    cachedContent: request.cachedContent,\n    generationConfig: request.generationConfig ?? generationConfig,\n    safetySettings: request.safetySettings ?? safetySettings,\n    tools: request.tools ?? tools,\n    toolConfig: request.toolConfig ?? toolConfig,\n    labels: request.labels,\n  };\n  const response: Response | undefined = await postRequest({\n    region: location,\n    resourcePath,\n    resourceMethod: constants.GENERATE_CONTENT_METHOD,\n    token: await token,\n    data: generateContentRequest,\n    apiEndpoint,\n    requestOptions,\n    apiVersion: getApiVersion(request),\n  }).catch(e => {\n    throw new GoogleGenerativeAIError('exception posting request to model', e);\n  });\n  await throwErrorIfNotOK(response).catch(e => {\n    throw e;\n  });\n  return processUnary(response);\n}\n\n/**\n * Make an async stream request to generate content. The response will be\n * returned in stream.\n * @param {GenerateContentRequest} request - {@link GenerateContentRequest}\n * @returns {Promise<StreamGenerateContentResult>} Promise of {@link\n *     StreamGenerateContentResult}\n */\nexport async function generateContentStream(\n  location: string,\n  resourcePath: string,\n  token: Promise<string | null | undefined>,\n  request: GenerateContentRequest | string,\n  apiEndpoint?: string,\n  generationConfig?: GenerationConfig,\n  safetySettings?: SafetySetting[],\n  tools?: Tool[],\n  toolConfig?: ToolConfig,\n  requestOptions?: RequestOptions\n): Promise<StreamGenerateContentResult> {\n  request = formatContentRequest(request, generationConfig, safetySettings);\n  validateGenerateContentRequest(request);\n\n  if (request.generationConfig) {\n    request.generationConfig = validateGenerationConfig(\n      request.generationConfig\n    );\n  }\n\n  const generateContentRequest: GenerateContentRequest = {\n    contents: request.contents,\n    systemInstruction: request.systemInstruction,\n    cachedContent: request.cachedContent,\n    generationConfig: request.generationConfig ?? generationConfig,\n    safetySettings: request.safetySettings ?? safetySettings,\n    tools: request.tools ?? tools,\n    toolConfig: request.toolConfig ?? toolConfig,\n    labels: request.labels,\n  };\n  const response = await postRequest({\n    region: location,\n    resourcePath,\n    resourceMethod: constants.STREAMING_GENERATE_CONTENT_METHOD,\n    token: await token,\n    data: generateContentRequest,\n    apiEndpoint,\n    requestOptions,\n    apiVersion: getApiVersion(request),\n  }).catch(e => {\n    throw new GoogleGenerativeAIError('exception posting request', e);\n  });\n  await throwErrorIfNotOK(response).catch(e => {\n    throw e;\n  });\n  return processStream(response);\n}\n","/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* tslint:disable */\nimport {GoogleAuth} from 'google-auth-library';\n\nimport {formulateSystemInstructionIntoContent} from '../functions/util';\nimport {\n  generateContent,\n  generateContentStream,\n} from '../functions/generate_content';\nimport {\n  Content,\n  GenerateContentRequest,\n  GenerateContentResult,\n  GenerationConfig,\n  Part,\n  RequestOptions,\n  SafetySetting,\n  StartChatSessionRequest,\n  StreamGenerateContentResult,\n  Tool,\n} from '../types/content';\nimport {ToolConfig} from '../types';\nimport {ClientError, GoogleAuthError} from '../types/errors';\nimport {constants} from '../util';\n\n/**\n * The `ChatSession` class is used to make multiturn send message requests. You\n * can instantiate this class by using the `startChat` method in the\n * `GenerativeModel` class. The `sendMessage` method makes an async call to get\n * the response of a chat message at at once. The `sendMessageStream` method\n * makes an async call to stream the response of a chat message as it's being\n * generated.\n */\nexport class ChatSession {\n  private readonly project: string;\n  private readonly location: string;\n  private historyInternal: Content[];\n  private sendStreamPromise: Promise<void> = Promise.resolve();\n  private readonly resourcePath: string;\n  private readonly googleAuth: GoogleAuth;\n  protected readonly requestOptions?: RequestOptions;\n  private readonly generationConfig?: GenerationConfig;\n  private readonly safetySettings?: SafetySetting[];\n  private readonly tools?: Tool[];\n  private readonly toolConfig?: ToolConfig;\n  private readonly apiEndpoint?: string;\n  private readonly systemInstruction?: Content;\n\n  async getHistory(): Promise<Content[]> {\n    return Promise.resolve(this.historyInternal);\n  }\n\n  /**\n   * @constructor\n   * @param request - {@link StartChatSessionRequest}\n   */\n  constructor(\n    request: StartChatSessionRequest,\n    requestOptions?: RequestOptions\n  ) {\n    this.project = request.project;\n    this.location = request.location;\n    this.googleAuth = request.googleAuth;\n    this.resourcePath = request.resourcePath;\n    this.historyInternal = request.history ?? [];\n    this.generationConfig = request.generationConfig;\n    this.safetySettings = request.safetySettings;\n    this.tools = request.tools;\n    this.toolConfig = request.toolConfig;\n    this.apiEndpoint = request.apiEndpoint;\n    this.requestOptions = requestOptions ?? {};\n    if (request.systemInstruction) {\n      this.systemInstruction = formulateSystemInstructionIntoContent(\n        request.systemInstruction\n      );\n    }\n  }\n\n  /**\n   * Gets access token from GoogleAuth. Throws {@link GoogleAuthError} when\n   * fails.\n   * @returns Promise of token.\n   */\n  private fetchToken(): Promise<string | null | undefined> {\n    const tokenPromise = this.googleAuth.getAccessToken().catch(e => {\n      throw new GoogleAuthError(constants.CREDENTIAL_ERROR_MESSAGE, e);\n    });\n    return tokenPromise;\n  }\n\n  /**\n   * Makes an async call to send chat message.\n   *\n   * The response is returned in {@link\n   * GenerateContentResult.response}.\n   *\n   * @example\n   * ```\n   * const chat = generativeModel.startChat();\n   * const result1 = await chat.sendMessage(\"How can I learn more about Node.js?\");\n   * console.log('Response: ', JSON.stringify(result1.response));\n   *\n   * const result2 = await chat.sendMessage(\"What about python?\");\n   * console.log('Response: ', JSON.stringify(result2.response));\n   * ```\n   *\n   * @param request - send message request.\n   * @returns Promise of {@link GenerateContentResult}.\n   */\n  async sendMessage(\n    request: string | Array<string | Part>\n  ): Promise<GenerateContentResult> {\n    const newContent: Content[] =\n      formulateNewContentFromSendMessageRequest(request);\n    const generateContentRequest: GenerateContentRequest = {\n      contents: this.historyInternal.concat(newContent),\n      safetySettings: this.safetySettings,\n      generationConfig: this.generationConfig,\n      tools: this.tools,\n      toolConfig: this.toolConfig,\n      systemInstruction: this.systemInstruction,\n    };\n\n    const generateContentResult: GenerateContentResult = await generateContent(\n      this.location,\n      this.resourcePath,\n      this.fetchToken(),\n      generateContentRequest,\n      this.apiEndpoint,\n      this.generationConfig,\n      this.safetySettings,\n      this.tools,\n      this.toolConfig,\n      this.requestOptions\n    ).catch(e => {\n      throw e;\n    });\n    const generateContentResponse = await generateContentResult.response;\n    // Only push the latest message to history if the response returns a result\n    if (\n      generateContentResponse.candidates &&\n      generateContentResponse.candidates.length !== 0\n    ) {\n      this.historyInternal = this.historyInternal.concat(newContent);\n      const contentFromModel = generateContentResponse.candidates[0].content;\n      this.historyInternal.push(contentFromModel);\n    }\n\n    return Promise.resolve(generateContentResult);\n  }\n\n  private async appendHistory(\n    streamGenerateContentResultPromise: Promise<StreamGenerateContentResult>,\n    newContent: Content[]\n  ): Promise<void> {\n    const streamGenerateContentResult =\n      await streamGenerateContentResultPromise;\n    const streamGenerateContentResponse =\n      await streamGenerateContentResult.response;\n    // Only push the latest message to history if the response returned a result\n    if (\n      streamGenerateContentResponse.candidates &&\n      streamGenerateContentResponse.candidates.length !== 0\n    ) {\n      this.historyInternal = this.historyInternal.concat(newContent);\n      const contentFromModel =\n        streamGenerateContentResponse.candidates[0].content;\n      this.historyInternal.push(contentFromModel);\n    }\n  }\n\n  /**\n   * Makes an async call to stream send message.\n   *\n   * The response is streamed chunk by chunk in\n   * {@link StreamGenerateContentResult.stream}. The aggregated response is\n   * avaliable in {@link StreamGenerateContentResult.response} after all chunks\n   * are returned.\n   *\n   * @example\n   * ```\n   * const chat = generativeModel.startChat();\n   * const chatInput = \"How can I learn more about Node.js?\";\n   * const result = await chat.sendMessageStream(chatInput);\n   * for await (const item of result.stream) {\n   *   console.log(item.candidates[0].content.parts[0].text);\n   * }\n   * const response = await result.response;\n   * console.log('aggregated response: ', JSON.stringify(result.response));\n   * ```\n   *\n   * @param request - send message request.\n   * @returns Promise of {@link StreamGenerateContentResult}.\n   */\n  async sendMessageStream(\n    request: string | Array<string | Part>\n  ): Promise<StreamGenerateContentResult> {\n    const newContent: Content[] =\n      formulateNewContentFromSendMessageRequest(request);\n    const generateContentrequest: GenerateContentRequest = {\n      contents: this.historyInternal.concat(newContent),\n      safetySettings: this.safetySettings,\n      generationConfig: this.generationConfig,\n      tools: this.tools,\n      toolConfig: this.toolConfig,\n      systemInstruction: this.systemInstruction,\n    };\n\n    const streamGenerateContentResultPromise = generateContentStream(\n      this.location,\n      this.resourcePath,\n      this.fetchToken(),\n      generateContentrequest,\n      this.apiEndpoint,\n      this.generationConfig,\n      this.safetySettings,\n      this.tools,\n      this.toolConfig,\n      this.requestOptions\n    ).catch(e => {\n      throw e;\n    });\n\n    this.sendStreamPromise = this.appendHistory(\n      streamGenerateContentResultPromise,\n      newContent\n    ).catch(e => {\n      // Errors from remote endpoint will be catchable by user from streamGenerateContentResultPromise\n      // Errors in appendHistory should not throw to cause user's programe exit with code 1\n      console.error(e);\n    });\n    return streamGenerateContentResultPromise;\n  }\n}\n\n/**\n * The `ChatSessionPreview` class is used to make multiturn send message requests. You\n * can instantiate this class by using the `startChat` method in the\n * `GenerativeModelPreview` class. The `sendMessage` method makes an async call to get\n * the response of a chat message at at once. The `sendMessageStream` method\n * makes an async call to stream the response of a chat message as it's being\n * generated.\n */\nexport class ChatSessionPreview {\n  private readonly project: string;\n  private readonly location: string;\n  private historyInternal: Content[];\n  private sendStreamPromise: Promise<void> = Promise.resolve();\n  private readonly resourcePath: string;\n  private readonly googleAuth: GoogleAuth;\n  protected readonly requestOptions?: RequestOptions;\n  private readonly generationConfig?: GenerationConfig;\n  private readonly safetySettings?: SafetySetting[];\n  private readonly tools?: Tool[];\n  private readonly toolConfig?: ToolConfig;\n  private readonly apiEndpoint?: string;\n  private readonly systemInstruction?: Content;\n  private readonly cachedContent?: string;\n\n  async getHistory(): Promise<Content[]> {\n    return Promise.resolve(this.historyInternal);\n  }\n\n  /**\n   * @constructor\n   * @param request - {@link StartChatSessionRequest}\n   */\n  constructor(\n    request: StartChatSessionRequest,\n    requestOptions?: RequestOptions\n  ) {\n    this.project = request.project;\n    this.location = request.location;\n    this.googleAuth = request.googleAuth;\n    this.resourcePath = request.resourcePath;\n    this.historyInternal = request.history ?? [];\n    this.generationConfig = request.generationConfig;\n    this.safetySettings = request.safetySettings;\n    this.tools = request.tools;\n    this.toolConfig = request.toolConfig;\n    this.apiEndpoint = request.apiEndpoint;\n    this.requestOptions = requestOptions ?? {};\n    this.cachedContent = request.cachedContent;\n    if (request.systemInstruction) {\n      this.systemInstruction = formulateSystemInstructionIntoContent(\n        request.systemInstruction\n      );\n    }\n  }\n\n  /**\n   * Gets access token from GoogleAuth. Throws GoogleAuthError when fails.\n   * @returns Promise of token.\n   */\n  private fetchToken(): Promise<string | null | undefined> {\n    const tokenPromise = this.googleAuth.getAccessToken().catch(e => {\n      throw new GoogleAuthError(constants.CREDENTIAL_ERROR_MESSAGE, e);\n    });\n    return tokenPromise;\n  }\n\n  /**\n   * Makes an async call to send chat message.\n   *\n   * The response is returned in {@link\n   * GenerateContentResult.response}.\n   *\n   * @example\n   * ```\n   * const chat = generativeModelPreview.startChat();\n   * const result1 = await chat.sendMessage(\"How can I learn more about Node.js?\");\n   * console.log('Response: ', JSON.stringify(result1.response));\n   *\n   * const result2 = await chat.sendMessage(\"What about python?\");\n   * console.log('Response: ', JSON.stringify(result2.response));\n   * ```\n   *\n   * @param request - send message request.\n   * @returns Promise of {@link GenerateContentResult}.\n   */\n  async sendMessage(\n    request: string | Array<string | Part>\n  ): Promise<GenerateContentResult> {\n    const newContent: Content[] =\n      formulateNewContentFromSendMessageRequest(request);\n    const generateContentRequest: GenerateContentRequest = {\n      contents: this.historyInternal.concat(newContent),\n      safetySettings: this.safetySettings,\n      generationConfig: this.generationConfig,\n      tools: this.tools,\n      toolConfig: this.toolConfig,\n      systemInstruction: this.systemInstruction,\n      cachedContent: this.cachedContent,\n    };\n\n    const generateContentResult: GenerateContentResult = await generateContent(\n      this.location,\n      this.resourcePath,\n      this.fetchToken(),\n      generateContentRequest,\n      this.apiEndpoint,\n      this.generationConfig,\n      this.safetySettings,\n      this.tools,\n      this.toolConfig,\n      this.requestOptions\n    ).catch(e => {\n      throw e;\n    });\n    const generateContentResponse = await generateContentResult.response;\n    // Only push the latest message to history if the response returned a result\n    if (\n      generateContentResponse.candidates &&\n      generateContentResponse.candidates.length !== 0\n    ) {\n      this.historyInternal = this.historyInternal.concat(newContent);\n      const contentFromAssistant =\n        generateContentResponse.candidates[0].content;\n      this.historyInternal.push(contentFromAssistant);\n    }\n\n    return Promise.resolve(generateContentResult);\n  }\n\n  private async appendHistory(\n    streamGenerateContentResultPromise: Promise<StreamGenerateContentResult>,\n    newContent: Content[]\n  ): Promise<void> {\n    const streamGenerateContentResult =\n      await streamGenerateContentResultPromise;\n    const streamGenerateContentResponse =\n      await streamGenerateContentResult.response;\n    // Only push the latest message to history if the response returned a result\n    if (\n      streamGenerateContentResponse.candidates &&\n      streamGenerateContentResponse.candidates.length !== 0\n    ) {\n      this.historyInternal = this.historyInternal.concat(newContent);\n      const contentFromAssistant =\n        streamGenerateContentResponse.candidates[0].content;\n      this.historyInternal.push(contentFromAssistant);\n    }\n  }\n\n  /**\n   * Makes an async call to stream send message.\n   *\n   * The response is streamed chunk by chunk in\n   * {@link StreamGenerateContentResult.stream}. The aggregated response is\n   * avaliable in {@link StreamGenerateContentResult.response} after all chunks\n   * are returned.\n   *\n   * @example\n   * ```\n   * const chat = generativeModel.startChat();\n   * const chatInput = \"How can I learn more about Node.js?\";\n   * const result = await chat.sendMessageStream(chatInput);\n   * for await (const item of result.stream) {\n   *   console.log(item.candidates[0].content.parts[0].text);\n   * }\n   * const response = await result.response;\n   * console.log('aggregated response: ', JSON.stringify(result.response));\n   * ```\n   *\n   * @param request - send message request.\n   * @returns Promise of {@link StreamGenerateContentResult}.\n   */\n  async sendMessageStream(\n    request: string | Array<string | Part>\n  ): Promise<StreamGenerateContentResult> {\n    const newContent: Content[] =\n      formulateNewContentFromSendMessageRequest(request);\n    const generateContentRequest: GenerateContentRequest = {\n      contents: this.historyInternal.concat(newContent),\n      safetySettings: this.safetySettings,\n      generationConfig: this.generationConfig,\n      tools: this.tools,\n      toolConfig: this.toolConfig,\n      systemInstruction: this.systemInstruction,\n      cachedContent: this.cachedContent,\n    };\n\n    const streamGenerateContentResultPromise = generateContentStream(\n      this.location,\n      this.resourcePath,\n      this.fetchToken(),\n      generateContentRequest,\n      this.apiEndpoint,\n      this.generationConfig,\n      this.safetySettings,\n      this.tools,\n      this.toolConfig,\n      this.requestOptions\n    ).catch(e => {\n      throw e;\n    });\n\n    this.sendStreamPromise = this.appendHistory(\n      streamGenerateContentResultPromise,\n      newContent\n    ).catch(e => {\n      // Errors from remote endpoint will be catchable by user from streamGenerateContentResultPromise\n      // Errors in appendHistory should not throw to cause user's programe exit with code 1\n      console.error(e);\n    });\n    return streamGenerateContentResultPromise;\n  }\n}\n\nfunction formulateNewContentFromSendMessageRequest(\n  request: string | Array<string | Part>\n): Content[] {\n  let newParts: Part[] = [];\n\n  if (typeof request === 'string') {\n    newParts = [{text: request}];\n  } else if (Array.isArray(request)) {\n    for (const item of request) {\n      if (typeof item === 'string') {\n        newParts.push({text: item});\n      } else {\n        newParts.push(item);\n      }\n    }\n  }\n\n  return assignRoleToPartsAndValidateSendMessageRequest(newParts);\n}\n\n/**\n * When multiple Part types (i.e. FunctionResponsePart and TextPart) are\n * passed in a single Part array, we may need to assign different roles to each\n * part. Currently only FunctionResponsePart requires a role other than 'user'.\n * @ignore\n * @param parts Array of parts to pass to the model\n * @returns Array of content items\n */\nfunction assignRoleToPartsAndValidateSendMessageRequest(\n  parts: Array<Part>\n): Content[] {\n  const userContent: Content = {role: constants.USER_ROLE, parts: []};\n  const functionContent: Content = {role: constants.USER_ROLE, parts: []};\n  let hasUserContent = false;\n  let hasFunctionContent = false;\n  for (const part of parts) {\n    if ('functionResponse' in part) {\n      functionContent.parts.push(part);\n      hasFunctionContent = true;\n    } else {\n      userContent.parts.push(part);\n      hasUserContent = true;\n    }\n  }\n\n  if (hasUserContent && hasFunctionContent) {\n    throw new ClientError(\n      'Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.'\n    );\n  }\n\n  if (!hasUserContent && !hasFunctionContent) {\n    throw new ClientError('No content is provided for sending chat message.');\n  }\n\n  if (hasUserContent) {\n    return [userContent];\n  }\n\n  return [functionContent];\n}\n","/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  CountTokensRequest,\n  CountTokensResponse,\n  RequestOptions,\n} from '../types/content';\nimport {GoogleGenerativeAIError} from '../types/errors';\nimport * as constants from '../util/constants';\nimport {\n  throwErrorIfNotOK,\n  processCountTokenResponse,\n} from './post_fetch_processing';\nimport {postRequest} from './post_request';\n\n/**\n * Make a async request to count tokens.\n * @param request A CountTokensRequest object with the request contents.\n * @returns The CountTokensResponse object with the token count.\n */\nexport async function countTokens(\n  location: string,\n  resourcePath: string,\n  token: Promise<string | null | undefined>,\n  request: CountTokensRequest,\n  apiEndpoint?: string,\n  requestOptions?: RequestOptions\n): Promise<CountTokensResponse> {\n  const response: Response | undefined = await postRequest({\n    region: location,\n    resourcePath: resourcePath,\n    resourceMethod: constants.COUNT_TOKENS_METHOD,\n    token: await token,\n    data: request,\n    apiEndpoint: apiEndpoint,\n    requestOptions: requestOptions,\n  }).catch(e => {\n    throw new GoogleGenerativeAIError('exception posting request', e);\n  });\n  await throwErrorIfNotOK(response).catch(e => {\n    throw e;\n  });\n  return processCountTokenResponse(response);\n}\n","/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* tslint:disable */\nimport {GoogleAuth} from 'google-auth-library';\n\nimport {formulateSystemInstructionIntoContent} from '../functions/util';\nimport {countTokens} from '../functions/count_tokens';\nimport {\n  generateContent,\n  generateContentStream,\n} from '../functions/generate_content';\nimport {\n  CachedContent,\n  Content,\n  CountTokensRequest,\n  CountTokensResponse,\n  GenerateContentRequest,\n  GenerateContentResult,\n  GenerationConfig,\n  GetGenerativeModelParams,\n  RequestOptions,\n  SafetySetting,\n  StartChatParams,\n  StartChatSessionRequest,\n  StreamGenerateContentResult,\n  Tool,\n} from '../types/content';\nimport {ToolConfig} from '../types/tool';\nimport {ClientError, GoogleAuthError} from '../types/errors';\nimport {constants} from '../util';\n\nimport {ChatSession, ChatSessionPreview} from './chat_session';\n\n/**\n * The `GenerativeModel` class is the base class for the generative models on\n * Vertex AI.\n * NOTE: Don't instantiate this class directly. Use\n * `vertexai.getGenerativeModel()` instead.\n */\nexport class GenerativeModel {\n  private readonly model: string;\n  private readonly generationConfig?: GenerationConfig;\n  private readonly safetySettings?: SafetySetting[];\n  private readonly tools?: Tool[];\n  private readonly toolConfig?: ToolConfig;\n  private readonly requestOptions?: RequestOptions;\n  private readonly systemInstruction?: Content;\n  private readonly project: string;\n  private readonly location: string;\n  private readonly googleAuth: GoogleAuth;\n  private readonly publisherModelEndpoint: string;\n  private readonly resourcePath: string;\n  private readonly apiEndpoint?: string;\n\n  /**\n   * @constructor\n   * @param getGenerativeModelParams - {@link GetGenerativeModelParams}\n   */\n  constructor(getGenerativeModelParams: GetGenerativeModelParams) {\n    this.project = getGenerativeModelParams.project;\n    this.location = getGenerativeModelParams.location;\n    this.apiEndpoint = getGenerativeModelParams.apiEndpoint;\n    this.googleAuth = getGenerativeModelParams.googleAuth;\n    this.model = getGenerativeModelParams.model;\n    this.generationConfig = getGenerativeModelParams.generationConfig;\n    this.safetySettings = getGenerativeModelParams.safetySettings;\n    this.tools = getGenerativeModelParams.tools;\n    this.toolConfig = getGenerativeModelParams.toolConfig;\n    this.requestOptions = getGenerativeModelParams.requestOptions ?? {};\n    if (getGenerativeModelParams.systemInstruction) {\n      this.systemInstruction = formulateSystemInstructionIntoContent(\n        getGenerativeModelParams.systemInstruction\n      );\n    }\n    this.resourcePath = formulateResourcePathFromModel(\n      this.model,\n      this.project,\n      this.location\n    );\n    // publisherModelEndpoint is deprecated\n    this.publisherModelEndpoint = this.resourcePath;\n  }\n\n  /**\n   * Gets access token from GoogleAuth. Throws {@link GoogleAuthError} when\n   * fails.\n   * @returns Promise of token string.\n   */\n  private fetchToken(): Promise<string | null | undefined> {\n    const tokenPromise = this.googleAuth.getAccessToken().catch(e => {\n      throw new GoogleAuthError(constants.CREDENTIAL_ERROR_MESSAGE, e);\n    });\n    return tokenPromise;\n  }\n\n  /**\n   * Makes an async call to generate content.\n   *\n   * The response will be returned in {@link\n   * GenerateContentResult.response}.\n   *\n   * @example\n   * ```\n   * const request = {\n   *   contents: [{role: 'user', parts: [{text: 'How are you doing today?'}]}],\n   * };\n   * const result = await generativeModel.generateContent(request);\n   * console.log('Response: ', JSON.stringify(result.response));\n   * ```\n   *\n   * @param request - A GenerateContentRequest object with the request contents.\n   * @returns The GenerateContentResponse object with the response candidates.\n   */\n  async generateContent(\n    request: GenerateContentRequest | string\n  ): Promise<GenerateContentResult> {\n    request = formulateRequestToGenerateContentRequest(request);\n    const formulatedRequest =\n      formulateSystemInstructionIntoGenerateContentRequest(\n        request,\n        this.systemInstruction\n      );\n    return generateContent(\n      this.location,\n      this.resourcePath,\n      this.fetchToken(),\n      formulatedRequest,\n      this.apiEndpoint,\n      this.generationConfig,\n      this.safetySettings,\n      this.tools,\n      this.toolConfig,\n      this.requestOptions\n    );\n  }\n\n  /**\n   * Makes an async stream request to generate content.\n   *\n   * The response is returned chunk by chunk as it's being generated in {@link\n   * StreamGenerateContentResult.stream}. After all chunks of the response are\n   * returned, the aggregated response is available in\n   * {@link StreamGenerateContentResult.response}.\n   *\n   * @example\n   * ```\n   * const request = {\n   *   contents: [{role: 'user', parts: [{text: 'How are you doing today?'}]}],\n   * };\n   * const streamingResult = await generativeModel.generateContentStream(request);\n   * for await (const item of streamingResult.stream) {\n   *   console.log('stream chunk: ', JSON.stringify(item));\n   * }\n   * const aggregatedResponse = await streamingResult.response;\n   * console.log('aggregated response: ', JSON.stringify(aggregatedResponse));\n   * ```\n   *\n   * @param request - {@link GenerateContentRequest}\n   * @returns Promise of {@link StreamGenerateContentResult}\n   */\n  async generateContentStream(\n    request: GenerateContentRequest | string\n  ): Promise<StreamGenerateContentResult> {\n    request = formulateRequestToGenerateContentRequest(request);\n    const formulatedRequest =\n      formulateSystemInstructionIntoGenerateContentRequest(\n        request,\n        this.systemInstruction\n      );\n    return generateContentStream(\n      this.location,\n      this.resourcePath,\n      this.fetchToken(),\n      formulatedRequest,\n      this.apiEndpoint,\n      this.generationConfig,\n      this.safetySettings,\n      this.tools,\n      this.toolConfig,\n      this.requestOptions\n    );\n  }\n\n  /**\n   * Makes an async request to count tokens.\n   *\n   * The `countTokens` function returns the token count and the number of\n   * billable characters for a prompt.\n   *\n   * @example\n   * ```\n   * const request = {\n   *   contents: [{role: 'user', parts: [{text: 'How are you doing today?'}]}],\n   * };\n   * const resp = await generativeModel.countTokens(request);\n   * console.log('count tokens response: ', resp);\n   * ```\n   *\n   * @param request - A CountTokensRequest object with the request contents.\n   * @returns The CountTokensResponse object with the token count.\n   */\n  async countTokens(request: CountTokensRequest): Promise<CountTokensResponse> {\n    return countTokens(\n      this.location,\n      this.resourcePath,\n      this.fetchToken(),\n      request,\n      this.apiEndpoint,\n      this.requestOptions\n    );\n  }\n\n  /**\n   * Instantiates a {@link ChatSession}.\n   *\n   * The {@link ChatSession} class is a stateful class that holds the state of\n   * the conversation with the model and provides methods to interact with the\n   * model in chat mode. Calling this method doesn't make any calls to a remote\n   * endpoint. To make remote call, use {@link ChatSession.sendMessage} or\n   * @link ChatSession.sendMessageStream}.\n   *\n   * @example\n   * ```\n   * const chat = generativeModel.startChat();\n   * const result1 = await chat.sendMessage(\"How can I learn more about Node.js?\");\n   * const response1 = await result1.response;\n   * console.log('Response: ', JSON.stringify(response1));\n   *\n   * const result2 = await chat.sendMessageStream(\"What about python?\");\n   * const response2 = await result2.response;\n   * console.log('Response: ', JSON.stringify(await response2));\n   * ```\n   *\n   * @param request - {@link StartChatParams}\n   * @returns {@link ChatSession}\n   */\n  startChat(request?: StartChatParams): ChatSession {\n    const startChatRequest: StartChatSessionRequest = {\n      project: this.project,\n      location: this.location,\n      googleAuth: this.googleAuth,\n      publisherModelEndpoint: this.publisherModelEndpoint,\n      resourcePath: this.resourcePath,\n      tools: this.tools,\n      toolConfig: this.toolConfig,\n      systemInstruction: this.systemInstruction,\n    };\n\n    if (request) {\n      startChatRequest.history = request.history;\n      startChatRequest.generationConfig =\n        request.generationConfig ?? this.generationConfig;\n      startChatRequest.safetySettings =\n        request.safetySettings ?? this.safetySettings;\n      startChatRequest.tools = request.tools ?? this.tools;\n      startChatRequest.toolConfig = request.toolConfig ?? this.toolConfig;\n      startChatRequest.apiEndpoint = request.apiEndpoint ?? this.apiEndpoint;\n      startChatRequest.systemInstruction =\n        request.systemInstruction ?? this.systemInstruction;\n    }\n    return new ChatSession(startChatRequest, this.requestOptions);\n  }\n}\n\n/**\n * The `GenerativeModelPreview` class is the base class for the generative models\n * that are in preview.\n * NOTE: Don't instantiate this class directly. Use\n * `vertexai.preview.getGenerativeModel()` instead.\n */\nexport class GenerativeModelPreview {\n  private readonly model: string;\n  private readonly generationConfig?: GenerationConfig;\n  private readonly safetySettings?: SafetySetting[];\n  private readonly tools?: Tool[];\n  private readonly toolConfig?: ToolConfig;\n  private readonly requestOptions?: RequestOptions;\n  private readonly systemInstruction?: Content;\n  private readonly project: string;\n  private readonly location: string;\n  private readonly googleAuth: GoogleAuth;\n  private readonly publisherModelEndpoint: string;\n  private readonly resourcePath: string;\n  private readonly apiEndpoint?: string;\n  private readonly cachedContent?: CachedContent;\n\n  /**\n   * @constructor\n   * @param getGenerativeModelParams - {@link GetGenerativeModelParams}\n   */\n  constructor(getGenerativeModelParams: GetGenerativeModelParams) {\n    this.project = getGenerativeModelParams.project;\n    this.location = getGenerativeModelParams.location;\n    this.apiEndpoint = getGenerativeModelParams.apiEndpoint;\n    this.googleAuth = getGenerativeModelParams.googleAuth;\n    this.model = getGenerativeModelParams.model;\n    this.generationConfig = getGenerativeModelParams.generationConfig;\n    this.safetySettings = getGenerativeModelParams.safetySettings;\n    this.tools = getGenerativeModelParams.tools;\n    this.toolConfig = getGenerativeModelParams.toolConfig;\n    this.cachedContent = getGenerativeModelParams.cachedContent;\n    this.requestOptions = getGenerativeModelParams.requestOptions ?? {};\n    if (getGenerativeModelParams.systemInstruction) {\n      this.systemInstruction = formulateSystemInstructionIntoContent(\n        getGenerativeModelParams.systemInstruction\n      );\n    }\n    this.resourcePath = formulateResourcePathFromModel(\n      this.model,\n      this.project,\n      this.location\n    );\n    // publisherModelEndpoint is deprecated\n    this.publisherModelEndpoint = this.resourcePath;\n  }\n\n  /**\n   * Gets access token from GoogleAuth. Throws {@link GoogleAuthError} when\n   * fails.\n   * @returns Promise of token string.\n   */\n  private fetchToken(): Promise<string | null | undefined> {\n    const tokenPromise = this.googleAuth.getAccessToken().catch(e => {\n      throw new GoogleAuthError(constants.CREDENTIAL_ERROR_MESSAGE, e);\n    });\n    return tokenPromise;\n  }\n\n  /**\n   * Makes an async call to generate content.\n   *\n   * The response will be returned in {@link GenerateContentResult.response}.\n   *\n   * @example\n   * ```\n   * const request = {\n   *   contents: [{role: 'user', parts: [{text: 'How are you doing today?'}]}],\n   * };\n   * const result = await generativeModelPreview.generateContent(request);\n   * console.log('Response: ', JSON.stringify(result.response));\n   * ```\n   *\n   * @param request - A GenerateContentRequest object with the request contents.\n   * @returns The GenerateContentResponse object with the response candidates.\n   */\n  async generateContent(\n    request: GenerateContentRequest | string\n  ): Promise<GenerateContentResult> {\n    request = formulateRequestToGenerateContentRequest(request);\n    const formulatedRequest = {\n      ...formulateSystemInstructionIntoGenerateContentRequest(\n        request,\n        this.systemInstruction\n      ),\n      cachedContent: this.cachedContent?.name,\n    };\n    return generateContent(\n      this.location,\n      this.resourcePath,\n      this.fetchToken(),\n      formulatedRequest,\n      this.apiEndpoint,\n      this.generationConfig,\n      this.safetySettings,\n      this.tools,\n      this.toolConfig,\n      this.requestOptions\n    );\n  }\n\n  /**\n   * Makes an async stream request to generate content.\n   *\n   * The response is returned chunk by chunk as it's being generated in {@link\n   * StreamGenerateContentResult.stream}. After all chunks of the response are\n   * returned, the aggregated response is available in\n   * {@link StreamGenerateContentResult.response}.\n   *\n   * @example\n   * ```\n   * const request = {\n   *   contents: [{role: 'user', parts: [{text: 'How are you doing today?'}]}],\n   * };\n   * const streamingResult = await generativeModelPreview.generateContentStream(request);\n   * for await (const item of streamingResult.stream) {\n   *   console.log('stream chunk: ', JSON.stringify(item));\n   * }\n   * const aggregatedResponse = await streamingResult.response;\n   * console.log('aggregated response: ', JSON.stringify(aggregatedResponse));\n   * ```\n   *\n   * @param request - {@link GenerateContentRequest}\n   * @returns Promise of {@link StreamGenerateContentResult}\n   */\n  async generateContentStream(\n    request: GenerateContentRequest | string\n  ): Promise<StreamGenerateContentResult> {\n    request = formulateRequestToGenerateContentRequest(request);\n    const formulatedRequest = {\n      ...formulateSystemInstructionIntoGenerateContentRequest(\n        request,\n        this.systemInstruction\n      ),\n      cachedContent: this.cachedContent?.name,\n    };\n    return generateContentStream(\n      this.location,\n      this.resourcePath,\n      this.fetchToken(),\n      formulatedRequest,\n      this.apiEndpoint,\n      this.generationConfig,\n      this.safetySettings,\n      this.tools,\n      this.toolConfig,\n      this.requestOptions\n    );\n  }\n\n  /**\n   * Makes an async request to count tokens.\n   *\n   * The `countTokens` function returns the token count and the number of\n   * billable characters for a prompt.\n   *\n   * @example\n   * ```\n   * const request = {\n   *   contents: [{role: 'user', parts: [{text: 'How are you doing today?'}]}],\n   * };\n   * const resp = await generativeModelPreview.countTokens(request);\n   * console.log('count tokens response: ', resp);\n   * ```\n   *\n   * @param request - A CountTokensRequest object with the request contents.\n   * @returns The CountTokensResponse object with the token count.\n   */\n  async countTokens(request: CountTokensRequest): Promise<CountTokensResponse> {\n    return countTokens(\n      this.location,\n      this.resourcePath,\n      this.fetchToken(),\n      request,\n      this.apiEndpoint,\n      this.requestOptions\n    );\n  }\n\n  /**\n   * Instantiates a {@link ChatSessionPreview}.\n   *\n   * The {@link ChatSessionPreview} class is a stateful class that holds the state of\n   * the conversation with the model and provides methods to interact with the\n   * model in chat mode. Calling this method doesn't make any calls to a remote\n   * endpoint. To make remote call, use {@link ChatSessionPreview.sendMessage} or\n   * {@link ChatSessionPreview.sendMessageStream}.\n   *\n   * @example\n   * ```\n   * const chat = generativeModelPreview.startChat();\n   * const result1 = await chat.sendMessage(\"How can I learn more about Node.js?\");\n   * const response1 = await result1.response;\n   * console.log('Response: ', JSON.stringify(response1));\n   *\n   * const result2 = await chat.sendMessageStream(\"What about python?\");\n   * const response2 = await result2.response;\n   * console.log('Response: ', JSON.stringify(await response2));\n   * ```\n   *\n   * @param request - {@link StartChatParams}\n   * @returns {@link ChatSessionPreview}\n   */\n  startChat(request?: StartChatParams): ChatSessionPreview {\n    const startChatRequest: StartChatSessionRequest = {\n      project: this.project,\n      location: this.location,\n      googleAuth: this.googleAuth,\n      publisherModelEndpoint: this.publisherModelEndpoint,\n      resourcePath: this.resourcePath,\n      tools: this.tools,\n      toolConfig: this.toolConfig,\n      systemInstruction: this.systemInstruction,\n      cachedContent: this.cachedContent?.name,\n    };\n\n    if (request) {\n      startChatRequest.history = request.history;\n      startChatRequest.generationConfig =\n        request.generationConfig ?? this.generationConfig;\n      startChatRequest.safetySettings =\n        request.safetySettings ?? this.safetySettings;\n      startChatRequest.tools = request.tools ?? this.tools;\n      startChatRequest.toolConfig = request.toolConfig ?? this.toolConfig;\n      startChatRequest.systemInstruction =\n        request.systemInstruction ?? this.systemInstruction;\n      startChatRequest.cachedContent =\n        request.cachedContent ?? this.cachedContent?.name;\n    }\n    return new ChatSessionPreview(startChatRequest, this.requestOptions);\n  }\n\n  getModelName(): string {\n    return this.model;\n  }\n\n  getCachedContent(): CachedContent | undefined {\n    return this.cachedContent;\n  }\n\n  getSystemInstruction(): Content | undefined {\n    return this.systemInstruction;\n  }\n}\n\nfunction formulateResourcePathFromModel(\n  model: string,\n  project: string,\n  location: string\n): string {\n  let resourcePath: string;\n  if (!model) {\n    throw new ClientError('model parameter must not be empty.');\n  }\n  if (!model.includes('/')) {\n    // example 'gemini-1.0-pro'\n    resourcePath = `projects/${project}/locations/${location}/publishers/google/models/${model}`;\n  } else if (model.startsWith('models/')) {\n    // example 'models/gemini-1.0-pro'\n    resourcePath = `projects/${project}/locations/${location}/publishers/google/${model}`;\n  } else if (model.startsWith('projects/')) {\n    // example 'projects/my-project/locations/my-location/models/my-tuned-model'\n    resourcePath = model;\n  } else {\n    throw new ClientError(\n      'model parameter must be either a Model Garden model ID or a full resource name.'\n    );\n  }\n\n  return resourcePath;\n}\n\nfunction formulateRequestToGenerateContentRequest(\n  request: GenerateContentRequest | string\n): GenerateContentRequest {\n  if (typeof request === 'string') {\n    return {\n      contents: [{role: constants.USER_ROLE, parts: [{text: request}]}],\n    } as GenerateContentRequest;\n  }\n  return request;\n}\n\nfunction formulateSystemInstructionIntoGenerateContentRequest(\n  methodRequest: GenerateContentRequest,\n  classSystemInstruction?: Content\n): GenerateContentRequest {\n  if (methodRequest.systemInstruction) {\n    methodRequest.systemInstruction = formulateSystemInstructionIntoContent(\n      methodRequest.systemInstruction\n    );\n    return methodRequest;\n  }\n  if (classSystemInstruction) {\n    methodRequest.systemInstruction = classSystemInstruction;\n  }\n  return methodRequest;\n}\n","/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport {ChatSession, ChatSessionPreview} from './chat_session';\nexport {GenerativeModel, GenerativeModelPreview} from './generative_models';\n","/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** This file contains interfaces that are usable in the types folder. */\n\n/**\n * The list of OpenAPI data types\n * as defined by https://swagger.io/docs/specification/data-models/data-types/\n */\nexport enum SchemaType {\n  /** String type. */\n  STRING = 'STRING',\n  /** Number type. */\n  NUMBER = 'NUMBER',\n  /** Integer type. */\n  INTEGER = 'INTEGER',\n  /** Boolean type. */\n  BOOLEAN = 'BOOLEAN',\n  /** Array type. */\n  ARRAY = 'ARRAY',\n  /** Object type. */\n  OBJECT = 'OBJECT',\n}\n\n/**\n * Schema is used to define the format of input/output data.\n * Represents a select subset of an OpenAPI 3.0 schema object.\n * More fields may be added in the future as needed.\n */\nexport interface Schema {\n  /**\n   * Optional. The type of the property. {@link\n   * SchemaType}.\n   */\n  type?: SchemaType;\n  /** Optional. The format of the property. */\n  format?: string;\n  /** Optional. The description of the property. */\n  description?: string;\n  /** Optional. Whether the property is nullable. */\n  nullable?: boolean;\n  /** Optional. The items of the property. {@link Schema} */\n  items?: Schema;\n  /** Optional. The enum of the property. */\n  enum?: string[];\n  /** Optional. Map of {@link Schema}. */\n  properties?: {[k: string]: Schema};\n  /** Optional. Array of required property. */\n  required?: string[];\n  /** Optional. The example of the property. */\n  example?: unknown;\n}\n","/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// @ts-nocheck\nimport {GoogleAuth, GoogleAuthOptions} from 'google-auth-library';\nimport {ToolConfig} from './tool';\nimport {SchemaType, Schema} from './common';\n\n/**\n * Params used to initialize the Vertex SDK.\n */\nexport declare interface VertexInit {\n  /**\n   * Optional. The Google Cloud project ID. It is not the numeric project name.\n   * If not provided, SDK will try to resolve it from runtime environment.\n   * If still not cannot resovle project ID, SDK will throw exception.\n   */\n  project?: string;\n  /**\n   * Optional. The Google Cloud project location. If not provided, SDK will\n   * firtly try to resolve it from runtime environment. If no location resolved\n   * from runtime environment, SDK will use default value `us-central1`.\n   */\n  location?: string;\n  /**\n   * Optional. The base Vertex AI endpoint to use for the request. If not\n   * provided, the default regionalized endpoint (i.e.\n   * us-central1-aiplatform.googleapis.com) will be used.\n   */\n  apiEndpoint?: string;\n  /**\n   * Optional. The Authentication options provided by google-auth-library.\n   * Complete list of authentication options is documented in the\n   * GoogleAuthOptions interface:\n   * https://github.com/googleapis/google-auth-library-nodejs/blob/main/src/auth/googleauth.ts.\n   */\n  googleAuthOptions?: GoogleAuthOptions;\n}\n\n/**\n * Params used to call the generateContent method.\n */\nexport declare interface GenerateContentRequest extends BaseModelParams {\n  /** Array of {@link Content}.*/\n  contents: Content[];\n  /**\n   * Optional. The user provided system instructions for the model.\n   * Note: only text should be used in parts of {@link Content}\n   */\n  systemInstruction?: string | Content;\n\n  /**\n   * Optional. The name of the cached content used as context to serve the prediction.\n   * This is the name of a `CachedContent` and not the cache object itself.\n   */\n  cachedContent?: string;\n\n  /**\n   * Optional. Custom metadata labels for organizing API calls and managing costs at scale. See\n   * https://cloud.google.com/vertex-ai/generative-ai/docs/multimodal/add-labels-to-api-calls\n   */\n  labels?: Record<string, string>;\n}\n\n/**\n * Params used to call the countTokens method.\n */\nexport declare interface CountTokensRequest {\n  /** Array of {@link Content}. */\n  contents: Content[];\n}\n\n/**\n * Response returned from countTokens method.\n */\nexport declare interface CountTokensResponse {\n  /**\n   * The total number of tokens counted across all instances from the request.\n   */\n  totalTokens: number;\n  /**\n   * Optional. The total number of billable characters counted across all\n   * instances from the request.\n   */\n  totalBillableCharacters?: number;\n}\n\n/**\n * Params used to call the getGenerativeModel method.\n */\nexport declare interface GetGenerativeModelParams extends ModelParams {\n  /** The name of the model to get. */\n  model: string;\n  /** The Google Cloud project to use for the request. */\n  project: string;\n  /** The Google Cloud project location to use for the request. */\n  location: string;\n  /**\n   * GoogleAuth class instance that handles authentication.\n   * Details about GoogleAuth is referred to\n   * https://github.com/googleapis/google-auth-library-nodejs/blob/main/src/auth/googleauth.ts\n   */\n  googleAuth: GoogleAuth;\n  /**\n   * Optional. The base Vertex AI endpoint to use for the request. If not\n   * provided, the default regionalized endpoint (i.e.\n   * us-central1-aiplatform.googleapis.com) will be used.\n   */\n  apiEndpoint?: string;\n  /** Optional. The configuration to use for generation. */\n  generationConfig?: GenerationConfig;\n  /** Optional. The safety settings to use for generation. */\n  safetySettings?: SafetySetting[];\n  /** Optional. The tools to use for generation. */\n  tools?: Tool[];\n  /** Optional. This config is shared for all tools provided in the request. */\n  toolConfig?: ToolConfig;\n  /** Optional. The request options to use for generation. */\n  requestOptions?: RequestOptions;\n  /**\n   * Optional. The user provided system instructions for the model.\n   * Note: only text should be used in parts of {@link Content}\n   */\n  systemInstruction?: string | Content;\n}\n\n/**\n * Configuration for initializing a model, for example via getGenerativeModel in\n * VertexAI class.\n */\nexport declare interface ModelParams extends BaseModelParams {\n  /**\n   * The name of the model.\n   * @example \"gemini-1.0-pro\".\n   */\n  model: string;\n\n  /**\n   * Optional. The cached content used as context to serve the prediction.\n   * Note: only used in explicit caching, where users can have control over caching\n   * (e.g. what content to cache) and enjoy guaranteed cost savings.\n   */\n  cachedContent?: CachedContent;\n}\n\n/**\n * Base params for initializing a model or calling GenerateContent.\n */\nexport declare interface BaseModelParams {\n  /** Optional. Array of {@link SafetySetting}. */\n  safetySettings?: SafetySetting[];\n  /** Optional.  {@link GenerationConfig}. */\n  generationConfig?: GenerationConfig;\n  /** Optional. Array of {@link Tool}. */\n  tools?: Tool[];\n  /** Optional. This config is shared for all tools provided in the request. */\n  toolConfig?: ToolConfig;\n  /**\n   * Optional. The user provided system instructions for the model.\n   * Note: only text should be used in parts of {@link Content}\n   */\n  systemInstruction?: string | Content;\n}\n\n/**\n * Safety feedback for an entire request.\n */\nexport declare interface SafetySetting {\n  /** The harm category. {@link HarmCategory} */\n  category: HarmCategory;\n  /** The harm threshold. {@link HarmBlockThreshold} */\n  threshold: HarmBlockThreshold;\n}\n\n/**\n * Schema passed to `GenerationConfig.responseSchema`\n * @public\n */\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface ResponseSchema extends Schema {}\n\n/**\n * Configuration options for model generation and outputs.\n */\nexport declare interface GenerationConfig {\n  /** Optional. If true, the timestamp of the audio will be included in the response. */\n  audioTimestamp?: boolean;\n  /** Optional. Number of candidates to generate. */\n  candidateCount?: number;\n  /** Optional. Stop sequences. */\n  stopSequences?: string[];\n  /** Optional. The maximum number of output tokens to generate per message. */\n  maxOutputTokens?: number;\n  /** Optional. Controls the randomness of predictions. */\n  temperature?: number;\n  /** Optional. If specified, nucleus sampling will be used. */\n  topP?: number;\n  /** Optional. If specified, topK sampling will be used. */\n  topK?: number;\n  /**\n   * Optional. Positive values penalize tokens that repeatedly appear in the generated text, decreasing the probability of repeating content.\n   * This maximum value for frequencyPenalty is up to, but not including, 2.0. Its minimum value is -2.0.\n   * Supported by gemini-1.5-pro and gemini-1.5-flash only. */\n  frequencyPenalty?: number;\n  /**\n   * Optional. Output response mimetype of the generated candidate text.\n   * Supported mimetype:\n   * - `text/plain`: (default) Text output.\n   * - `application/json`: JSON response in the candidates.\n   * The model needs to be prompted to output the appropriate response type,\n   * otherwise the behavior is undefined.\n   */\n  responseMimeType?: string;\n\n  /**\n   * Optional. The schema that generated candidate text must follow.  For more\n   * information, see\n   * https://cloud.google.com/vertex-ai/generative-ai/docs/multimodal/control-generated-output.\n   * If set, a compatible responseMimeType must also be set.\n   */\n  responseSchema?: ResponseSchema;\n}\n\n/**\n * Harm categories that will block the content.\n */\nexport enum HarmCategory {\n  /** The harm category is unspecified. */\n  HARM_CATEGORY_UNSPECIFIED = 'HARM_CATEGORY_UNSPECIFIED',\n  /** The harm category is hate speech. */\n  HARM_CATEGORY_HATE_SPEECH = 'HARM_CATEGORY_HATE_SPEECH',\n  /** The harm category is dangerous content. */\n  HARM_CATEGORY_DANGEROUS_CONTENT = 'HARM_CATEGORY_DANGEROUS_CONTENT',\n  /** The harm category is harassment. */\n  HARM_CATEGORY_HARASSMENT = 'HARM_CATEGORY_HARASSMENT',\n  /** The harm category is sexually explicit content. */\n  HARM_CATEGORY_SEXUALLY_EXPLICIT = 'HARM_CATEGORY_SEXUALLY_EXPLICIT',\n}\n\n/**\n * Probability based thresholds levels for blocking.\n */\nexport enum HarmBlockThreshold {\n  /** Unspecified harm block threshold. */\n  HARM_BLOCK_THRESHOLD_UNSPECIFIED = 'HARM_BLOCK_THRESHOLD_UNSPECIFIED',\n  /** Block low threshold and above (i.e. block more). */\n  BLOCK_LOW_AND_ABOVE = 'BLOCK_LOW_AND_ABOVE',\n  /** Block medium threshold and above. */\n  BLOCK_MEDIUM_AND_ABOVE = 'BLOCK_MEDIUM_AND_ABOVE',\n  /** Block only high threshold (i.e. block less). */\n  BLOCK_ONLY_HIGH = 'BLOCK_ONLY_HIGH',\n  /** Block none. */\n  BLOCK_NONE = 'BLOCK_NONE',\n  /** Turn off the safety filter. */\n  OFF = 'OFF',\n}\n\n/**\n * Harm probability levels in the content.\n */\nexport enum HarmProbability {\n  /** Harm probability unspecified. */\n  HARM_PROBABILITY_UNSPECIFIED = 'HARM_PROBABILITY_UNSPECIFIED',\n  NEGLIGIBLE = 'NEGLIGIBLE',\n  /** Low level of harm. */\n  LOW = 'LOW',\n  /** Medium level of harm. */\n  MEDIUM = 'MEDIUM',\n  /** High level of harm. */\n  HIGH = 'HIGH',\n}\n\n/**\n * Harm severity levels\n */\nexport enum HarmSeverity {\n  /** Harm severity unspecified. */\n  HARM_SEVERITY_UNSPECIFIED = 'HARM_SEVERITY_UNSPECIFIED',\n  /** Negligible level of harm severity. */\n  HARM_SEVERITY_NEGLIGIBLE = 'HARM_SEVERITY_NEGLIGIBLE',\n  /** Low level of harm severity. */\n  HARM_SEVERITY_LOW = 'HARM_SEVERITY_LOW',\n  /** Medium level of harm severity. */\n  HARM_SEVERITY_MEDIUM = 'HARM_SEVERITY_MEDIUM',\n  /** High level of harm severity. */\n  HARM_SEVERITY_HIGH = 'HARM_SEVERITY_HIGH',\n}\n/**\n * Safety rating corresponding to the generated content.\n */\nexport declare interface SafetyRating {\n  /** The harm category. {@link HarmCategory} */\n  category?: HarmCategory;\n  /** The harm probability. {@link HarmProbability} */\n  probability?: HarmProbability;\n  /** The harm probability score. */\n  probabilityScore?: number;\n  /** The harm severity.level {@link HarmSeverity} */\n  severity?: HarmSeverity;\n  /** The harm severity score. */\n  severityScore?: number;\n}\n\n/**\n * The base structured datatype containing multi-part content of a message.\n */\nexport declare interface Content {\n  /** Array of {@link Part}. */\n  parts: Part[];\n  /** The producer of the content. */\n  role: string;\n}\n\n/**\n * A part of a turn in a conversation with the model with a fixed MIME type.\n * It has one of the following mutually exclusive fields:\n * 1. text\n * 2. inlineData\n * 3. fileData\n * 4. functionResponse\n * 5. functionCall\n */\n// TODO: Adjust so one must be true.\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface BasePart {}\n\n/**\n * A text part of a conversation with the model.\n */\nexport interface TextPart extends BasePart {\n  /** Only this property is expected for TextPart. */\n  text: string;\n  /** inlineData is not expected for TextPart. */\n  inlineData?: never;\n  /** fileData is not expected for TextPart. */\n  fileData?: never;\n  /** functionResponse is not expected for TextPart. */\n  functionResponse?: never;\n  /** functionCall is not expected for TextPart. */\n  functionCall?: never;\n}\n\n/**\n * An inline data part of a conversation with the model.\n */\nexport interface InlineDataPart extends BasePart {\n  /** text is not expected for InlineDataPart. */\n  text?: never;\n  /** Only this property is expected for InlineDataPart. */\n  inlineData: GenerativeContentBlob;\n  /** fileData is not expected for InlineDataPart. */\n  fileData?: never;\n  /** functionResponse is not expected for InlineDataPart. */\n  functionResponse?: never;\n  /** functionCall is not expected for InlineDataPart. */\n  functionCall?: never;\n}\n\n/**\n * URI based data.\n */\nexport interface FileData {\n  /** The IANA standard MIME type of the source data. */\n  mimeType: string;\n  /** URI of the file. */\n  fileUri: string;\n}\n\n/**\n * A file data part of a conversation with the model.\n */\nexport interface FileDataPart extends BasePart {\n  /** text is not expected for FileDataPart. */\n  text?: never;\n  /** inlineData is not expected for FileDataPart. */\n  inlineData?: never;\n  /** Only this property is expected for FileDataPart. */\n  fileData: FileData;\n  /** functionResponse is not expected for FileDataPart. */\n  functionResponse?: never;\n  /** functionCall is not expected for FileDataPart. */\n  functionCall?: never;\n}\n\n/**\n * A function response part of a conversation with the model.\n */\nexport interface FunctionResponsePart extends BasePart {\n  /** text is not expected for FunctionResponsePart. */\n  text?: never;\n  /** inlineData is not expected for FunctionResponsePart. */\n  inlineData?: never;\n  /** fileData is not expected for FunctionResponsePart. */\n  fileData?: never;\n  /** Only this property is expected for FunctionResponsePart. */\n  functionResponse: FunctionResponse;\n  /** functionCall is not expected for FunctionResponsePart. */\n  functionCall?: never;\n}\n\n/**\n * A function call part of a conversation with the model.\n */\nexport interface FunctionCallPart extends BasePart {\n  /** text is not expected for FunctionCallPart. */\n  text?: never;\n  /** inlineData is not expected for FunctionCallPart. */\n  inlineData?: never;\n  /** fileData is not expected for FunctionCallPart. */\n  fileData?: never;\n  /** functionResponse is not expected for FunctionCallPart. */\n  functionResponse?: never;\n  /** Only this property is expected for FunctionCallPart. */\n  functionCall: FunctionCall;\n}\n\n/**\n * A datatype containing media that is part of a multi-part {@link Content}\n * message. A `Part` is a union type of {@link TextPart}, {@link InlineDataPart},\n * {@link FileDataPart}, and {@link FunctionResponsePart}. A\n * `Part` has one of the following mutually exclusive fields:\n * 1. text\n * 2. inlineData\n * 3. fileData\n * 4. functionResponse\n */\nexport declare type Part =\n  | TextPart\n  | InlineDataPart\n  | FileDataPart\n  | FunctionResponsePart\n  | FunctionCallPart;\n\n/**\n * Raw media bytes sent directly in the request. Text should not be sent as\n * raw bytes.\n */\nexport declare interface GenerativeContentBlob {\n  /**\n   * The MIME type of the source data. The only accepted values: \"image/png\" or\n   * \"image/jpeg\".\n   */\n  mimeType: string;\n  /** Base64 encoded data. */\n  data: string;\n}\n\n/**\n * Usage metadata about response(s).\n */\nexport declare interface UsageMetadata {\n  /** Optional. Number of tokens in the request. */\n  promptTokenCount?: number;\n  /** Optional. Number of tokens in the response(s). */\n  candidatesTokenCount?: number;\n  /** Optional. Total number of tokens. */\n  totalTokenCount?: number;\n  /** Optional. Number of tokens in the cached content. */\n  cachedContentTokenCount?: number;\n}\n\n/**\n * Content filter results for a prompt sent in the request.\n */\nexport declare interface PromptFeedback {\n  /** The reason why the response is blocked. {@link BlockReason}. */\n  blockReason: BlockedReason;\n  /** Array of {@link SafetyRating} */\n  safetyRatings: SafetyRating[];\n  /** A readable block reason message. */\n  blockReasonMessage?: string;\n}\n\n/**\n * The reason why the reponse is blocked.\n */\nexport enum BlockedReason {\n  /** Unspecified blocked reason. */\n  BLOCKED_REASON_UNSPECIFIED = 'BLOCK_REASON_UNSPECIFIED',\n  /** Candidates blocked due to safety. */\n  SAFETY = 'SAFETY',\n  /** Candidates blocked due to other reason. */\n  OTHER = 'OTHER',\n  /** terminology blocklist. */\n  BLOCKLIST = 'BLOCKLIST',\n  /** Candidates blocked due to prohibited content. */\n  PROHIBITED_CONTENT = 'PROHIBITED_CONTENT',\n}\n\n/**\n * The reason why the model stopped generating tokens.\n * If empty, the model has not stopped generating the tokens.\n */\nexport enum FinishReason {\n  /** The finish reason is unspecified. */\n  FINISH_REASON_UNSPECIFIED = 'FINISH_REASON_UNSPECIFIED',\n  /** Natural stop point of the model or provided stop sequence. */\n  STOP = 'STOP',\n  /** The maximum number of tokens as specified in the request was reached. */\n  MAX_TOKENS = 'MAX_TOKENS',\n  /**\n   * The token generation was stopped as the response was flagged for safety\n   * reasons.\n   */\n  SAFETY = 'SAFETY',\n  /**\n   * The token generation was stopped as the response was flagged for\n   * unauthorized citations.\n   */\n  RECITATION = 'RECITATION',\n  /** All other reasons that stopped the token generation. */\n  OTHER = 'OTHER',\n  /**\n   * The token generation was stopped as the response was flagged for the\n   * terms which are included from the terminology blocklist.\n   */\n  BLOCKLIST = 'BLOCKLIST',\n  /**\n   * The token generation was stopped as the response was flagged for\n   * the prohibited contents.\n   */\n  PROHIBITED_CONTENT = 'PROHIBITED_CONTENT',\n  /**\n   * The token generation was stopped as the response was flagged for\n   * Sensitive Personally Identifiable Information (SPII) contents.\n   */\n  SPII = 'SPII',\n}\n\n/**\n * Wrapper for respones from a generateContent request.\n */\nexport declare interface GenerateContentResult {\n  /**\n   * All GenerateContentResponses received so far. {@link\n   * GenerateContentResponse}\n   */\n  response: GenerateContentResponse;\n}\n\n/**\n * Wrapper for respones from a generateContentStream method.\n */\nexport declare interface StreamGenerateContentResult {\n  /** Promise of {@link GenerateContentResponse}. */\n  response: Promise<GenerateContentResponse>;\n  /**\n   * Async iterable that provides one {@link GenerateContentResponse} at a\n   * time.\n   */\n  stream: AsyncGenerator<GenerateContentResponse>;\n}\n\n/**\n * Response from the model supporting multiple candidates.\n */\nexport declare interface GenerateContentResponse {\n  /** Array of {@link GenerateContentCandidate}. */\n  candidates?: GenerateContentCandidate[];\n  /**\n   * Optional. This is only populated if there are no candidates due to a\n   * safety block. {@link PromptFeedback}.\n   */\n  promptFeedback?: PromptFeedback;\n  /** Optional. {@link UsageMetadata}. */\n  usageMetadata?: UsageMetadata;\n}\n\n/**\n * A response candidate generated from the model.\n */\nexport declare interface GenerateContentCandidate {\n  /** {@link Content}. */\n  content: Content;\n  /**\n   * Optional. The index of the candidate in the {@link\n   * GenerateContentResponse}.\n   */\n  index: number;\n  /**\n   * Optional. The reason why the model stopped generating tokens. {@link\n   * FinishReason}.\n   */\n  finishReason?: FinishReason;\n  /**\n   * Optional. A readable message describing why the model stopped generating\n   * tokens.\n   */\n  finishMessage?: string;\n  /** Optional. Array of {@link SafetyRating}. */\n  safetyRatings?: SafetyRating[];\n  /** Optional. {@link CitationMetadata}. */\n  citationMetadata?: CitationMetadata;\n  /** Optional. {@link GroundingMetadata}. */\n  groundingMetadata?: GroundingMetadata;\n}\n\n/**\n * A collection of source attributions for a piece of content.\n */\nexport declare interface CitationMetadata {\n  /** Array of {@link Citation}. */\n  citations: Citation[];\n}\n\n/**\n * Represents a whole or partial calendar date, such as a birthday. The time of\n * day and time zone are either specified elsewhere or are insignificant. The\n * date is relative to the Gregorian Calendar. This can represent one of the\n * following:\n *\n *   A full date, with non-zero year, month, and day values.\n *   A month and day, with a zero year (for example, an anniversary).\n *   A year on its own, with a zero month and a zero day.\n *   A year and month, with a zero day (for example, a credit card expiration\n *   date).\n */\nexport declare interface GoogleDate {\n  /**\n   * Year of the date. Must be from 1 to 9999, or 0 to specify a date without a\n   * year.\n   */\n  year?: number;\n  /**\n   * Month of the date. Must be from 1 to 12, or 0 to specify a year without a\n   * monthi and day.\n   */\n  month?: number;\n  /**\n   * Day of the date. Must be from 1 to 31 and valid for the year and month.\n   * or 0 to specify a year by itself or a year and month where the day isn't\n   * significant\n   */\n  day?: number;\n}\n\n/**\n * Source attributions for content.\n */\nexport declare interface Citation {\n  /** Optional. Start index into the content. */\n  startIndex?: number;\n  /** Optional. End index into the content. */\n  endIndex?: number;\n  /** Optional. Url reference of the attribution. */\n  uri?: string;\n  /** Optional. Title of the attribution. */\n  title?: string;\n  /** Optional. License of the attribution. */\n  license?: string;\n  /** Optional. Publication date of the attribution. */\n  publicationDate?: GoogleDate;\n}\n\n/**\n * Google search entry point.\n */\nexport declare interface SearchEntryPoint {\n  /**\n   * Optional. Web content snippet that can be embedded in a web page or an app\n   * webview.\n   */\n  renderedContent?: string;\n  /** Optional. Base64 encoded JSON representing array of tuple. */\n  sdkBlob?: string;\n}\n\n/**\n * Grounding chunk from the web.\n */\nexport declare interface GroundingChunkWeb {\n  /** Optional. URI reference of the grounding chunk. */\n  uri?: string;\n  /** Optional. Title of the grounding chunk. */\n  title?: string;\n}\n\n/**\n * Grounding chunk from context retrieved by the retrieval tools.\n */\nexport declare interface GroundingChunkRetrievedContext {\n  /** Optional. URI reference of the attribution. */\n  uri?: string;\n  /** Optional. Title of the attribution. */\n  title?: string;\n}\n\n/**\n * Grounding chunk.\n */\nexport declare interface GroundingChunk {\n  /** Optional. Grounding chunk from the web. */\n  web?: GroundingChunkWeb;\n  /**\n   * Optional. Grounding chunk from context retrieved by the retrieval tools.\n   */\n  retrievedContext?: GroundingChunkRetrievedContext;\n}\n\n/**\n * Grounding support segment.\n */\nexport declare interface GroundingSupportSegment {\n  /** Optional. The index of a Part object within its parent Content object. */\n  partIndex?: number;\n  /**\n   * Optional. Start index in the given Part, measured in bytes.\n   * Offset from the start of the Part, inclusive, starting at zero.\n   */\n  startIndex?: number;\n  /**\n   * Optional. End index in the given Part, measured in bytes.\n   * Offset from the start of the Part, exclusive, starting at zero.\n   */\n  endIndex?: number;\n  /** Optional. The text corresponding to the segment from the response. */\n  text?: string;\n}\n\n/**\n * Grounding support.\n */\nexport declare interface GroundingSupport {\n  /** Optional. Segment of the content this support belongs to. */\n  segment?: GroundingSupportSegment;\n  /**\n   * Optional. A arrau of indices (into {@link GroundingChunk}) specifying the\n   * citations associated with the claim. For instance [1,3,4] means\n   * that grounding_chunk[1], grounding_chunk[3],\n   * grounding_chunk[4] are the retrieved content attributed to the claim.\n   */\n  groundingChunkIndices?: number[];\n  /**\n   * Confidence score of the support references. Ranges from 0 to 1. 1 is the\n   * most confident. This list must have the same size as the\n   * groundingChunkIndices.\n   */\n  confidenceScores?: number[];\n}\n\n/**\n * A collection of grounding attributions for a piece of content.\n */\nexport declare interface GroundingMetadata {\n  /** Optional. Web search queries for the following-up web search. */\n  webSearchQueries?: string[];\n  /** Optional. Queries executed by the retrieval tools. */\n  retrievalQueries?: string[];\n  /** Optional. Google search entry for the following-up web searches. {@link SearchEntryPoint} */\n  searchEntryPoint?: SearchEntryPoint;\n  /**\n   * Optional. Array of supporting references retrieved from specified\n   * grounding source. {@link GroundingChunk}.\n   */\n  groundingChunks?: GroundingChunk[];\n  /** Optional. Array of grounding support. {@link GroundingSupport}. */\n  groundingSupports?: GroundingSupport[];\n}\n\n/**\n * @deprecated\n * Segment of the content this attribution belongs to.\n */\nexport declare interface GroundingAttributionSegment {\n  /** Optional. The index of a Part object within its parent Content object. */\n  partIndex?: number;\n  /**\n   * Optional. Start index in the given Part, measured in bytes. Offset from the\n   * start of the Part, inclusive, starting at zero.\n   */\n  startIndex?: number;\n  /**\n   * Optional. End index in the given Part, measured in bytes. Offset from the\n   * start of the Part, exclusive, starting at zero.\n   */\n  endIndex?: number;\n}\n\n/**\n * @deprecated\n * Attribution from the web.\n */\nexport declare interface GroundingAttributionWeb {\n  /** Optional. URI reference of the attribution. */\n  uri?: string;\n  /** Optional. Title of the attribution. */\n  title?: string;\n}\n\n/**\n * @deprecated\n * Attribution from context retrieved by the retrieval tools.\n */\nexport declare interface GroundingAttributionRetrievedContext {\n  /** Optional. URI reference of the attribution. */\n  uri?: string;\n  /** Optional. Title of the attribution. */\n  title?: string;\n}\n\n/**\n * A predicted FunctionCall returned from the model that contains a string\n * representating the FunctionDeclaration.name with the parameters and their\n * values.\n */\nexport declare interface FunctionCall {\n  /** The name of the function specified in FunctionDeclaration.name. */\n  name: string;\n  /** The arguments to pass to the function. */\n  args: object;\n}\n\n/**\n * The result output of a FunctionCall that contains a string representing\n * the FunctionDeclaration.name and a structured JSON object containing any\n * output from the function call. It is used as context to the model.\n */\nexport declare interface FunctionResponse {\n  /** The name of the function specified in FunctionDeclaration.name. */\n  name: string;\n  /** The expected response from the model. */\n  response: object;\n}\n\n/**\n * Structured representation of a function declaration as defined by the\n * [OpenAPI 3.0 specification](https://spec.openapis.org/oas/v3.0.3). Included\n * in this declaration are the function name and parameters. This\n * FunctionDeclaration is a representation of a block of code that can be used\n * as a Tool by the model and executed by the client.\n */\nexport declare interface FunctionDeclaration {\n  /**\n   * The name of the function to call. Must start with a letter or an\n   * underscore. Must be a-z, A-Z, 0-9, or contain underscores and dashes, with\n   * a max length of 64.\n   */\n  name: string;\n  /**\n   * Optional. Description and purpose of the function. Model uses it to decide\n   * how and whether to call the function.\n   */\n  description?: string;\n  /**\n   * Optional. Describes the parameters to this function in JSON Schema Object\n   * format. Reflects the Open API 3.03 Parameter Object. string Key: the name\n   * of the parameter. Parameter names are case sensitive. Schema Value: the\n   * Schema defining the type used for the parameter. For function with no\n   * parameters, this can be left unset.\n   *\n   * @example with 1 required and 1 optional parameter: type: OBJECT properties:\n   * ```\n   * param1:\n   *\n   *   type: STRING\n   * param2:\n   *\n   *  type: INTEGER\n   * required:\n   *\n   *   - param1\n   * ```\n   */\n  parameters?: FunctionDeclarationSchema;\n}\n\n/**\n * A FunctionDeclarationsTool is a piece of code that enables the system to\n * interact with external systems to perform an action, or set of actions,\n * outside of knowledge and scope of the model.\n */\nexport declare interface FunctionDeclarationsTool {\n  /**\n   * Optional. One or more function declarations\n   * to be passed to the model along with the current user query. Model may\n   * decide to call a subset of these functions by populating\n   * [FunctionCall][content.part.functionCall] in the response. User should\n   * provide a [FunctionResponse][content.part.functionResponse] for each\n   * function call in the next turn. Based on the function responses, Model will\n   * generate the final response back to the user. Maximum 64 function\n   * declarations can be provided.\n   */\n  functionDeclarations?: FunctionDeclaration[];\n}\n\n/**\n * Defines a retrieval tool that model can call to access external knowledge.\n */\nexport declare interface RetrievalTool {\n  /** Optional. {@link Retrieval}. */\n  retrieval?: Retrieval;\n}\n\nexport declare interface VertexRagStore {\n  /**\n   * Optional. List of corpora for retrieval. Currently only support one corpus\n   * or multiple files from one corpus. In the future we may open up multiple\n   * corpora support.\n   */\n  ragResources?: RagResource[];\n\n  /** Optional. Number of top k results to return from the selected corpora. */\n  similarityTopK?: number;\n\n  /**\n   * Optional. If set this field, results with vector distance smaller than\n   * this threshold will be returned.\n   */\n  vectorDistanceThreshold?: number;\n}\n\n/**\n * Config of Vertex RagStore grounding checking.\n */\nexport declare interface RagResource {\n  /**\n   * Optional. Vertex RAG Store corpus resource name.\n   *\n   * @example\n   * `projects/{project}/locations/{location}/ragCorpora/{rag_corpus}`\n   */\n  ragCorpus?: string;\n\n  /**\n   * Optional. Set this field to select the files under the ragCorpora for\n   * retrieval.\n   */\n  ragFileIds?: string[];\n}\n\n/**\n * Defines a retrieval tool that model can call to access external knowledge.\n */\nexport declare interface GoogleSearchRetrievalTool {\n  /** Optional. {@link GoogleSearchRetrieval}. */\n  googleSearchRetrieval?: GoogleSearchRetrieval;\n}\n\n/** Defines a tool that model can call to access external knowledge. */\nexport declare type Tool =\n  | FunctionDeclarationsTool\n  | RetrievalTool\n  | GoogleSearchRetrievalTool;\n\n/**\n * Defines a retrieval tool that model can call to access external knowledge.\n */\nexport declare interface Retrieval {\n  /**\n   * Optional. Set to use data source powered by Vertex AI Search. {@link\n   * VertexAISearch}.\n   */\n  vertexAiSearch?: VertexAISearch;\n\n  /** Optional. Set to use data source powered by Vertex RAG store. */\n  vertexRagStore?: VertexRagStore;\n\n  /**\n   * Optional. Disable using the result from this tool in detecting grounding\n   * attribution. This does not affect how the result is given to the model for\n   * generation.\n   */\n  disableAttribution?: boolean;\n}\n\nexport enum Mode {\n  MODE_UNSPECIFIED = 'MODE_UNSPECIFIED',\n  MODE_DYNAMIC = 'MODE_DYNAMIC',\n}\n\n/** Describes the options to customize dynamic retrieval. */\nexport declare interface DynamicRetrievalConfig {\n  /** Optional. The threshold to be used in dynamic retrieval. If not set, a system default value is used. */\n  dynamicThreshold?: number;\n  /** The mode of the predictor to be used in dynamic retrieval. */\n  mode?: Mode;\n}\n\n/**\n * Tool to retrieve public web data for grounding, powered by Google.\n */\nexport declare interface GoogleSearchRetrieval {\n  /** Specifies the dynamic retrieval configuration for the given source. */\n  dynamicRetrievalConfig?: DynamicRetrievalConfig;\n}\n\n/**\n * Retrieve from Vertex AI Search datastore for grounding.\n */\nexport declare interface VertexAISearch {\n  /**\n   * Fully-qualified Vertex AI Search's datastore resource ID. See\n   * https://cloud.google.com/vertex-ai-search-and-conversation\n   *\n   * @example\n   * \"projects/<>/locations/<>/collections/<>/dataStores/<>\"\n   */\n  datastore: string;\n}\n\n/**\n * Contains the list of OpenAPI data types\n * as defined by https://swagger.io/docs/specification/data-models/data-types/\n */\nexport declare type FunctionDeclarationSchemaType = SchemaType;\nexport const FunctionDeclarationSchemaType = {...SchemaType};\n\n/**\n * Schema for parameters passed to {@link FunctionDeclaration.parameters}.\n */\nexport interface FunctionDeclarationSchema {\n  /** The type of the parameter. */\n  type: SchemaType;\n  /** The format of the parameter. */\n  properties: {[k: string]: FunctionDeclarationSchemaProperty};\n  /** Optional. Description of the parameter. */\n  description?: string;\n  /** Optional. Array of required parameters. */\n  required?: string[];\n}\n\n/**\n * FunctionDeclarationSchemaProperty is used to define the format of\n * input/output data. Represents a select subset of an OpenAPI 3.0 schema object.\n * More fields may be added in the future as needed.\n */\nexport type FunctionDeclarationSchemaProperty = Schema;\n\n/**\n * Params to initiate a multiturn chat with the model via startChat.\n */\nexport declare interface StartChatParams {\n  /** Optional. History of the chat session. {@link Content} */\n  history?: Content[];\n  /** Optional. Array of {@link SafetySetting}. */\n  safetySettings?: SafetySetting[];\n  /** Optional. {@link GenerationConfig}. */\n  generationConfig?: GenerationConfig;\n  /** Optional. Array of {@link Tool}. */\n  tools?: Tool[];\n  /** Optional. This config is shared for all tools provided in the request. */\n  toolConfig?: ToolConfig;\n  /** Optional. The base Vertex AI endpoint to use for the request. */\n  apiEndpoint?: string;\n  /**\n   * Optional. The user provided system instructions for the model.\n   * Note: only text should be used in parts of {@link Content}\n   */\n  systemInstruction?: string | Content;\n  /**\n   * Optional. The name of the cached content used as context to serve the prediction.\n   * This is the name of a `CachedContent` and not the cache object itself.\n   */\n  cachedContent?: string;\n}\n\n/**\n * All params passed to initiate multiturn chat via startChat.\n */\nexport declare interface StartChatSessionRequest extends StartChatParams {\n  /** The Google Cloud project to use for the request. */\n  project: string;\n  /** The Google Cloud project location to use for the request. */\n  location: string;\n  /** The Google Auth to use for the request. */\n  googleAuth: GoogleAuth;\n  /** The publisher model endpoint to use for the request. */\n  publisherModelEndpoint: string;\n  /** The resource path to use for the request. */\n  resourcePath: string;\n  /**\n   * Optional. The user provided system instructions for the model.\n   * Note: only text should be used in parts of {@link Content}\n   */\n  systemInstruction?: string | Content;\n}\n\n/**\n * Request options params passed to getGenerativeModel method in VertexAI class.\n */\nexport interface RequestOptions {\n  /** timeout in milli seconds. time out value needs to be non negative. */\n  timeout?: number;\n  /**\n   * Value for x-goog-api-client header to set on the API request. This is\n   * intended for wrapper SDKs to set additional SDK identifiers for the\n   * backend.\n   */\n  apiClient?: string;\n  /**\n   * Value for custom HTTP headers to set on the HTTP request.\n   */\n  customHeaders?: Headers;\n}\n\n/**\n * A resource used in LLM queries for users to explicitly specify\n * what to cache and how to cache.\n */\nexport interface CachedContent {\n  /**\n   * Immutable. Identifier. The server-generated resource name of the cached content.\n   * Format: projects/{project}/locations/{location}/cachedContents/{cached_content}\n   */\n  name?: string;\n\n  /** Optional. Immutable. The user-generated meaningful display name of the cached content. */\n  displayName?: string;\n\n  /**\n   * Immutable. The name of the publisher model to use for cached content.\n   * Format: projects/{project}/locations/{location}/publishers/{publisher}/models/{model}\n   */\n  model?: string;\n\n  /** Developer set system instruction. Currently, text only. */\n  systemInstruction?: Content | string;\n\n  /** Optional. Input only. Immutable. The content to cache. */\n  contents?: Content[];\n\n  /** Optional. Input only. Immutable. A list of `Tools` the model may use to generate the next response. */\n  tools?: Tool[];\n\n  /** Optional. Input only. Immutable. Tool config. This config is shared for all tools. */\n  toolConfig?: ToolConfig;\n\n  /**\n   * Output only. Creatation time of the cache entry.\n   * Format: google-datetime. See {@link https://cloud.google.com/docs/discovery/type-format}\n   */\n  createTime?: string;\n\n  /**\n   * Output only. When the cache entry was last updated in UTC time.\n   * Format: google-datetime. See {@link https://cloud.google.com/docs/discovery/type-format}\n   */\n  updateTime?: string;\n\n  /** Output only. Metadata on the usage of the cached content. */\n  usageMetadata?: CachedContentUsageMetadata;\n\n  /**\n   * Timestamp of when this resource is considered expired.\n   * This is *always* provided on output, regardless of what was sent on input.\n   */\n  expireTime?: string;\n\n  /**\n   * Input only. The TTL seconds for this resource. The expiration time\n   * is computed: now + TTL.\n   * Format: google-duration. See {@link https://cloud.google.com/docs/discovery/type-format}\n   */\n  ttl?: string;\n}\n\n/** Metadata on the usage of the cached content. */\nexport interface CachedContentUsageMetadata {\n  /** Total number of tokens that the cached content consumes. */\n  totalTokenCount?: number;\n\n  /** Number of text characters. */\n  textCount?: number;\n\n  /** Number of images. */\n  imageCount?: number;\n\n  /** Duration of video in seconds. */\n  videoDurationSeconds?: number;\n\n  /** Duration of audio in seconds. */\n  audioDurationSeconds?: number;\n}\n\n/** Response with a list of CachedContents. */\nexport interface ListCachedContentsResponse {\n  /** List of cached contents. */\n  cachedContents?: CachedContent[];\n  /** A token, which can be sent as `page_token` to retrieve the next page. If this field is omitted, there are no subsequent pages. */\n  nextPageToken?: string;\n}\n","/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** This config is shared for all tools provided in the request. */\nexport interface ToolConfig {\n  /** Function calling config. */\n  functionCallingConfig?: FunctionCallingConfig;\n}\n\n/** Function calling mode. */\nexport enum FunctionCallingMode {\n  /** Unspecified function calling mode. This value should not be used. */\n  MODE_UNSPECIFIED = 'MODE_UNSPECIFIED',\n  /**\n   * Default model behavior, model decides to predict either function calls\n   * or natural language response.\n   */\n  AUTO = 'AUTO',\n  /**\n   * Model is constrained to always predicting function calls only.\n   * If \"allowedFunctionNames\" are set, the predicted function calls will be\n   * limited to any one of \"allowedFunctionNames\", else the predicted\n   * function calls will be any one of the provided \"function_declarations\".\n   */\n  ANY = 'ANY',\n  /**\n   * Model will not predict any function calls. Model behavior is same as when\n   * not passing any function declarations.\n   */\n  NONE = 'NONE',\n}\n\nexport interface FunctionCallingConfig {\n  /** Optional. Function calling mode. */\n  mode?: FunctionCallingMode;\n\n  /**\n   * Optional. Function names to call. Only set when the Mode is ANY. Function\n   * names should match [FunctionDeclaration.name]. With mode set to ANY, model\n   * will predict a function call from the set of function names provided.\n   */\n  allowedFunctionNames?: string[];\n}\n","/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {GenerateContentCandidate, FunctionCall, Part} from './content';\n\n/** Helper class to render any extra properties out of\n * {@link GenerateContentResponse} or properties of {@link GenerateContentResponse}\n */\nexport class GenerateContentResponseHandler {\n  /**\n   * Extracts function calls from a {@link GenerateContentCandidate}.\n   *\n   * @param candidate - The candidate to extract function calls from.\n   * @returns the array of function calls in a {@link GenerateContentCandidate}.\n   */\n  static getFunctionCallsFromCandidate(\n    candidate?: GenerateContentCandidate\n  ): FunctionCall[] {\n    if (!candidate) return [] as FunctionCall[];\n    return candidate.content.parts\n      .filter((part: Part | undefined) => !!part && !!part.functionCall)\n      .map((part: Part) => part.functionCall!);\n  }\n}\n","/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport * from './content';\nexport * from './errors';\nexport * from './tool';\nexport * from './common';\nexport {GenerateContentResponseHandler} from './generate_content_response_handler';\n","/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {formulateSystemInstructionIntoContent} from '../functions/util';\nimport {ClientError} from '../types';\nimport {CachedContent, ListCachedContentsResponse} from '../types';\nimport {ApiClient} from './shared/api_client';\n\nfunction camelToSnake(str: string): string {\n  return str.replace(/[A-Z]/g, letter => `_${letter.toLowerCase()}`);\n}\n\nclass CachedContentsClient {\n  constructor(readonly apiClient: ApiClient) {}\n\n  create(cachedContent: CachedContent): Promise<CachedContent> {\n    return this.apiClient.unaryApiCall(\n      new URL(\n        this.apiClient.getBaseUrl() +\n          '/' +\n          this.apiClient.getBaseResourePath() +\n          '/cachedContents'\n      ),\n      {\n        body: JSON.stringify(cachedContent),\n      },\n      'POST'\n    );\n  }\n\n  update(\n    cachedContent: CachedContent,\n    updateMask: string[]\n  ): Promise<CachedContent> {\n    const url = new URL(this.apiClient.getBaseUrl() + '/' + cachedContent.name);\n    url.searchParams.append(\n      'updateMask',\n      updateMask.map(e => camelToSnake(e)).join(',')\n    );\n    return this.apiClient.unaryApiCall(\n      url,\n      {\n        body: JSON.stringify(cachedContent),\n      },\n      'PATCH'\n    );\n  }\n\n  delete(name: string): Promise<void> {\n    return this.apiClient.unaryApiCall(\n      new URL(this.apiClient.getBaseUrl() + '/' + name),\n      {},\n      'DELETE'\n    );\n  }\n\n  list(\n    pageSize?: number,\n    pageToken?: string\n  ): Promise<ListCachedContentsResponse> {\n    const url = new URL(\n      this.apiClient.getBaseUrl() +\n        '/' +\n        this.apiClient.getBaseResourePath() +\n        '/cachedContents'\n    );\n    if (pageSize) url.searchParams.append('pageSize', String(pageSize));\n    if (pageToken) url.searchParams.append('pageToken', pageToken);\n    return this.apiClient.unaryApiCall(url, {}, 'GET');\n  }\n\n  get(name: string): Promise<CachedContent> {\n    return this.apiClient.unaryApiCall(\n      new URL(this.apiClient.getBaseUrl() + '/' + name),\n      {},\n      'GET'\n    );\n  }\n}\n\nexport function inferFullResourceName(\n  project: string,\n  location: string,\n  cachedContentId: string\n): string {\n  if (cachedContentId.startsWith('projects/')) {\n    return cachedContentId;\n  }\n  if (cachedContentId.startsWith('locations/')) {\n    return `projects/${project}/${cachedContentId}`;\n  }\n  if (cachedContentId.startsWith('cachedContents/')) {\n    return `projects/${project}/locations/${location}/${cachedContentId}`;\n  }\n  if (!cachedContentId.includes('/')) {\n    return `projects/${project}/locations/${location}/cachedContents/${cachedContentId}`;\n  }\n  throw new ClientError(\n    `Invalid CachedContent.name: ${cachedContentId}. CachedContent.name should start with 'projects/', 'locations/', 'cachedContents/' or is a number type.`\n  );\n}\n\n/**\n * Infers the full model name based on the provided project, location, and model.\n *\n * @internal\n */\nexport function inferModelName(\n  project: string,\n  location: string,\n  model?: string\n) {\n  if (!model) {\n    throw new ClientError('Model name is required.');\n  }\n  if (model.startsWith('publishers/')) {\n    return `projects/${project}/locations/${location}/${model}`;\n  }\n  if (!model.startsWith('projects/')) {\n    return `projects/${project}/locations/${location}/publishers/google/models/${model}`;\n  }\n  return model;\n}\n\n/**\n * This class is for managing Vertex AI's CachedContent resource.\n * @public\n */\nexport class CachedContents {\n  private readonly client: CachedContentsClient;\n  constructor(client: ApiClient) {\n    this.client = new CachedContentsClient(client);\n  }\n\n  /**\n   * Creates cached content, this call will initialize the cached content in the data storage, and users need to pay for the cache data storage.\n   * @param cachedContent\n   * @param parent - Required. The parent resource where the cached content will be created.\n   */\n  create(cachedContent: CachedContent): Promise<CachedContent> {\n    const curatedCachedContent = {\n      ...cachedContent,\n      systemInstruction: cachedContent.systemInstruction\n        ? formulateSystemInstructionIntoContent(cachedContent.systemInstruction)\n        : undefined,\n      model: inferModelName(\n        this.client.apiClient.project,\n        this.client.apiClient.location,\n        cachedContent.model\n      ),\n    } as CachedContent;\n    return this.client.create(curatedCachedContent);\n  }\n\n  /**\n   * Updates cached content configurations\n   *\n   * @param updateMask - Required. The list of fields to update. Format: google-fieldmask. See {@link https://cloud.google.com/docs/discovery/type-format}\n   * @param name - Immutable. Identifier. The server-generated resource name of the cached content Format: projects/{project}/locations/{location}/cachedContents/{cached_content}.\n   */\n  update(\n    cachedContent: CachedContent,\n    updateMask: string[]\n  ): Promise<CachedContent> {\n    if (!cachedContent.name) {\n      throw new ClientError('Cached content name is required for update.');\n    }\n    if (!updateMask || updateMask.length === 0) {\n      throw new ClientError(\n        'Update mask is required for update. Fields set in cachedContent but not in updateMask will be ignored. Examples: [\"ttl\"] or [\"expireTime\"].'\n      );\n    }\n    const curatedCachedContent = {\n      ...cachedContent,\n      systemInstruction: cachedContent.systemInstruction\n        ? formulateSystemInstructionIntoContent(cachedContent.systemInstruction)\n        : undefined,\n      name: inferFullResourceName(\n        this.client.apiClient.project,\n        this.client.apiClient.location,\n        cachedContent.name\n      ),\n    };\n    return this.client.update(curatedCachedContent, updateMask);\n  }\n\n  /**\n   * Deletes cached content.\n   *\n   * @param name - Required. The resource name referring to the cached content.\n   */\n  delete(name: string): Promise<void> {\n    return this.client.delete(\n      inferFullResourceName(\n        this.client.apiClient.project,\n        this.client.apiClient.location,\n        name\n      )\n    );\n  }\n\n  /**\n   * Lists cached contents in a project.\n   *\n   * @param pageSize - Optional. The maximum number of cached contents to return. The service may return fewer than this value. If unspecified, some default (under maximum) number of items will be returned. The maximum value is 1000; values above 1000 will be coerced to 1000.\n   * @param pageToken - Optional. A page token, received from a previous `ListCachedContents` call. Provide this to retrieve the subsequent page. When paginating, all other parameters provided to `ListCachedContents` must match the call that provided the page token.\n   */\n  list(\n    pageSize?: number,\n    pageToken?: string\n  ): Promise<ListCachedContentsResponse> {\n    return this.client.list(pageSize, pageToken);\n  }\n\n  /**\n   * Gets cached content configurations.\n   *\n   * @param name - Required. The resource name referring to the cached content.\n   */\n  get(name: string): Promise<CachedContent> {\n    return this.client.get(\n      inferFullResourceName(\n        this.client.apiClient.project,\n        this.client.apiClient.location,\n        name\n      )\n    );\n  }\n}\n","/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {GoogleAuth} from 'google-auth-library';\nimport {constants} from '../../util';\nimport {\n  ClientError,\n  GoogleApiError,\n  GoogleAuthError,\n  GoogleGenerativeAIError,\n} from '../../types';\n\nconst AUTHORIZATION_HEADER = 'Authorization';\nconst CONTENT_TYPE_HEADER = 'Content-Type';\nconst USER_AGENT_HEADER = 'User-Agent';\n\nexport class ApiClient {\n  constructor(\n    readonly project: string,\n    readonly location: string,\n    readonly apiVersion: 'v1' | 'v1beta1',\n    private readonly googleAuth: GoogleAuth\n  ) {}\n\n  /**\n   * Gets access token from GoogleAuth. Throws {@link GoogleAuthError} when\n   * fails.\n   * @returns Promise of token string.\n   */\n  private fetchToken(): Promise<string | null | undefined> {\n    const tokenPromise = this.googleAuth.getAccessToken().catch(e => {\n      throw new GoogleAuthError(constants.CREDENTIAL_ERROR_MESSAGE, e);\n    });\n    return tokenPromise;\n  }\n\n  getBaseUrl() {\n    return `https://${this.location}-aiplatform.googleapis.com/${this.apiVersion}`;\n  }\n\n  getBaseResourePath() {\n    return `projects/${this.project}/locations/${this.location}`;\n  }\n\n  async unaryApiCall(\n    url: URL,\n    requestInit: RequestInit,\n    httpMethod: 'GET' | 'POST' | 'PATCH' | 'DELETE'\n  ): Promise<any> {\n    const token = await this.getHeaders();\n    return this.apiCall(url.toString(), {\n      ...requestInit,\n      method: httpMethod,\n      headers: token,\n    });\n  }\n\n  private async apiCall(\n    url: string,\n    requestInit: RequestInit\n  ): Promise<Response> {\n    const response = await fetch(url, requestInit).catch(e => {\n      throw new GoogleGenerativeAIError(\n        `exception sending request to url: ${url} with requestInit: ${JSON.stringify(requestInit)}}`,\n        e\n      );\n    });\n    await throwErrorIfNotOK(response, url, requestInit).catch(e => {\n      throw e;\n    });\n    try {\n      return await response.json();\n    } catch (e) {\n      throw new GoogleGenerativeAIError(JSON.stringify(response), e as Error);\n    }\n  }\n\n  private async getHeaders(): Promise<Headers> {\n    const token = await this.fetchToken();\n    return new Headers({\n      [AUTHORIZATION_HEADER]: `Bearer ${token}`,\n      [CONTENT_TYPE_HEADER]: 'application/json',\n      [USER_AGENT_HEADER]: constants.USER_AGENT,\n    });\n  }\n}\n\nasync function throwErrorIfNotOK(\n  response: Response | undefined,\n  url: string,\n  requestInit: RequestInit\n) {\n  if (response === undefined) {\n    throw new GoogleGenerativeAIError('response is undefined');\n  }\n  if (!response.ok) {\n    const status: number = response.status;\n    const statusText: string = response.statusText;\n    let errorBody;\n    if (response.headers.get('content-type')?.includes('application/json')) {\n      errorBody = await response.json();\n    } else {\n      errorBody = {\n        error: {\n          message: `exception sending request to url: ${url} with requestInit: ${JSON.stringify(requestInit)}}`,\n          code: response.status,\n          status: response.statusText,\n        },\n      };\n    }\n    const errorMessage = `got status: ${status} ${statusText}. ${JSON.stringify(\n      errorBody\n    )}`;\n    if (status >= 400 && status < 500) {\n      const error = new ClientError(\n        errorMessage,\n        new GoogleApiError(\n          errorBody.error.message,\n          errorBody.error.code,\n          errorBody.error.status,\n          errorBody.error.details\n        )\n      );\n      throw error;\n    }\n    throw new GoogleGenerativeAIError(errorMessage);\n  }\n}\n","/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport {CachedContents} from './cached_contents';\nexport {ApiClient} from './shared/api_client';\n","/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* tslint:disable */\nimport {GoogleAuth, GoogleAuthOptions} from 'google-auth-library';\n\nimport {GenerativeModelPreview, GenerativeModel} from './models';\nimport {\n  CachedContent,\n  GetGenerativeModelParams,\n  ModelParams,\n  RequestOptions,\n  VertexInit,\n} from './types/content';\nimport {\n  GoogleAuthError,\n  IllegalArgumentError,\n  ClientError,\n} from './types/errors';\nimport * as Resources from './resources';\nimport {inferFullResourceName} from './resources/cached_contents';\n\n/**\n * The `VertexAI` class is the base class for authenticating to Vertex AI.\n * To use Vertex AI's generative AI models, use the `getGenerativeModel` method.\n * To use generative AI features that are in Preview, use the `preview`\n * namespace.\n */\nexport class VertexAI {\n  public readonly preview: VertexAIPreview;\n  private readonly project: string;\n  private readonly location: string;\n  private readonly googleAuth: GoogleAuth;\n  private readonly apiEndpoint?: string;\n\n  /**\n   * @constructor\n   * @param init - assign authentication related information,\n   *     including the project and location strings, to instantiate a Vertex AI\n   * client.\n   * @throws {IllegalArgumentError}\n\n   */\n  constructor(init: VertexInit) {\n    const opts = validateGoogleAuthOptions(\n      init.project,\n      init.googleAuthOptions\n    );\n    this.location = resolveLocation(init.location);\n    this.project = resolveProject(init.project);\n    this.googleAuth = new GoogleAuth(opts);\n    this.apiEndpoint = init.apiEndpoint;\n    this.preview = new VertexAIPreview(\n      this.project,\n      this.location,\n      this.googleAuth,\n      this.apiEndpoint\n    );\n  }\n\n  /**\n   * Gets the GenerativeModel class instance.\n   *\n   * This method creates a new instance of the `GenerativeModel` class with the\n   * platform initialization parameters provided in {@link VertexInit} and model\n   * initialization parameters provided in {@link ModelParams}. You can\n   * optionally provide {@link RequestOptions} to override the default request\n   * options.\n   *\n   * @example\n   * ```\n   * const project = 'your-cloud-project';\n   * const location = 'us-central1';\n   * const textModel =  'gemini-1.0-pro';\n   * const visionModel = 'gemini-1.0-pro-vision';\n   *\n   * const vertexAI = new VertexAI({project: project, location: location});\n   *\n   * // Instantiate models\n   * const generativeModel = vertexAI.getGenerativeModel({\n   *   model: textModel,\n   *   // The following parameters are optional\n   *   // They can also be passed to individual content generation requests\n   *   safetySettings: [{\n   *                      category: HarmCategory.HARM_CATEGORY_DANGEROUS_CONTENT,\n   *                      threshold: HarmBlockThreshold.BLOCK_MEDIUM_AND_ABOVE\n   *                     }],\n   *   generationConfig: {maxOutputTokens: 256},\n   * });\n   *\n   * const generativeVisionModel = vertexAI.getGenerativeModel({\n   *   model: visionModel,\n   * });\n   *\n   * const generativeModelPreview = vertexAI.preview.getGenerativeModel({\n   *   model: textModel,\n   * });\n   * ```\n   *\n   * @param modelParams - {@link ModelParams} Parameters to\n   *     specify the generative model.\n   * @param requestOptions - {@link RequestOptions} Parameters to specify\n   *     request options\n   * @returns Instance of the GenerativeModel class.\n   */\n  getGenerativeModel(\n    modelParams: ModelParams,\n    requestOptions?: RequestOptions\n  ): GenerativeModel {\n    const getGenerativeModelParams: GetGenerativeModelParams = {\n      model: modelParams.model,\n      project: this.project,\n      location: this.location,\n      googleAuth: this.googleAuth,\n      apiEndpoint: this.apiEndpoint,\n      safetySettings: modelParams.safetySettings,\n      generationConfig: modelParams.generationConfig,\n      tools: modelParams.tools,\n      toolConfig: modelParams.toolConfig,\n      requestOptions: requestOptions,\n      systemInstruction: modelParams.systemInstruction,\n    };\n    return new GenerativeModel(getGenerativeModelParams);\n  }\n\n  protected getProject(): string {\n    return this.project;\n  }\n\n  protected getLocation(): string {\n    return this.location;\n  }\n}\n\n/**\n * The preview namespace for VertexAI. Users invoke the `getGenerativeModel`\n * method to start using generative AI features that are in preview.\n */\nclass VertexAIPreview {\n  private readonly project: string;\n  private readonly location: string;\n  private readonly googleAuth: GoogleAuth;\n  private readonly apiEndpoint?: string;\n\n  private readonly apiClient: Resources.ApiClient;\n  readonly cachedContents: Resources.CachedContents;\n\n  /**\n   * @constructor\n   * @param project - The Google Cloud project to use for the request\n   * @param location - location The Google Cloud project location to use for the\n   *     request\n   * @param googleAuth - The GoogleAuthen class instance from\n   *     google-auth-library.\n   *        Complete list of authentication options is documented in the\n   * GoogleAuthOptions interface:\n   *        https://github.com/googleapis/google-auth-library-nodejs/blob/main/src/auth/googleauth.ts\n   * @param apiEndpoint - [apiEndpoint] The base Vertex AI endpoint to use for\n   *     the request. If\n   *        not provided, the default regionalized endpoint\n   *        (i.e. us-central1-aiplatform.googleapis.com) will be used.\n   */\n  constructor(\n    project: string,\n    location: string,\n    googleAuth: GoogleAuth,\n    apiEndpoint?: string\n  ) {\n    this.project = project;\n    this.location = location;\n    this.googleAuth = googleAuth;\n    this.apiEndpoint = apiEndpoint;\n\n    this.apiClient = new Resources.ApiClient(\n      this.project,\n      this.location,\n      'v1beta1',\n      this.googleAuth\n    );\n    this.cachedContents = new Resources.CachedContents(this.apiClient);\n  }\n\n  /**\n   * @param modelParams - {@link ModelParams} Parameters to\n   *     specify the generative model.\n   * @returns Instance of the GenerativeModelPreview class.\n   */\n  getGenerativeModel(\n    modelParams: ModelParams,\n    requestOptions?: RequestOptions\n  ): GenerativeModelPreview {\n    const getGenerativeModelParams: GetGenerativeModelParams = {\n      model: modelParams.model,\n      project: this.project,\n      location: this.location,\n      googleAuth: this.googleAuth,\n      apiEndpoint: this.apiEndpoint,\n      safetySettings: modelParams.safetySettings,\n      generationConfig: modelParams.generationConfig,\n      tools: modelParams.tools,\n      toolConfig: modelParams.toolConfig,\n      requestOptions: requestOptions,\n      systemInstruction: modelParams.systemInstruction,\n    };\n    return new GenerativeModelPreview(getGenerativeModelParams);\n  }\n\n  getGenerativeModelFromCachedContent(\n    cachedContent: CachedContent,\n    modelParams?: Partial<ModelParams>,\n    requestOptions?: RequestOptions\n  ) {\n    if (!cachedContent.name) {\n      throw new ClientError('Cached content must contain a `name` field.');\n    }\n    if (!cachedContent.model) {\n      throw new ClientError('Cached content must contain a `model` field.');\n    }\n    validateCachedContentModel(cachedContent.model);\n    /**\n     * Not checking tools and toolConfig for now as it would require a deep\n     * equality comparison and isn't likely to be a common case.\n     */\n    const disallowedDuplicates: Array<keyof ModelParams & keyof CachedContent> =\n      ['model', 'systemInstruction'];\n\n    for (const key of disallowedDuplicates) {\n      if (\n        modelParams?.[key] &&\n        cachedContent[key] &&\n        modelParams?.[key] !== cachedContent[key]\n      ) {\n        if (key === 'model') {\n          const modelParamsComp = parseModelName(modelParams[key]!);\n          const cachedContentComp = parseModelName(cachedContent[key]!);\n          if (modelParamsComp === cachedContentComp) {\n            continue;\n          }\n        }\n        throw new ClientError(\n          `Different value for \"${key}\" specified in modelParams` +\n            ` (${modelParams[key]}) and cachedContent (${cachedContent[key]})`\n        );\n      }\n    }\n\n    cachedContent.name = inferFullResourceName(\n      this.project,\n      this.location,\n      cachedContent.name\n    );\n    const modelParamsFromCache: GetGenerativeModelParams = {\n      model: cachedContent.model,\n      project: this.project,\n      location: this.location,\n      googleAuth: this.googleAuth,\n      apiEndpoint: this.apiEndpoint,\n      safetySettings: modelParams?.safetySettings,\n      generationConfig: modelParams?.generationConfig,\n      tools: cachedContent.tools,\n      toolConfig: cachedContent.toolConfig,\n      requestOptions: requestOptions,\n      systemInstruction: cachedContent.systemInstruction,\n      cachedContent,\n    };\n    return new GenerativeModelPreview(modelParamsFromCache);\n  }\n}\n\nfunction validateCachedContentModel(modelName: string) {\n  if (\n    modelName.startsWith('models/') ||\n    (modelName.startsWith('projects/') &&\n      modelName.includes('/publishers/google/models/')) ||\n    !modelName.includes('/')\n  ) {\n    return;\n  }\n  throw new ClientError(\n    `Cached content model name must start with \"models/\" or match \"projects/.*/publishers/google/models/.*\" or is a model name listed at https://cloud.google.com/vertex-ai/generative-ai/docs/learn/model-versions. Received: ${modelName}`\n  );\n}\n\nfunction parseModelName(modelName: string): string {\n  if (!modelName.includes('/')) {\n    return modelName;\n  }\n  return modelName.split('/').pop()!;\n}\n\nfunction validateGoogleAuthOptions(\n  project?: string,\n  googleAuthOptions?: GoogleAuthOptions\n): GoogleAuthOptions {\n  let opts: GoogleAuthOptions;\n  const requiredScope = 'https://www.googleapis.com/auth/cloud-platform';\n  if (!googleAuthOptions) {\n    opts = {\n      scopes: requiredScope,\n    };\n    return opts;\n  }\n  if (googleAuthOptions.projectId && googleAuthOptions.projectId !== project) {\n    throw new Error(\n      `inconsistent project ID values. argument project got value ${project} but googleAuthOptions.projectId got value ${googleAuthOptions.projectId}`\n    );\n  }\n  opts = googleAuthOptions;\n  if (!opts.scopes) {\n    opts.scopes = requiredScope;\n    return opts;\n  }\n  if (\n    (typeof opts.scopes === 'string' && opts.scopes !== requiredScope) ||\n    (Array.isArray(opts.scopes) && opts.scopes.indexOf(requiredScope) < 0)\n  ) {\n    throw new GoogleAuthError(\n      `input GoogleAuthOptions.scopes ${opts.scopes} doesn't contain required scope ${requiredScope}, please include ${requiredScope} into GoogleAuthOptions.scopes or leave GoogleAuthOptions.scopes undefined`\n    );\n  }\n  return opts;\n}\n\nfunction resolveProject(projectFromInput?: string): string {\n  const projectNotFoundErrorMessage =\n    'Unable to infer your project.' +\n    'Please provide a project Id by one of the following:' +\n    '\\n- Passing a constructor argument by using new VertexAI({project: my-project})' +\n    '\\n- Setting project using `gcloud config set project my-project`';\n  if (projectFromInput) {\n    return projectFromInput;\n  }\n  const inferredProjectFromEnv = process.env['GOOGLE_CLOUD_PROJECT'];\n  if (inferredProjectFromEnv) {\n    return inferredProjectFromEnv;\n  }\n  throw new IllegalArgumentError(projectNotFoundErrorMessage);\n}\n\nfunction resolveLocation(locationFromInput?: string): string {\n  if (locationFromInput) {\n    return locationFromInput;\n  }\n  const inferredLocation =\n    process.env['GOOGLE_CLOUD_REGION'] || process.env['CLOUD_ML_REGION'];\n  if (inferredLocation) {\n    return inferredLocation;\n  }\n  return 'us-central1';\n}\n","/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport {VertexAI} from './vertex_ai';\nexport * from './types';\nexport * from './models';\n","// This function ensures that all the exported values are valid server actions,\n// during the runtime. By definition all actions are required to be async\n// functions, but here we can only check that they are functions.\nexport function ensureServerEntryExports(actions: any[]) {\n  for (let i = 0; i < actions.length; i++) {\n    const action = actions[i]\n    if (typeof action !== 'function') {\n      throw new Error(\n        `A \"use server\" file can only export async functions, found ${typeof action}.\\nRead more: https://nextjs.org/docs/messages/invalid-use-server-value`\n      )\n    }\n  }\n}\n","'use server';\r\n\r\nimport { GoogleAuth } from 'google-auth-library';\r\n\r\nimport { getFirestore } from '@/lib/firebase/admin';\r\nimport { enqueueAnalysis } from '@/lib/queue/client';\r\nimport { Place } from '@/types/schema';\r\n\r\nexport async function searchAndAnalyze(query: string): Promise<string> {\r\n    console.log(`Analyzing place: ${query}`);\r\n    const placeId = query; // In the new flow, query is the placeId\r\n\r\n    const docRef = getFirestore().collection('places').doc(placeId);\r\n    const doc = await docRef.get();\r\n\r\n    if (doc.exists) {\r\n        const data = doc.data() as Place;\r\n        console.log(`Place ${placeId} found. Status: ${data.status}`);\r\n\r\n        // Check for expiration (30 days)\r\n        const now = new Date();\r\n        const updatedAt = data.updatedAt ? (data.updatedAt as any).toDate() : new Date(0); // Handle Firestore Timestamp\r\n        const diffTime = Math.abs(now.getTime() - updatedAt.getTime());\r\n        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n\r\n        if (diffDays > 30) {\r\n            console.log(`Place ${placeId} data is expired (${diffDays} days old). Re-fetching...`);\r\n            // Fall through to fetch logic\r\n        } else if (data.status === 'error') {\r\n            await enqueueAnalysis(placeId);\r\n            return placeId;\r\n        } else {\r\n            return placeId;\r\n        }\r\n    }\r\n\r\n    // If we are here, it means either doc doesn't exist OR it's expired.\r\n    // We need to fetch from Google Places API.\r\n    console.log(`Fetching fresh data for place ${placeId}...`);\r\n\r\n    try {\r\n        const auth = new GoogleAuth({\r\n            scopes: 'https://www.googleapis.com/auth/cloud-platform'\r\n        });\r\n        const client = await auth.getClient();\r\n        const token = await client.getAccessToken();\r\n\r\n        const baseUrl = `https://places.googleapis.com/v1/places/${placeId}?languageCode=ja`;\r\n        const headers = {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Bearer ${token.token}`,\r\n            'X-Goog-FieldMask': 'id,displayName,formattedAddress,rating,userRatingCount,reviews,priceLevel,priceRange'\r\n        };\r\n\r\n        const response = await fetch(baseUrl, { method: 'GET', headers });\r\n\r\n        if (!response.ok) {\r\n            const errorText = await response.text();\r\n            console.error('Google Places API Details Error:', errorText);\r\n            throw new Error(`Google Places API Error: ${response.statusText}`);\r\n        }\r\n\r\n        const data = await response.json();\r\n        console.log('API Response Data:', JSON.stringify(data, null, 2));\r\n\r\n        // Extract reviews\r\n        const reviews = data.reviews?.map((r: any) => r.text?.text).filter(Boolean) || [];\r\n\r\n        console.log(`Fetched reviews: ${reviews.length}`);\r\n\r\n        const newPlace: Place = {\r\n            id: data.id,\r\n            name: data.displayName?.text || 'Unknown',\r\n            address: data.formattedAddress,\r\n            originalRating: data.rating || 0,\r\n            userRatingsTotal: data.userRatingCount || 0,\r\n            ...(data.priceLevel ? { priceLevel: data.priceLevel } : {}),\r\n            ...(data.priceRange ? { priceRange: data.priceRange } : {}),\r\n            reviews: reviews,\r\n            status: 'pending',\r\n            createdAt: doc.exists ? (doc.data() as Place).createdAt : new Date(), // Keep original createdAt if exists\r\n            updatedAt: new Date(),\r\n        };\r\n\r\n        await docRef.set(newPlace);\r\n        await enqueueAnalysis(placeId);\r\n\r\n    } catch (error) {\r\n        console.error('Failed to fetch place details:', error);\r\n        throw error;\r\n    }\r\n\r\n    return placeId;\r\n}\r\n\r\nexport interface PlaceSearchResult {\r\n    id: string;\r\n    name: string;\r\n    rating: number;\r\n    userRatingsTotal: number;\r\n    vicinity?: string;\r\n}\r\n\r\nasync function searchPlacesIdOnly(query: string): Promise<string[]> {\r\n    console.log(`Searching places (ID only) for: ${query}`);\r\n    try {\r\n        const auth = new GoogleAuth({\r\n            scopes: 'https://www.googleapis.com/auth/cloud-platform'\r\n        });\r\n        const client = await auth.getClient();\r\n        const token = await client.getAccessToken();\r\n\r\n        const response = await fetch('https://places.googleapis.com/v1/places:searchText', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${token.token}`,\r\n                'X-Goog-FieldMask': 'places.id'\r\n            },\r\n            body: JSON.stringify({\r\n                textQuery: query,\r\n                languageCode: 'ja',\r\n                maxResultCount: 10\r\n            })\r\n        });\r\n\r\n        if (!response.ok) {\r\n            throw new Error(`Google Places API Error: ${response.statusText}`);\r\n        }\r\n\r\n        const data = await response.json();\r\n        return data.places?.map((p: any) => p.id) || [];\r\n    } catch (error) {\r\n        console.error('Failed to search places (ID only):', error);\r\n        return [];\r\n    }\r\n}\r\n\r\nexport async function searchPlaces(query: string): Promise<PlaceSearchResult[]> {\r\n    console.log(`Searching places list for: ${query}`);\r\n\r\n    try {\r\n        // 1. ID Search (Free)\r\n        const placeIds = await searchPlacesIdOnly(query);\r\n        if (placeIds.length === 0) return [];\r\n\r\n        // 2. Check Cache\r\n        const db = getFirestore();\r\n        const placesRef = db.collection('places');\r\n        const cachedPlaces: PlaceSearchResult[] = [];\r\n        let allCached = true;\r\n\r\n        for (const id of placeIds) {\r\n            const doc = await placesRef.doc(id).get();\r\n            if (doc.exists) {\r\n                const data = doc.data() as Place;\r\n                // Check expiration (30 days)\r\n                const now = new Date();\r\n                const updatedAt = data.updatedAt ? (data.updatedAt as any).toDate() : new Date(0);\r\n                const diffTime = Math.abs(now.getTime() - updatedAt.getTime());\r\n                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n\r\n                if (diffDays <= 30 && data.status !== 'error') {\r\n                    cachedPlaces.push({\r\n                        id: data.id,\r\n                        name: data.name,\r\n                        rating: data.originalRating,\r\n                        userRatingsTotal: data.userRatingsTotal,\r\n                        vicinity: data.address\r\n                    });\r\n                } else {\r\n                    allCached = false;\r\n                    break;\r\n                }\r\n            } else {\r\n                allCached = false;\r\n                break;\r\n            }\r\n        }\r\n\r\n        // 3. Conditional Return\r\n        if (allCached && cachedPlaces.length === placeIds.length) {\r\n            console.log('All places found in cache. Returning cached data.');\r\n            return cachedPlaces;\r\n        }\r\n\r\n        console.log('Cache miss or expired data found. Fetching fresh data from API...');\r\n\r\n        // 4. Fallback to Full Search (Pro)\r\n        const auth = new GoogleAuth({\r\n            scopes: 'https://www.googleapis.com/auth/cloud-platform'\r\n        });\r\n        const client = await auth.getClient();\r\n        const token = await client.getAccessToken();\r\n\r\n        const response = await fetch('https://places.googleapis.com/v1/places:searchText', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${token.token}`,\r\n                'X-Goog-FieldMask': 'places.id,places.displayName,places.formattedAddress,places.rating,places.userRatingCount'\r\n            },\r\n            body: JSON.stringify({\r\n                textQuery: query,\r\n                languageCode: 'ja',\r\n                maxResultCount: 10\r\n            })\r\n        });\r\n\r\n        if (!response.ok) {\r\n            const errorText = await response.text();\r\n            console.error('Google Places API Error:', errorText);\r\n            throw new Error(`Google Places API Error: ${response.statusText}`);\r\n        }\r\n\r\n        const data = await response.json();\r\n\r\n        if (!data.places) {\r\n            return [];\r\n        }\r\n\r\n        // Note: We don't save to DB here because search results (Basic) don't have enough info for the Detail view (Atmosphere).\r\n        // The Detail view will fetch and save the full data.\r\n        // However, if we want to support the \"All Cached\" logic next time, we need to save *something*?\r\n        // No, the Detail view saves the full `Place` object.\r\n        // If we only have Basic info here, saving it might overwrite detailed info if we are not careful.\r\n        // But wait, if we don't save here, the \"Cache Check\" above will always fail for new places until the user clicks Detail.\r\n        // That is acceptable. The optimization is for *re-searching* places that have been *viewed in detail* (or analyzed).\r\n        // Actually, if the user only searches but never clicks detail, we don't pay for Detail API anyway.\r\n        // But we pay for Search API.\r\n        // If we want to cache Search Results to avoid Search API costs, we need to save them.\r\n        // But `Place` schema requires `reviews` etc? No, they are optional.\r\n        // Let's save the basic info to DB so next search hits cache!\r\n        // But be careful not to overwrite \"detailed\" data with \"basic\" data if it exists?\r\n        // Firestore `set` with `merge: true`? Or check existence?\r\n        // The logic above checks `doc.exists`.\r\n        // If we save here, we should save with `status: 'pending'` or similar?\r\n        // Let's just return the data for now. The user's request implies optimization for *already analyzed* places?\r\n        // \"DB... API\"\r\n        // If we don't save here, they will never be in DB unless clicked.\r\n        // So yes, we should probably save them.\r\n        // But `searchPlaces` returns `PlaceSearchResult`, not `Place`.\r\n        // And `Place` requires `originalRating`, etc.\r\n        // Let's save them!\r\n\r\n        const results = data.places.map((place: any) => ({\r\n            id: place.id,\r\n            name: place.displayName?.text || 'Unknown',\r\n            rating: place.rating || 0,\r\n            userRatingsTotal: place.userRatingCount || 0,\r\n            vicinity: place.formattedAddress\r\n        }));\r\n\r\n        // Async save to DB to populate cache for next time\r\n        // We use `set` with `merge: true` to avoid overwriting existing detailed data?\r\n        // Actually, `set` overwrites unless `merge: true`.\r\n        // But we want to update `updatedAt`.\r\n        // Let's fire and forget the save operations.\r\n        (async () => {\r\n            const batch = db.batch();\r\n            for (const res of results) {\r\n                const ref = placesRef.doc(res.id);\r\n                // Only set if not exists or update basic fields?\r\n                // We don't want to overwrite `reviews` with undefined.\r\n                // So we should use `set(..., { merge: true })`.\r\n                batch.set(ref, {\r\n                    id: res.id,\r\n                    name: res.name,\r\n                    address: res.vicinity,\r\n                    originalRating: res.rating,\r\n                    userRatingsTotal: res.userRatingsTotal,\r\n                    updatedAt: new Date(),\r\n                    // Don't set status to 'pending' if it's already 'completed'\r\n                    // We might need to read first? Batch doesn't support conditional based on current value easily without transaction.\r\n                    // For simplicity/safety, let's NOT save here for now.\r\n                    // The primary use case for this app is \"Analysis\", so cache is populated when \"Analysis\" happens.\r\n                    // If we save here, we might pollute DB with non-analyzed places.\r\n                    // But then the \"ID Search\" optimization only works for places that have been *Analyzed*.\r\n                    // That is probably the intended behavior. \"If I search for Starbucks again, and I've analyzed it before, it should be free.\"\r\n                }, { merge: true });\r\n            }\r\n            // await batch.commit(); // Commented out to be safe for now.\r\n        })();\r\n\r\n        return results;\r\n\r\n    } catch (error) {\r\n        console.error('Failed to search places:', error);\r\n        return [];\r\n    }\r\n}\r\n","import * as admin from 'firebase-admin';\r\n\r\nexport function getFirestore() {\r\n    if (!admin.apps.length) {\r\n        admin.initializeApp({\r\n            credential: admin.credential.applicationDefault(),\r\n        });\r\n    }\r\n    return admin.firestore();\r\n}\r\n","import { VertexAI } from '@google-cloud/vertexai';\r\nimport { getFirestore } from '@/lib/firebase/admin';\r\nimport { Place, AnalysisStatus } from '@/types/schema';\r\n\r\n// Initialize Vertex AI lazily\r\nconst getModel = () => {\r\n    const vertexAI = new VertexAI({\r\n        project: process.env.GOOGLE_CLOUD_PROJECT || 'demo-project',\r\n        location: 'us-central1'\r\n    });\r\n    return vertexAI.getGenerativeModel({ model: 'gemini-2.0-flash-001' });\r\n};\r\n\r\nexport async function analyzePlace(placeId: string): Promise<void> {\r\n    console.log(`Starting analysis for place: ${placeId}`);\r\n\r\n    try {\r\n        // 1. Update status to processing\r\n        await getFirestore().collection('places').doc(placeId).update({\r\n            status: 'processing',\r\n            updatedAt: new Date(),\r\n        });\r\n\r\n        // 2. Fetch reviews\r\n        const doc = await getFirestore().collection('places').doc(placeId).get();\r\n        const placeData = doc.data() as Place;\r\n\r\n        let reviewsText = \"\";\r\n        const MIN_REVIEW_LENGTH = 15;\r\n        let analysisStats = {\r\n            totalReviewsFetched: 0,\r\n            validReviews: 0,\r\n            excludedReviews: 0,\r\n            exclusionRatio: 0\r\n        };\r\n\r\n        if (placeData.reviews && placeData.reviews.length > 0) {\r\n            analysisStats.totalReviewsFetched = placeData.reviews.length;\r\n\r\n            // Filter out short reviews to focus on structured feedback\r\n            const validReviews = placeData.reviews.filter(r => r.length >= MIN_REVIEW_LENGTH);\r\n\r\n            analysisStats.validReviews = validReviews.length;\r\n            analysisStats.excludedReviews = analysisStats.totalReviewsFetched - analysisStats.validReviews;\r\n            analysisStats.exclusionRatio = analysisStats.totalReviewsFetched > 0\r\n                ? analysisStats.excludedReviews / analysisStats.totalReviewsFetched\r\n                : 0;\r\n\r\n            console.log(`Filtered reviews: ${validReviews.length} / ${placeData.reviews.length} (Min length: ${MIN_REVIEW_LENGTH})`);\r\n\r\n            if (validReviews.length > 0) {\r\n                reviewsText = validReviews.join(\"\\n\");\r\n            } else {\r\n                console.log(\"No valid reviews after filtering. Using raw reviews as fallback.\");\r\n                reviewsText = placeData.reviews.join(\"\\n\");\r\n                // In fallback case, we consider all as valid for the prompt, but stats reflect the quality issue\r\n            }\r\n        } else {\r\n            console.log(\"No real reviews found. Using mock reviews for fallback.\");\r\n            const mockReviews = [\r\n                \"The food was amazing, especially the sushi! But the service was a bit slow.\",\r\n                \"Great atmosphere, loved the decor. A bit pricey though.\",\r\n                \"Terrible experience. Rude staff and cold food.\",\r\n                \"Best place in town for a date night. Quiet and romantic.\",\r\n                \"Good value for money. Portions are huge.\",\r\n                \"Perfect for a business dinner. Private rooms available and very attentive service.\",\r\n                \"I went alone and felt very comfortable at the counter.\"\r\n            ];\r\n            reviewsText = mockReviews.join(\"\\n\");\r\n        }\r\n\r\n        // 3. Call Gemini API\r\n        const prompt = `\r\n      Analyze the following reviews for a restaurant and provide scores (0-5) for Taste, Service, Atmosphere, and Cost.\r\n      Also calculate a \"True Score\" (AI Analysis Score / AI) which is a weighted average based on sentiment reliability, and a brief summary.\r\n      \r\n      **CRITICAL INSTRUCTION: The output JSON content MUST BE WRITTEN IN JAPANESE.**\r\n\r\n      **IMPORTANT RULES FOR SCORING:**\r\n      1. **NO PRIOR KNOWLEDGE**: Do NOT use any external knowledge about this brand or place. Rely ONLY on the provided reviews.\r\n      2. **EVIDENCE BASED**: If the reviews do not contain specific information about an axis (e.g., Cost), you MUST assign a score of **3 (Neutral)**. Do not guess.\r\n      3. **STRUCTURED REVIEWS ONLY**: Focus on the logic and reasoning in the reviews. Ignore emotional outbursts without context.\r\n\r\n      Additionally, provide the following detailed insights:\r\n      1. \"gapReason\": Explain why the \"AI\" (True Score) might differ from a typical average rating. Use the term \"AI\" in your explanation, NOT \"True Score\".\r\n      2. \"axisAnalysis\": For EACH axis (taste, service, atmosphere, cost), provide:\r\n         - \"pros\": A list of positive points (strings).\r\n         - \"cons\": A list of negative points (strings).\r\n         - \"summary\": A brief summary string.\r\n\r\n      Evaluate the suitability (0-5) for the following scenarios based on the reviews:\r\n      - Business (): Is it quiet? Good service? Private rooms?\r\n      - Date (): Romantic? Good ambiance?\r\n      - Solo (): Counter seats? Easy to enter alone?\r\n      - Solo (): Counter seats? Easy to enter alone?\r\n      - Family (): Kids friendly? Spacious?\r\n      \r\n      Also provide a \"usageSummary\" (string): A brief explanation of why these usage scores were assigned, BASED STRICTLY ON THE REVIEWS.\r\n      - Do NOT include your own opinion or negative inferences if not mentioned in the text.\r\n      - If a specific scenario is not mentioned, do not comment on it.\r\n      - Example: \"Has private rooms suitable for business. Counter seats available.\" (Do NOT say \"Not suitable for families\" if reviews don't say so).\r\n      \r\n      Reviews:\r\n      ${reviewsText}\r\n      \r\n      Output JSON format:\r\n      {\r\n        \"trueScore\": number,\r\n        \"axisScores\": {\r\n          \"taste\": number,\r\n          \"service\": number,\r\n          \"atmosphere\": number,\r\n          \"cost\": number\r\n        },\r\n        \"usageScores\": {\r\n          \"business\": number,\r\n          \"date\": number,\r\n          \"solo\": number,\r\n          \"family\": number\r\n        },\r\n        \"usageSummary\": \"string\",\r\n        \"summary\": \"string\",\r\n        \"gapReason\": \"string\",\r\n        \"axisAnalysis\": {\r\n          \"taste\": { \"pros\": [\"string\"], \"cons\": [\"string\"], \"summary\": \"string\" },\r\n          \"service\": { \"pros\": [\"string\"], \"cons\": [\"string\"], \"summary\": \"string\" },\r\n          \"atmosphere\": { \"pros\": [\"string\"], \"cons\": [\"string\"], \"summary\": \"string\" },\r\n          \"cost\": { \"pros\": [\"string\"], \"cons\": [\"string\"], \"summary\": \"string\" }\r\n        }\r\n      }\r\n    `;\r\n\r\n        const result = await getModel().generateContent(prompt);\r\n        const response = result.response;\r\n        const text = response.candidates?.[0].content.parts[0].text;\r\n\r\n        if (!text) throw new Error(\"No response from Gemini\");\r\n\r\n        // Clean up markdown code blocks if present\r\n        let jsonStr = text.replace(/```json\\n|\\n```/g, \"\");\r\n        // Remove any leading/trailing whitespace\r\n        jsonStr = jsonStr.trim();\r\n\r\n        // Find the first '{' and last '}' to handle potential extra text\r\n        const firstOpen = jsonStr.indexOf('{');\r\n        const lastClose = jsonStr.lastIndexOf('}');\r\n        if (firstOpen !== -1 && lastClose !== -1) {\r\n            jsonStr = jsonStr.substring(firstOpen, lastClose + 1);\r\n        }\r\n\r\n        const analysis = JSON.parse(jsonStr);\r\n\r\n        // 4. Save results to Firestore\r\n        await getFirestore().collection('places').doc(placeId).update({\r\n            status: 'completed',\r\n            trueScore: analysis.trueScore,\r\n            axisScores: analysis.axisScores,\r\n            usageScores: analysis.usageScores,\r\n            usageSummary: analysis.usageSummary || \"\",\r\n            summary: analysis.summary,\r\n            gapReason: analysis.gapReason || \"\",\r\n            axisAnalysis: analysis.axisAnalysis || {},\r\n            analysisStats: analysisStats,\r\n            lastAnalyzedAt: new Date(),\r\n            updatedAt: new Date(),\r\n        });\r\n\r\n        console.log(`Analysis completed for place: ${placeId}`);\r\n\r\n    } catch (error) {\r\n        console.error(`Analysis failed for place: ${placeId}`, error);\r\n        await getFirestore().collection('places').doc(placeId).update({\r\n            status: 'error',\r\n            updatedAt: new Date(),\r\n        });\r\n        throw error;\r\n    }\r\n}\r\n","import { analyzePlace } from '@/server/services/analyzer.service';\r\n\r\nexport async function enqueueAnalysis(placeId: string) {\r\n    const isDev = process.env.NODE_ENV === 'development';\r\n\r\n    if (isDev) {\r\n        console.log(`[Local] Enqueuing analysis for ${placeId} directly.`);\r\n        try {\r\n            await analyzePlace(placeId);\r\n        } catch (e) {\r\n            console.error(\"Local analysis failed\", e);\r\n        }\r\n    } else {\r\n        console.log(`[Prod] Enqueuing analysis for ${placeId} to Cloud Tasks.`);\r\n\r\n        // Dynamic import to avoid build-time evaluation issues in dev/build\r\n        const { CloudTasksClient } = await import('@google-cloud/tasks');\r\n        const client = new CloudTasksClient();\r\n\r\n        const project = process.env.GOOGLE_CLOUD_PROJECT;\r\n        const queue = 'analysis-queue';\r\n        const location = 'us-central1';\r\n        const url = `https://${process.env.NEXT_PUBLIC_HOST}/api/tasks/analyze`;\r\n\r\n        const parent = client.queuePath(project!, location, queue);\r\n\r\n        const task = {\r\n            httpRequest: {\r\n                httpMethod: 'POST' as const,\r\n                url,\r\n                body: Buffer.from(JSON.stringify({ placeId })).toString('base64'),\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n            },\r\n        };\r\n\r\n        await client.createTask({ parent, task });\r\n    }\r\n}\r\n","'use server';\r\n\r\nexport async function getGoogleMapsApiKey(): Promise<string> {\r\n    const key = process.env.GOOGLE_MAPS_API_KEY;\r\n    console.log('getGoogleMapsApiKey called. Key exists:', !!key);\r\n    if (!key) {\r\n        console.warn('GOOGLE_MAPS_API_KEY is not set');\r\n        return '';\r\n    }\r\n    return key;\r\n}\r\n"],"names":["registerServerReference","ensureServerEntryExports","actions","i","length","action","Error"],"mappings":"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","ignoreList":[0,2,3,4,5,6,7,8,9,10,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,94]}